2025-06-26 17:30:11,787 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:30:11,787 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:32:15,278 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:32:15,279 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:32:19,660 [INFO] [Dify] 收到请求: {'api_endpoint': '/budgets', 'method': 'GET', 'query_parameters': {'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}}
2025-06-26 17:32:19,737 [WARNING] 获取预算限制失败: name 'request_data' is not defined
2025-06-26 17:32:19,737 [INFO] 192.168.1.68 - - [26/Jun/2025 17:32:19] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:34:50,519 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:34:50,519 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:34:54,841 [INFO] [Dify] 收到请求: {'api_endpoint': '/budgets', 'method': 'GET', 'query_parameters': {'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}}
2025-06-26 17:34:55,045 [INFO] 预算 1 通过 /budgets/1/limits 查询到 4 条记录
2025-06-26 17:34:55,046 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-23T00:00:00+08:00 - 2025-06-29T23:59:59+08:00
2025-06-26 17:34:55,046 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-16T00:00:00+08:00 - 2025-06-22T23:59:59+08:00
2025-06-26 17:34:55,046 [INFO] 预算 1 找到限制记录: 4000.0, 时间: 2025-06-09T00:00:00+08:00 - 2025-06-15T23:59:59+08:00
2025-06-26 17:34:55,047 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-02T00:00:00+08:00 - 2025-06-08T23:59:59+08:00
2025-06-26 17:34:55,047 [INFO] 192.168.1.68 - - [26/Jun/2025 17:34:55] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:41:50,402 [INFO] [Dify] 收到请求: {'api_endpoint': '/budgets', 'method': 'GET', 'query_parameters': {'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}}
2025-06-26 17:41:50,638 [INFO] 预算 1 通过 /budgets/1/limits 查询到 4 条记录
2025-06-26 17:41:50,638 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-23T00:00:00+08:00 - 2025-06-29T23:59:59+08:00
2025-06-26 17:41:50,638 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-16T00:00:00+08:00 - 2025-06-22T23:59:59+08:00
2025-06-26 17:41:50,639 [INFO] 预算 1 找到限制记录: 4000.0, 时间: 2025-06-09T00:00:00+08:00 - 2025-06-15T23:59:59+08:00
2025-06-26 17:41:50,640 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-02T00:00:00+08:00 - 2025-06-08T23:59:59+08:00
2025-06-26 17:41:50,641 [INFO] 192.168.1.68 - - [26/Jun/2025 17:41:50] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:53:06,759 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:53:06,759 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:53:11,711 [INFO] [Dify] 验证通过的请求: /budgets
2025-06-26 17:53:11,932 [ERROR] [Dify] 服务处理失败: 'list' object has no attribute 'get_json'
Traceback (most recent call last):
  File "D:\fleshrecord\app.py", line 425, in dify_webhook
    budget_data = budget_result.get_json()
                  ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get_json'
2025-06-26 17:53:11,934 [INFO] 192.168.1.68 - - [26/Jun/2025 17:53:11] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 17:54:54,668 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:54:54,668 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:54:58,099 [INFO] [Dify] 验证通过的请求: /budgets
2025-06-26 17:54:58,279 [INFO] 192.168.1.68 - - [26/Jun/2025 17:54:58] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:57:14,067 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 17:57:14,067 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'limit': 50}
2025-06-26 17:57:14,202 [INFO] 成功查询到 50 条交易记录
2025-06-26 17:57:14,203 [INFO] 192.168.1.68 - - [26/Jun/2025 17:57:14] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:57:57,367 [ERROR] [Dify] 请求解析失败: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.
2025-06-26 17:57:57,367 [INFO] 192.168.1.68 - - [26/Jun/2025 17:57:57] "[31m[1mPOST /dify_webhook HTTP/1.1[0m" 400 -
2025-06-26 17:58:09,939 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 17:58:09,942 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'limit': 50}
2025-06-26 17:58:10,045 [INFO] 成功查询到 50 条交易记录
2025-06-26 17:58:10,046 [INFO] 192.168.1.68 - - [26/Jun/2025 17:58:10] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 18:02:19,742 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 18:02:19,746 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 18:02:24,701 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 18:02:24,702 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'limit': 50}
2025-06-26 18:02:24,833 [INFO] 成功查询到 50 条交易记录，总共 71 条
2025-06-26 18:02:24,834 [INFO] 192.168.1.68 - - [26/Jun/2025 18:02:24] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 18:05:02,253 [INFO] [Dify] 验证通过的请求: /budgets
2025-06-26 18:05:02,432 [INFO] 192.168.1.68 - - [26/Jun/2025 18:05:02] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 18:08:51,178 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 18:08:51,178 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'start': '2025-06-01', 'end': '2025-06-26', 'limit': 50}
2025-06-26 18:08:51,262 [INFO] 成功查询到 50 条交易记录，总共 71 条
2025-06-26 18:08:51,263 [INFO] 192.168.1.68 - - [26/Jun/2025 18:08:51] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 18:40:32,733 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750934432,v1=04eeb467613017795d00dd0d3dbc74af1a6176bfa3770a9fdd072bda1747570d', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1708'}
2025-06-26 18:40:32,733 [INFO] Received raw data: {"uuid": "965233f9-1f64-49d5-bb7b-cbc7655fa05c", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 178, "created_at": "2025-06-26T18:40:32+08:00", "updated_at": "2025-06-26T18:40:32+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "178", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "3.50", "foreign_amount": null, "description": "买药", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "4", "category_name": "医药护理", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["药品"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "b02763b77b6c72c36295bffb834464fc86af16e7db0e0a3110e32591872f6071", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/178"}]}}
2025-06-26 18:40:32,923 [INFO] {'name': '周预算', 'total_budget': 10000.0, 'total_spent': 11932.23, 'remaining': 0.0}
2025-06-26 18:40:32,923 [INFO] 构造消息内容: 您新增了一笔交易：买药, 费用：3.50，分类：医药护理，预算：None。
交易处理完成，当前预算情况:
当月预算: 10000.0，支出：11932.23，剩余： 0.0 元
2025-06-26 18:40:33,142 [INFO] Webhook response: {"errcode":0,"errmsg":"ok"}
2025-06-26 18:40:33,143 [INFO] 192.168.1.195 - - [26/Jun/2025 18:40:33] "POST /webhook HTTP/1.1" 200 -
2025-06-26 19:15:30,904 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:15:30,905 [INFO] 查询交易记录，参数: {'start': '2025-06-19', 'end': '2025-06-26', 'type': 'withdrawal', 'limit': 50}
2025-06-26 19:15:30,978 [INFO] 成功查询到 28 条交易记录，总共 28 条
2025-06-26 19:15:30,979 [INFO] 192.168.1.68 - - [26/Jun/2025 19:15:30] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:21:21,021 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:21:21,021 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '餐饮', 'limit': 50}
2025-06-26 19:21:21,141 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:21:21,142 [INFO] 192.168.1.68 - - [26/Jun/2025 19:21:21] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:22:33,750 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:22:33,751 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '餐饮'}
2025-06-26 19:22:33,869 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:22:33,870 [INFO] 192.168.1.68 - - [26/Jun/2025 19:22:33] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:23:48,612 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:23:48,613 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '买药', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:23:48,718 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:23:48,719 [INFO] 192.168.1.68 - - [26/Jun/2025 19:23:48] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:28:18,994 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:28:18,995 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:28:19,134 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:28:19,135 [INFO] 192.168.1.68 - - [26/Jun/2025 19:28:19] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:29:25,767 [ERROR] [Dify] 请求解析失败: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.
2025-06-26 19:29:25,768 [INFO] 192.168.1.68 - - [26/Jun/2025 19:29:25] "[31m[1mPOST /dify_webhook HTTP/1.1[0m" 400 -
2025-06-26 19:29:32,405 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:29:32,405 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:29:32,501 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:29:32,502 [INFO] 192.168.1.68 - - [26/Jun/2025 19:29:32] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:29:52,045 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:29:52,045 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:29:52,160 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:29:52,161 [INFO] 192.168.1.68 - - [26/Jun/2025 19:29:52] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:32:53,877 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:32:53,878 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:32:56,898 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:32:56,899 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:32:56,899 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:32:56,900 [INFO] 请求参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:32:56,996 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&start=2025-06-01&end=2025-06-26
2025-06-26 19:32:57,002 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:32:57,002 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:32:57,002 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:32:57,003 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:32:57,003 [INFO] 返回交易的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:32:57,004 [INFO] 192.168.1.68 - - [26/Jun/2025 19:32:57] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:35:15,837 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:35:15,837 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:35:21,504 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:35:21,504 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:35:21,505 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:35:21,505 [INFO] 请求参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:35:21,597 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&start=2025-06-01&end=2025-06-26
2025-06-26 19:35:21,603 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:35:21,603 [INFO] 类目过滤后剩余 1 条交易记录（类目: 医药护理）
2025-06-26 19:35:21,603 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:35:21,604 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:35:21,604 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:35:21,604 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:35:21,605 [INFO] 192.168.1.68 - - [26/Jun/2025 19:35:21] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:37:31,451 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:37:31,451 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:37:37,070 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:37:37,071 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:37:42,893 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:37:42,893 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:37:42,894 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:37:42,894 [INFO] 请求参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:37:42,988 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&start=2025-06-01&end=2025-06-26
2025-06-26 19:37:42,994 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:37:42,994 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 19:37:42,994 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 19:37:42,995 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 19:37:42,995 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 19:37:42,995 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 19:37:42,996 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 19:37:42,996 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 19:37:42,996 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 19:37:42,996 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 19:37:42,997 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 19:37:42,997 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 19:37:42,997 [INFO] 类目过滤后剩余 1 条交易记录（类目: 医药护理）
2025-06-26 19:37:42,997 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:37:42,998 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:37:42,998 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:37:42,998 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:37:42,999 [INFO] 192.168.1.68 - - [26/Jun/2025 19:37:42] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:43:32,962 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:43:32,962 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:43:50,603 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:43:50,604 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 19:43:50,604 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:43:50,604 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 19:43:50,705 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7
2025-06-26 19:43:50,710 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:43:50,710 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 19:43:50,711 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 19:43:50,711 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 19:43:50,712 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 19:43:50,712 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 19:43:50,712 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 19:43:50,712 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 19:43:50,713 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 19:43:50,713 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 19:43:50,713 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 19:43:50,713 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 19:43:50,714 [INFO] 类目过滤后剩余 6 条交易记录（类目: 社交宴请）
2025-06-26 19:43:50,714 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:43:50,714 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:43:50,715 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:43:50,715 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:43:50,716 [INFO] 192.168.1.68 - - [26/Jun/2025 19:43:50] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:44:48,069 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:44:48,069 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 19:44:48,070 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:44:48,071 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 19:44:48,158 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7
2025-06-26 19:44:48,160 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:44:48,161 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 19:44:48,161 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 19:44:48,161 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 19:44:48,162 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 19:44:48,162 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 19:44:48,162 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 19:44:48,163 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 19:44:48,163 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 19:44:48,163 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 19:44:48,164 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 19:44:48,164 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 19:44:48,165 [INFO] 类目过滤后剩余 6 条交易记录（类目: 社交宴请）
2025-06-26 19:44:48,165 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:44:48,165 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:44:48,166 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:44:48,166 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:44:48,167 [INFO] 192.168.1.68 - - [26/Jun/2025 19:44:48] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:45:49,799 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750938349,v1=2b11854a2a22aa03872523afade208aa28557cbbed99f2da38ef71c5dcee79de', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1736'}
2025-06-26 19:45:49,800 [INFO] Received raw data: {"uuid": "aa353726-c439-4d93-9b76-c3254e6967fd", "user_id": 1, "trigger": "UPDATE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 144, "created_at": "2025-06-24T18:12:28+08:00", "updated_at": "2025-06-26T19:45:48+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "144", "type": "withdrawal", "date": "2025-06-16T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "1041.17", "foreign_amount": null, "description": "购买鱼翅佛跳墙3盒", "source_id": "71", "source_name": "京东白条", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "1", "budget_name": "周预算", "category_id": "1", "category_name": "生活饮食", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["礼品"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "a561fc15f1bfc7120215733b6deb856dab19851e7a3f147c9e9f993c124440bc", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/144"}]}}
2025-06-26 19:45:49,962 [INFO] {'name': '周预算', 'total_budget': 10000.0, 'total_spent': 11932.23, 'remaining': 0.0}
2025-06-26 19:45:49,962 [INFO] 构造消息内容: 您更新了一笔交易：购买鱼翅佛跳墙3盒, 费用：1041.17，分类：生活饮食，预算：周预算。
交易处理完成，当前预算情况:
当月预算: 10000.0，支出：11932.23，剩余： 0.0 元
2025-06-26 19:45:50,168 [INFO] Webhook response: {"errcode":0,"errmsg":"ok"}
2025-06-26 19:45:50,169 [INFO] 192.168.1.195 - - [26/Jun/2025 19:45:50] "POST /webhook HTTP/1.1" 200 -
2025-06-26 20:10:53,321 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:10:53,322 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:10:53,322 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:10:53,322 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:10:53,419 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7
2025-06-26 20:10:53,421 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 20:10:53,422 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 20:10:53,423 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:10:53,423 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:10:53,423 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:10:53,423 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:10:53,423 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:10:53,424 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:10:53,424 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:10:53,424 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:10:53,425 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:10:53,425 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:10:53,425 [INFO] 类目过滤后剩余 5 条交易记录（类目: 社交宴请）
2025-06-26 20:10:53,425 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:10:53,426 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:10:53,426 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:10:53,426 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 15, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 5, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:10:53,427 [INFO] 192.168.1.68 - - [26/Jun/2025 20:10:53] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:10:58,563 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:10:58,564 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:10:58,564 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:10:58,565 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:10:58,666 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7
2025-06-26 20:10:58,668 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 20:10:58,668 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 20:10:58,668 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:10:58,669 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:10:58,669 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:10:58,669 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:10:58,670 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:10:58,670 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:10:58,670 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:10:58,671 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:10:58,671 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:10:58,671 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:10:58,672 [INFO] 类目过滤后剩余 5 条交易记录（类目: 社交宴请）
2025-06-26 20:10:58,672 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:10:58,672 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:10:58,673 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:10:58,673 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 15, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 5, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:10:58,674 [INFO] 192.168.1.68 - - [26/Jun/2025 20:10:58] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:12:32,002 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:12:32,003 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:12:32,003 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:12:32,004 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:12:32,097 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BF%A1%E7%94%A8%E8%BF%98%E6%AC%BE
2025-06-26 20:12:32,098 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 20:12:32,098 [INFO] 开始类目过滤，目标类目: 信用还款
2025-06-26 20:12:32,098 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:12:32,099 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:12:32,099 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:12:32,099 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:12:32,099 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:12:32,100 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:12:32,100 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:12:32,101 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:12:32,101 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:12:32,101 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:12:32,102 [INFO] 类目过滤后剩余 2 条交易记录（类目: 信用还款）
2025-06-26 20:12:32,102 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:12:32,102 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:12:32,103 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:12:32,103 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 15, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 5, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:12:32,104 [INFO] 192.168.1.68 - - [26/Jun/2025 20:12:32] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:15:13,744 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 20:15:13,745 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 20:15:17,756 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:15:17,756 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:15:17,757 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:15:17,757 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款', 'page': 1, 'limit': 200}
2025-06-26 20:15:17,867 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BF%A1%E7%94%A8%E8%BF%98%E6%AC%BE&page=1&limit=200
2025-06-26 20:15:17,875 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:15:17,876 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:15:17,876 [INFO] 开始类目过滤，目标类目: 信用还款
2025-06-26 20:15:17,876 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:15:17,877 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:15:17,878 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:15:17,878 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:15:17,879 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:15:17,880 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:15:17,880 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:15:17,881 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:15:17,881 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:15:17,881 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:15:17,882 [INFO] 类目过滤后剩余 2 条交易记录（类目: 信用还款）
2025-06-26 20:15:17,882 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:15:17,882 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:15:17,882 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:15:17,883 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:15:17,884 [INFO] 192.168.1.68 - - [26/Jun/2025 20:15:17] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:15:20,920 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:15:20,920 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:15:20,921 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:15:20,921 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款', 'page': 1, 'limit': 200}
2025-06-26 20:15:21,011 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BF%A1%E7%94%A8%E8%BF%98%E6%AC%BE&page=1&limit=200
2025-06-26 20:15:21,012 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:15:21,013 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:15:21,013 [INFO] 开始类目过滤，目标类目: 信用还款
2025-06-26 20:15:21,013 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:15:21,013 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:15:21,014 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:15:21,014 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:15:21,014 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:15:21,014 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:15:21,015 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:15:21,015 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:15:21,015 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:15:21,015 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:15:21,016 [INFO] 类目过滤后剩余 2 条交易记录（类目: 信用还款）
2025-06-26 20:15:21,016 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:15:21,016 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:15:21,016 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:15:21,017 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:15:21,017 [INFO] 192.168.1.68 - - [26/Jun/2025 20:15:21] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:15:26,345 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:15:26,345 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:15:26,346 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:15:26,346 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请', 'page': 1, 'limit': 200}
2025-06-26 20:15:26,473 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7&page=1&limit=200
2025-06-26 20:15:26,475 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:15:26,475 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:15:26,475 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 20:15:26,476 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:15:26,476 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:15:26,476 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:15:26,476 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:15:26,476 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:15:26,477 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:15:26,477 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:15:26,477 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:15:26,478 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:15:26,478 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:15:26,478 [INFO] 类目过滤后剩余 8 条交易记录（类目: 社交宴请）
2025-06-26 20:15:26,478 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:15:26,479 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:15:26,479 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:15:26,480 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:15:26,480 [INFO] 192.168.1.68 - - [26/Jun/2025 20:15:26] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:15:41,483 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:15:41,484 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:15:41,484 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:15:41,484 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款', 'page': 1, 'limit': 200}
2025-06-26 20:15:41,578 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BF%A1%E7%94%A8%E8%BF%98%E6%AC%BE&page=1&limit=200
2025-06-26 20:15:41,579 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:15:41,580 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:15:41,580 [INFO] 开始类目过滤，目标类目: 信用还款
2025-06-26 20:15:41,580 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:15:41,581 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:15:41,581 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:15:41,581 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:15:41,582 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:15:41,582 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:15:41,582 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:15:41,583 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:15:41,583 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:15:41,583 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:15:41,584 [INFO] 类目过滤后剩余 2 条交易记录（类目: 信用还款）
2025-06-26 20:15:41,584 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:15:41,584 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:15:41,584 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:15:41,585 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:15:41,586 [INFO] 192.168.1.68 - - [26/Jun/2025 20:15:41] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:16:59,223 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:16:59,224 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 20:16:59,224 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:16:59,224 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 20:16:59,321 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 20:16:59,322 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:16:59,323 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:16:59,323 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 20:16:59,323 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:16:59,324 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:16:59,324 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:16:59,324 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:16:59,325 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:16:59,325 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:16:59,325 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:16:59,325 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:16:59,326 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:16:59,326 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:16:59,326 [INFO] 类目过滤后剩余 17 条交易记录（类目: 交通通讯）
2025-06-26 20:16:59,327 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:16:59,327 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:16:59,327 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:16:59,328 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:16:59,328 [INFO] 192.168.1.68 - - [26/Jun/2025 20:16:59] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:18:22,725 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:18:22,726 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 20:18:22,726 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:18:22,726 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 20:18:22,826 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 20:18:22,827 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:18:22,828 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:18:22,828 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 20:18:22,828 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:18:22,828 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:18:22,829 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:18:22,829 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:18:22,829 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:18:22,829 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:18:22,830 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:18:22,830 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:18:22,830 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:18:22,831 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:18:22,831 [INFO] 类目过滤后剩余 2 条交易记录（类目: 医药护理）
2025-06-26 20:18:22,831 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:18:22,832 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:18:22,832 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:18:22,832 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:18:22,833 [INFO] 192.168.1.68 - - [26/Jun/2025 20:18:22] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:18:36,801 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:18:36,801 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 20:18:36,802 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:18:36,802 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 20:18:36,913 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 20:18:36,914 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:18:36,914 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:18:36,915 [INFO] 开始类目过滤，目标类目: 家庭娱乐
2025-06-26 20:18:36,915 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:18:36,916 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:18:36,916 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:18:36,916 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:18:36,916 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:18:36,917 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:18:36,917 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:18:36,917 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:18:36,918 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:18:36,918 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:18:36,918 [INFO] 类目过滤后剩余 2 条交易记录（类目: 家庭娱乐）
2025-06-26 20:18:36,918 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:18:36,919 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:18:36,919 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:18:36,919 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:18:36,920 [INFO] 192.168.1.68 - - [26/Jun/2025 20:18:36] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:19:45,281 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:19:45,281 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:19:45,282 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:19:45,282 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请', 'page': 1, 'limit': 200}
2025-06-26 20:19:45,378 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7&page=1&limit=200
2025-06-26 20:19:45,381 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:19:45,381 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:19:45,382 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 20:19:45,382 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:19:45,382 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:19:45,383 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:19:45,383 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:19:45,383 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:19:45,383 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:19:45,384 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:19:45,384 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:19:45,384 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:19:45,385 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:19:45,385 [INFO] 类目过滤后剩余 8 条交易记录（类目: 社交宴请）
2025-06-26 20:19:45,385 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:19:45,386 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:19:45,386 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:19:45,386 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:19:45,387 [INFO] 192.168.1.68 - - [26/Jun/2025 20:19:45] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:23:52,287 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750940632,v1=df8617c13c12957e266f80fb07d58f969503e20a8cde2b9a3c47605bcc42fab2', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1730'}
2025-06-26 20:23:52,288 [INFO] Received raw data: {"uuid": "b85f071d-ef2c-4efb-beb0-907b0f4984da", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 179, "created_at": "2025-06-26T20:23:51+08:00", "updated_at": "2025-06-26T20:23:51+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "179", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "155.02", "foreign_amount": null, "description": "claude大模型使用费", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "3", "category_name": "生活爱好", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["AI"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "831e17bc4196ce4bbe49a8626713dcdc9ce562e0540ca74775489d81c1254801", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/179"}]}}
2025-06-26 20:23:52,491 [INFO] {'name': '周预算', 'total_budget': 10000.0, 'total_spent': 11932.23, 'remaining': 0.0}
2025-06-26 20:23:52,492 [INFO] 构造消息内容: 您新增了一笔交易：claude大模型使用费, 费用：155.02，分类：生活爱好，预算：None。
交易处理完成，当前预算情况:
当月预算: 10000.0，支出：11932.23，剩余： 0.0 元
2025-06-26 20:23:52,697 [INFO] Webhook response: {"errcode":0,"errmsg":"ok"}
2025-06-26 20:23:52,697 [INFO] 192.168.1.195 - - [26/Jun/2025 20:23:52] "POST /webhook HTTP/1.1" 200 -
2025-06-26 20:45:37,178 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 20:45:37,178 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 20:45:40,560 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:45:40,561 [INFO] 查询交易记录，参数: {'start': '2025-06-23', 'end': '2025-06-26', 'limit': 50}
2025-06-26 20:45:40,561 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:45:40,561 [INFO] 请求参数: {'start': '2025-06-23', 'end': '2025-06-26', 'limit': 200, 'page': 1}
2025-06-26 20:45:40,638 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-23&end=2025-06-26&limit=200&page=1
2025-06-26 20:45:40,646 [INFO] 获取第 1 页，本页 16 条记录，总计 16 条
2025-06-26 20:45:40,649 [INFO] 成功查询到 16 条交易记录，API总共 16 条
2025-06-26 20:45:40,649 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:45:40,649 [INFO] 第一条交易分录的类目: 生活爱好
2025-06-26 20:45:40,650 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:45:40,650 [INFO] API返回的类目分布: {'生活爱好': 1, '医药护理': 1, '交通通讯': 4, None: 2, '工资收入': 1, '购物支出': 3, '家庭娱乐': 1, '生活饮食': 2, '社交娱乐': 1}
2025-06-26 20:45:40,651 [INFO] 192.168.1.68 - - [26/Jun/2025 20:45:40] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 21:02:23,827 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:02:23,827 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:04:54,041 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:04:54,041 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:17:49,238 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:17:49,238 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:17:55,277 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 21:17:55,278 [INFO] 查询交易记录，参数: {'start': '2025-06-23', 'end': '2025-06-26', 'limit': 50}
2025-06-26 21:17:55,278 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 21:17:55,278 [INFO] 请求参数: {'start': '2025-06-23', 'end': '2025-06-26', 'limit': 200, 'page': 1}
2025-06-26 21:17:55,382 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-23&end=2025-06-26&limit=200&page=1
2025-06-26 21:17:55,387 [INFO] 获取第 1 页，本页 16 条记录，总计 16 条
2025-06-26 21:17:55,388 [INFO] 成功查询到 16 条交易记录，API总共 16 条
2025-06-26 21:17:55,388 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 21:17:55,388 [INFO] 第一条交易分录的类目: 生活爱好
2025-06-26 21:17:55,388 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 21:17:55,389 [INFO] API返回的类目分布: {'生活爱好': 1, '医药护理': 1, '交通通讯': 4, None: 2, '工资收入': 1, '购物支出': 3, '家庭娱乐': 1, '生活饮食': 2, '社交娱乐': 1}
2025-06-26 21:17:55,390 [INFO] 192.168.1.68 - - [26/Jun/2025 21:17:55] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 21:18:08,193 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 21:18:08,194 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 21:18:08,194 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 21:18:08,194 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 21:18:08,306 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 21:18:08,310 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 21:18:08,310 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 21:18:08,310 [INFO] 开始类目过滤，目标类目: 家庭娱乐
2025-06-26 21:18:08,311 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 21:18:08,311 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 21:18:08,311 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 21:18:08,312 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 21:18:08,312 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 21:18:08,312 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 21:18:08,313 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 21:18:08,313 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 21:18:08,313 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 21:18:08,314 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 21:18:08,314 [INFO] 类目过滤后剩余 2 条交易记录（类目: 家庭娱乐）
2025-06-26 21:18:08,314 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 21:18:08,315 [INFO] 第一条交易分录的类目: 生活爱好
2025-06-26 21:18:08,315 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 21:18:08,315 [INFO] API返回的类目分布: {'生活爱好': 10, '医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 21:18:08,316 [INFO] 192.168.1.68 - - [26/Jun/2025 21:18:08] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 21:21:30,475 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:21:30,477 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:21:33,632 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 21:21:33,633 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 21:21:33,633 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 21:21:33,633 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 21:21:33,731 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 21:21:33,737 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 21:21:33,737 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 21:21:33,737 [INFO] 开始类目过滤，目标类目: 家庭娱乐
2025-06-26 21:21:33,738 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 21:21:33,738 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 21:21:33,738 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 21:21:33,739 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 21:21:33,739 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 21:21:33,739 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 21:21:33,739 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 21:21:33,740 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 21:21:33,740 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 21:21:33,740 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 21:21:33,742 [INFO] 192.168.1.68 - - [26/Jun/2025 21:21:33] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 21:58:32,176 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:58:32,176 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:58:32,179 [INFO]  * Restarting with stat
2025-06-26 21:58:33,339 [WARNING]  * Debugger is active!
2025-06-26 21:58:33,345 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 21:58:36,382 [INFO]  * Detected change in 'D:\\fleshrecord\\conf\\config.py', reloading
2025-06-26 21:58:36,435 [INFO]  * Restarting with stat
2025-06-26 21:58:37,581 [WARNING]  * Debugger is active!
2025-06-26 21:58:37,587 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 21:58:54,098 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 21:58:54,098 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 21:58:54,099 [INFO] 请求 URL: http://192.168.1.195/api/v1/transactions
2025-06-26 21:58:54,099 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 21:58:54,195 [INFO] 实际发送的完整 URL: http://192.168.1.195/login
2025-06-26 21:58:54,273 [ERROR] 请求异常 - 查询交易失败: Expecting value: line 2 column 1 (char 1)
2025-06-26 21:58:54,274 [INFO] 192.168.1.68 - - [26/Jun/2025 21:58:54] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:00:00,905 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:00:00,914 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:00:00,917 [INFO]  * Restarting with stat
2025-06-26 22:00:02,185 [WARNING]  * Debugger is active!
2025-06-26 22:00:02,190 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:00:05,558 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 22:00:05,558 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 22:00:05,559 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:00:05,559 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 22:00:05,797 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:00:05,797 [ERROR] HTTP错误 - 查询交易失败: 401 Client Error: Unauthorized for url: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:00:05,798 [INFO] 192.168.1.68 - - [26/Jun/2025 22:00:05] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:00:52,663 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:00:52,664 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:00:52,666 [INFO]  * Restarting with stat
2025-06-26 22:00:53,891 [WARNING]  * Debugger is active!
2025-06-26 22:00:53,896 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:00:57,359 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 22:00:57,359 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 22:00:57,359 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:00:57,360 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 22:00:57,416 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:00:57,417 [ERROR] HTTP错误 - 查询交易失败: 401 Client Error: Unauthorized for url: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:00:57,418 [INFO] 192.168.1.68 - - [26/Jun/2025 22:00:57] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:04:23,989 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\firefly_service.py', reloading
2025-06-26 22:04:24,031 [INFO]  * Restarting with stat
2025-06-26 22:04:25,290 [WARNING]  * Debugger is active!
2025-06-26 22:04:25,296 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:04:26,318 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\firefly_service.py', reloading
2025-06-26 22:04:26,434 [INFO]  * Restarting with stat
2025-06-26 22:04:27,958 [WARNING]  * Debugger is active!
2025-06-26 22:04:27,963 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:06:49,473 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:06:49,474 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:06:49,476 [INFO]  * Restarting with stat
2025-06-26 22:06:50,568 [WARNING]  * Debugger is active!
2025-06-26 22:06:50,573 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:06:53,817 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 22:06:53,818 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 22:06:53,818 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:06:53,818 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 22:06:53,935 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:06:53,940 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:06:53,941 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:06:53,941 [INFO] 开始类目过滤，目标类目: 家庭娱乐
2025-06-26 22:06:53,941 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:06:53,942 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:06:53,942 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:06:53,942 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:06:53,943 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:06:53,943 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:06:53,943 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:06:53,944 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:06:53,944 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:06:53,944 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:06:53,945 [INFO] 192.168.1.68 - - [26/Jun/2025 22:06:53] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:07:06,033 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 22:07:06,034 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:07:06,034 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:07:06,035 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 22:07:06,140 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 22:07:06,142 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:07:06,142 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:07:06,143 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 22:07:06,144 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:07:06,144 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:07:06,144 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:07:06,145 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:07:06,145 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:07:06,145 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:07:06,145 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:07:06,146 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:07:06,146 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:07:06,147 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:07:06,148 [INFO] 192.168.1.68 - - [26/Jun/2025 22:07:06] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:08:43,154 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 22:08:43,197 [INFO]  * Restarting with stat
2025-06-26 22:08:44,362 [WARNING]  * Debugger is active!
2025-06-26 22:08:44,367 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:40:47,435 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:40:47,436 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:40:47,438 [INFO]  * Restarting with stat
2025-06-26 22:40:48,534 [WARNING]  * Debugger is active!
2025-06-26 22:40:48,539 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:40:54,610 [INFO] 192.168.1.68 - - [26/Jun/2025 22:40:54] "[33mPOST /dify_webhook HTTP/1.1[0m" 404 -
2025-06-26 22:41:11,248 [INFO] 192.168.1.68 - - [26/Jun/2025 22:41:11] "[33mPOST /dify_webhook HTTP/1.1[0m" 404 -
2025-06-26 22:42:04,665 [INFO] 192.168.1.68 - - [26/Jun/2025 22:42:04] "[33mGET /dify_webhook HTTP/1.1[0m" 404 -
2025-06-26 22:42:58,174 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:42:58,174 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:42:58,176 [INFO]  * Restarting with stat
2025-06-26 22:42:59,342 [WARNING]  * Debugger is active!
2025-06-26 22:42:59,348 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:43:01,858 [ERROR] dify_webhook 执行失败: 'DifyHandler' object has no attribute 'handle_dify_request'
2025-06-26 22:43:01,866 [INFO] 192.168.1.68 - - [26/Jun/2025 22:43:01] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:44:02,688 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 22:44:02,727 [INFO]  * Restarting with stat
2025-06-26 22:44:03,939 [WARNING]  * Debugger is active!
2025-06-26 22:44:03,945 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:44:04,968 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 22:44:05,005 [INFO]  * Restarting with stat
2025-06-26 22:44:06,208 [WARNING]  * Debugger is active!
2025-06-26 22:44:06,213 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:44:25,536 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:44:25,537 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:44:25,539 [INFO]  * Restarting with stat
2025-06-26 22:44:26,922 [WARNING]  * Debugger is active!
2025-06-26 22:44:26,927 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:44:28,534 [ERROR] 处理Dify webhook请求时发生错误: 'DifyWebhookRequest' object has no attribute 'query'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 40, in handle_dify_webhook
    f"query={webhook_data.query[:50]}..." if len(webhook_data.query) > 50
                                                 ^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DifyWebhookRequest' object has no attribute 'query'
2025-06-26 22:44:28,536 [INFO] dify_webhook 执行时间: 0.0023秒
2025-06-26 22:44:28,537 [INFO] 192.168.1.68 - - [26/Jun/2025 22:44:28] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:45:06,137 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:45:06,183 [INFO]  * Restarting with stat
2025-06-26 22:45:07,396 [WARNING]  * Debugger is active!
2025-06-26 22:45:07,402 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:45:35,127 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:45:35,128 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:45:35,130 [INFO]  * Restarting with stat
2025-06-26 22:45:36,537 [WARNING]  * Debugger is active!
2025-06-26 22:45:36,543 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:45:40,178 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:45:40,179 [ERROR] 处理Dify webhook请求时发生错误: 'DifyWebhookRequest' object has no attribute 'query'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 44, in handle_dify_webhook
    return self._route_request(webhook_data)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\dify_handler.py", line 100, in _route_request
    return self._handle_transactions_request(webhook_data.query)
                                             ^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DifyWebhookRequest' object has no attribute 'query'
2025-06-26 22:45:40,181 [INFO] dify_webhook 执行时间: 0.0027秒
2025-06-26 22:45:40,181 [INFO] 192.168.1.68 - - [26/Jun/2025 22:45:40] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:46:04,596 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:46:04,597 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:46:04,598 [INFO]  * Restarting with stat
2025-06-26 22:46:05,730 [WARNING]  * Debugger is active!
2025-06-26 22:46:05,736 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:46:08,514 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:46:08,514 [ERROR] 处理Dify webhook请求时发生错误: 'DifyWebhookRequest' object has no attribute 'query'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 44, in handle_dify_webhook
    return self._route_request(webhook_data)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\dify_handler.py", line 100, in _route_request
    return self._handle_transactions_request(webhook_data.query)
                                             ^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DifyWebhookRequest' object has no attribute 'query'
2025-06-26 22:46:08,516 [INFO] dify_webhook 执行时间: 0.0027秒
2025-06-26 22:46:08,517 [INFO] 192.168.1.68 - - [26/Jun/2025 22:46:08] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:46:42,931 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:46:42,972 [INFO]  * Restarting with stat
2025-06-26 22:46:44,221 [WARNING]  * Debugger is active!
2025-06-26 22:46:44,227 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:46:45,248 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:46:45,342 [INFO]  * Restarting with stat
2025-06-26 22:46:46,646 [WARNING]  * Debugger is active!
2025-06-26 22:46:46,652 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:47:00,674 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:47:00,674 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:47:00,676 [INFO]  * Restarting with stat
2025-06-26 22:47:01,814 [WARNING]  * Debugger is active!
2025-06-26 22:47:01,820 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:47:03,830 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:47:03,830 [ERROR] 查询交易记录失败: 'dict' object has no attribute 'strip'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 118, in _handle_transactions_request
    query_params = self._parse_query_string(query)
  File "D:\fleshrecord\handlers\dify_handler.py", line 204, in _parse_query_string
    if query.strip().startswith('{'):
       ^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'strip'
2025-06-26 22:47:03,832 [INFO] dify_webhook 执行时间: 0.0023秒
2025-06-26 22:47:03,833 [INFO] 192.168.1.68 - - [26/Jun/2025 22:47:03] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:48:31,103 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:48:31,104 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:48:31,108 [INFO]  * Restarting with stat
2025-06-26 22:48:32,332 [WARNING]  * Debugger is active!
2025-06-26 22:48:32,337 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:48:35,586 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:48:35,586 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:48:35,587 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:48:35,587 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 22:48:35,691 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 22:48:35,697 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:48:35,697 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:48:35,697 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 22:48:35,698 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:48:35,698 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:48:35,700 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:48:35,704 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:48:35,704 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:48:35,704 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:48:35,705 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:48:35,705 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:48:35,707 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:48:35,708 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:48:35,709 [INFO] 成功获取 6 条交易记录
2025-06-26 22:48:35,718 [ERROR] 查询交易记录失败: slice(None, 10, None)
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 229, in _format_transactions_response
    "data": transactions[:10],  # 限制返回前10条记录
            ~~~~~~~~~~~~^^^^^
KeyError: slice(None, 10, None)
2025-06-26 22:48:35,721 [INFO] dify_webhook 执行时间: 0.1353秒
2025-06-26 22:48:35,722 [INFO] 192.168.1.68 - - [26/Jun/2025 22:48:35] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:48:38,135 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:48:38,135 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:48:38,136 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:48:38,136 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 22:48:38,253 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 22:48:38,254 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:48:38,255 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:48:38,255 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 22:48:38,256 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:48:38,256 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:48:38,256 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:48:38,257 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:48:38,257 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:48:38,258 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:48:38,258 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:48:38,258 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:48:38,259 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:48:38,259 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:48:38,259 [INFO] 成功获取 6 条交易记录
2025-06-26 22:48:38,260 [ERROR] 查询交易记录失败: slice(None, 10, None)
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 229, in _format_transactions_response
    "data": transactions[:10],  # 限制返回前10条记录
            ~~~~~~~~~~~~^^^^^
KeyError: slice(None, 10, None)
2025-06-26 22:48:38,261 [INFO] dify_webhook 执行时间: 0.1259秒
2025-06-26 22:48:38,261 [INFO] 192.168.1.68 - - [26/Jun/2025 22:48:38] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:50:31,806 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:50:31,807 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:50:31,808 [INFO]  * Restarting with stat
2025-06-26 22:50:32,929 [WARNING]  * Debugger is active!
2025-06-26 22:50:32,935 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:50:35,102 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:50:35,104 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:50:35,104 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:50:35,104 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 22:50:35,223 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 22:50:35,231 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:50:35,231 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:50:35,231 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 22:50:35,232 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:50:35,232 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:50:35,232 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:50:35,232 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:50:35,233 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:50:35,233 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:50:35,233 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:50:35,234 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:50:35,234 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:50:35,235 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:50:35,235 [INFO] 成功获取 6 条交易记录
2025-06-26 22:50:35,236 [INFO] dify_webhook 执行时间: 0.1341秒
2025-06-26 22:50:35,237 [INFO] 192.168.1.68 - - [26/Jun/2025 22:50:35] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:53:55,224 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:53:55,225 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:53:55,225 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:53:55,225 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:53:55,324 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:53:55,326 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:53:55,326 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:53:55,327 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:53:55,327 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:53:55,327 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:53:55,328 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:53:55,328 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:53:55,329 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:53:55,329 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:53:55,329 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:53:55,330 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:53:55,330 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:53:55,330 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:53:55,331 [INFO] 成功获取 6 条交易记录
2025-06-26 22:53:55,331 [INFO] dify_webhook 执行时间: 0.1073秒
2025-06-26 22:53:55,332 [INFO] 192.168.1.68 - - [26/Jun/2025 22:53:55] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:54:51,848 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:54:51,848 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:54:51,849 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:54:51,849 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:54:51,909 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:54:51,912 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 22:54:51,912 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 22:54:51,912 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:54:51,913 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:54:51,913 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:54:51,913 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:54:51,914 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:54:51,914 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:54:51,914 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:54:51,915 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:54:51,915 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:54:51,915 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:54:51,915 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:54:51,916 [INFO] 成功获取 6 条交易记录
2025-06-26 22:54:51,916 [INFO] dify_webhook 执行时间: 0.0683秒
2025-06-26 22:54:51,917 [INFO] 192.168.1.68 - - [26/Jun/2025 22:54:51] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:55:58,673 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:55:58,674 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:55:58,675 [INFO]  * Restarting with stat
2025-06-26 22:55:59,946 [WARNING]  * Debugger is active!
2025-06-26 22:55:59,952 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:56:02,570 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:56:02,570 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:56:02,571 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:56:02,571 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:56:02,666 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:56:02,673 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 22:56:02,673 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 22:56:02,674 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:56:02,674 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:56:02,675 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:56:02,675 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:56:02,675 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:56:02,676 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:56:02,676 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:56:02,676 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:56:02,677 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:56:02,677 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:56:02,677 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:56:02,678 [INFO] 成功获取 6 条交易记录
2025-06-26 22:56:02,678 [ERROR] 查询交易记录失败: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 229, in _format_transactions_response
    for item in transactions.get('data', {}).get('data', []):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
2025-06-26 22:56:02,680 [INFO] dify_webhook 执行时间: 0.1102秒
2025-06-26 22:56:02,680 [INFO] 192.168.1.68 - - [26/Jun/2025 22:56:02] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:57:14,193 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:57:14,194 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:57:14,195 [INFO]  * Restarting with stat
2025-06-26 22:57:15,387 [WARNING]  * Debugger is active!
2025-06-26 22:57:15,392 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:57:16,364 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:57:16,364 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:57:16,365 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:57:16,365 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:57:16,449 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:57:16,454 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 22:57:16,455 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 22:57:16,455 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:57:16,455 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:57:16,456 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:57:16,456 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:57:16,456 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:57:16,457 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:57:16,457 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:57:16,457 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:57:16,458 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:57:16,458 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:57:16,459 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:57:16,459 [INFO] 成功获取 6 条交易记录
2025-06-26 22:57:16,460 [ERROR] 查询交易记录失败: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 224, in _format_transactions_response
    for item in transactions.get('data', {}).get('data', []):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
2025-06-26 22:57:16,462 [INFO] dify_webhook 执行时间: 0.0981秒
2025-06-26 22:57:16,462 [INFO] 192.168.1.68 - - [26/Jun/2025 22:57:16] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:59:06,984 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:59:07,020 [INFO]  * Restarting with stat
2025-06-26 22:59:08,165 [WARNING]  * Debugger is active!
2025-06-26 22:59:08,170 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:59:12,207 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:59:12,247 [INFO]  * Restarting with stat
2025-06-26 22:59:13,423 [WARNING]  * Debugger is active!
2025-06-26 22:59:13,428 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:59:20,695 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:59:20,696 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:59:20,696 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:59:20,696 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:59:20,784 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:59:20,791 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 22:59:20,792 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 22:59:20,792 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:59:20,793 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:59:20,793 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:59:20,794 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:59:20,795 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:59:20,799 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:59:20,800 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:59:20,800 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:59:20,801 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:59:20,802 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:59:20,803 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:59:20,803 [INFO] 成功获取 6 条交易记录
2025-06-26 22:59:20,803 [ERROR] 查询交易记录失败: name 'datetime' is not defined
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 262, in _format_transactions_response
    'timestamp': datetime.now().isoformat()
                 ^^^^^^^^
NameError: name 'datetime' is not defined. Did you forget to import 'datetime'?
2025-06-26 22:59:20,805 [INFO] dify_webhook 执行时间: 0.1105秒
2025-06-26 22:59:20,809 [INFO] 192.168.1.68 - - [26/Jun/2025 22:59:20] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 23:00:09,974 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:00:09,975 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:00:09,976 [INFO]  * Restarting with stat
2025-06-26 23:00:11,249 [WARNING]  * Debugger is active!
2025-06-26 23:00:11,257 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:00:12,703 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 23:00:12,703 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 23:00:12,704 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 23:00:12,704 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 23:00:12,785 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 23:00:12,791 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 23:00:12,791 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 23:00:12,791 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 23:00:12,792 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 23:00:12,792 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 23:00:12,793 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 23:00:12,793 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 23:00:12,793 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 23:00:12,794 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 23:00:12,794 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 23:00:12,794 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 23:00:12,795 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 23:00:12,795 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 23:00:12,795 [INFO] 成功获取 6 条交易记录
2025-06-26 23:00:12,796 [INFO] dify_webhook 执行时间: 0.0929秒
2025-06-26 23:00:12,797 [INFO] 192.168.1.68 - - [26/Jun/2025 23:00:12] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 23:00:19,327 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-1', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 23:00:19,328 [INFO] 查询交易记录，参数: {'start': '2025-06-1', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 23:00:19,328 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 23:00:19,328 [INFO] 请求参数: {'start': '2025-06-1', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 23:00:19,421 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-1&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 23:00:19,425 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 23:00:19,426 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 23:00:19,427 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 23:00:19,428 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 23:00:19,429 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 23:00:19,431 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 23:00:19,432 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 23:00:19,434 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 23:00:19,435 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 23:00:19,435 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 23:00:19,444 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 23:00:19,449 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 23:00:19,451 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 23:00:19,453 [INFO] 成功获取 6 条交易记录
2025-06-26 23:00:19,454 [INFO] dify_webhook 执行时间: 0.1264秒
2025-06-26 23:00:19,454 [INFO] 192.168.1.68 - - [26/Jun/2025 23:00:19] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 23:01:01,722 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 23:01:01,919 [INFO] 成功获取 1 个预算
2025-06-26 23:01:01,919 [INFO] dify_webhook 执行时间: 0.1969秒
2025-06-26 23:01:01,920 [INFO] 192.168.1.68 - - [26/Jun/2025 23:01:01] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 23:02:30,217 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 23:02:30,432 [INFO] 成功获取 1 个预算
2025-06-26 23:02:30,432 [INFO] dify_webhook 执行时间: 0.2155秒
2025-06-26 23:02:30,433 [INFO] 192.168.1.68 - - [26/Jun/2025 23:02:30] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 23:03:44,359 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:03:44,368 [INFO] 192.168.1.68 - - [26/Jun/2025 23:03:44] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:03:44,602 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:03:44,609 [INFO] 192.168.1.68 - - [26/Jun/2025 23:03:44] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:03:44,815 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:03:44,825 [INFO] 192.168.1.68 - - [26/Jun/2025 23:03:44] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:03:44,960 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:03:44,970 [INFO] 192.168.1.195 - - [26/Jun/2025 23:03:44] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:03:45,104 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:03:45,113 [INFO] 192.168.1.68 - - [26/Jun/2025 23:03:45] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,106 [ERROR] add_transaction 执行失败: 'TransactionHandler' object has no attribute 'handle_add_transaction'
2025-06-26 23:05:13,113 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,269 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:05:13,277 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,463 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:05:13,471 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,712 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:05:13,721 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,956 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:05:13,968 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:06:11,848 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:06:11,856 [INFO] 192.168.1.195 - - [26/Jun/2025 23:06:11] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:06:34,174 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 23:06:34,222 [INFO]  * Restarting with stat
2025-06-26 23:06:35,578 [WARNING]  * Debugger is active!
2025-06-26 23:06:35,585 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:06:57,120 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:06:57,121 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:06:57,122 [INFO]  * Restarting with stat
2025-06-26 23:06:58,255 [WARNING]  * Debugger is active!
2025-06-26 23:06:58,260 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:07:15,742 [ERROR] 获取预算信息时发生错误: 'BudgetQueryParams' object has no attribute 'budget_id'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 55, in get_budgets_endpoint
    if query_params.budget_id:
       ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'BudgetQueryParams' object has no attribute 'budget_id'
2025-06-26 23:07:15,744 [INFO] budgets 执行时间: 0.0024秒
2025-06-26 23:07:15,745 [INFO] 192.168.1.68 - - [26/Jun/2025 23:07:15] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-26 23:08:52,397 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:08:52,398 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:08:52,402 [INFO]  * Restarting with stat
2025-06-26 23:08:53,552 [WARNING]  * Debugger is active!
2025-06-26 23:08:53,558 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:08:55,989 [INFO] 成功获取 1 个预算
2025-06-26 23:08:55,989 [INFO] budgets 执行时间: 0.1758秒
2025-06-26 23:08:55,990 [INFO] 192.168.1.68 - - [26/Jun/2025 23:08:55] "GET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1" 200 -
2025-06-26 23:09:16,886 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:09:16,889 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:09:16,896 [INFO]  * Restarting with stat
2025-06-26 23:09:18,051 [WARNING]  * Debugger is active!
2025-06-26 23:09:18,056 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:09:36,227 [ERROR] add_transaction 执行失败: 'TransactionHandler' object has no attribute 'handle_add_transaction'
2025-06-26 23:09:36,235 [INFO] 192.168.1.68 - - [26/Jun/2025 23:09:36] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:10:10,332 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 23:10:10,371 [INFO]  * Restarting with stat
2025-06-26 23:10:11,606 [WARNING]  * Debugger is active!
2025-06-26 23:10:11,612 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:10:32,128 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:10:32,128 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:10:32,130 [INFO]  * Restarting with stat
2025-06-26 23:10:33,967 [WARNING]  * Debugger is active!
2025-06-26 23:10:33,972 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:10:35,408 [INFO] 开始处理交易请求 [ID: e0b5adb7]
2025-06-26 23:10:35,409 [WARNING] [e0b5adb7] 交易数据验证失败: 5 validation errors for TransactionRequest
amount
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
description
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
date
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
source_account
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
destination_account
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-26 23:10:35,410 [INFO] add_transaction 执行时间: 0.0018秒
2025-06-26 23:10:35,411 [INFO] 192.168.1.68 - - [26/Jun/2025 23:10:35] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-26 23:12:06,294 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:12:06,296 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:12:06,298 [INFO]  * Restarting with stat
2025-06-26 23:12:07,600 [WARNING]  * Debugger is active!
2025-06-26 23:12:07,605 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:12:09,477 [INFO] 开始处理交易请求 [ID: 75451bd8]
2025-06-26 23:12:09,479 [WARNING] [75451bd8] 交易数据验证失败: 2 validation errors for TransactionRequest
source_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...ination_name': '餐饮'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
destination_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...ination_name': '餐饮'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-26 23:12:09,480 [INFO] add_transaction 执行时间: 0.0035秒
2025-06-26 23:12:09,481 [INFO] 192.168.1.68 - - [26/Jun/2025 23:12:09] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-26 23:13:42,970 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:13:42,971 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:13:42,972 [INFO]  * Restarting with stat
2025-06-26 23:13:44,210 [WARNING]  * Debugger is active!
2025-06-26 23:13:44,215 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:13:45,225 [INFO] 开始处理交易请求 [ID: 37096534]
2025-06-26 23:13:45,229 [ERROR] [37096534] 处理交易请求时发生错误: 'TransactionRequest' object has no attribute 'type'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\transaction_handler.py", line 42, in add_transaction_endpoint
    self._log_transaction_info(transaction_data, transaction_id)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\transaction_handler.py", line 142, in _log_transaction_info
    'transaction_type': transaction_data.type,
                        ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'TransactionRequest' object has no attribute 'type'
2025-06-26 23:13:45,231 [INFO] add_transaction 执行时间: 0.0057秒
2025-06-26 23:13:45,232 [INFO] 192.168.1.68 - - [26/Jun/2025 23:13:45] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:14:55,583 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-26 23:14:55,625 [INFO]  * Restarting with stat
2025-06-26 23:14:56,766 [WARNING]  * Debugger is active!
2025-06-26 23:14:56,771 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:14:57,792 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-26 23:14:57,893 [INFO]  * Restarting with stat
2025-06-26 23:14:59,508 [WARNING]  * Debugger is active!
2025-06-26 23:14:59,522 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:15:23,561 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:15:23,561 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:15:23,563 [INFO]  * Restarting with stat
2025-06-26 23:15:24,777 [WARNING]  * Debugger is active!
2025-06-26 23:15:24,783 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:15:26,843 [INFO] 开始处理交易请求 [ID: 3fcab472]
2025-06-26 23:15:26,846 [ERROR] [3fcab472] 处理交易请求时发生错误: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\transaction_handler.py", line 42, in add_transaction_endpoint
    self._log_transaction_info(transaction_data, transaction_id)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\transaction_handler.py", line 144, in _log_transaction_info
    'category': getattr(transaction_data, 'category', 'N/A')[:30],
                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
TypeError: 'NoneType' object is not subscriptable
2025-06-26 23:15:26,848 [INFO] add_transaction 执行时间: 0.0045秒
2025-06-26 23:15:26,849 [INFO] 192.168.1.68 - - [26/Jun/2025 23:15:26] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:16:19,264 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:16:19,267 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:16:19,273 [INFO]  * Restarting with stat
2025-06-26 23:16:20,402 [WARNING]  * Debugger is active!
2025-06-26 23:16:20,407 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:16:23,355 [INFO] 开始处理交易请求 [ID: ca78b81c]
2025-06-26 23:16:23,358 [INFO] [ca78b81c] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:16:23,358 [ERROR] [ca78b81c] 处理交易请求时发生错误: 'FireflyService' object has no attribute 'create_transaction'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\transaction_handler.py", line 45, in add_transaction_endpoint
    result = self.firefly_service.create_transaction(transaction_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'FireflyService' object has no attribute 'create_transaction'. Did you mean: 'add_transaction'?
2025-06-26 23:16:23,359 [INFO] add_transaction 执行时间: 0.0046秒
2025-06-26 23:16:23,360 [INFO] 192.168.1.68 - - [26/Jun/2025 23:16:23] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:17:29,908 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:17:29,909 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:17:29,910 [INFO]  * Restarting with stat
2025-06-26 23:17:31,142 [WARNING]  * Debugger is active!
2025-06-26 23:17:31,147 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:17:32,231 [INFO] 开始处理交易请求 [ID: 682bd4ba]
2025-06-26 23:17:32,234 [INFO] [682bd4ba] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:17:32,235 [ERROR] 未知错误 - 添加交易失败: 'TransactionRequest' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\fleshrecord\services\firefly_service.py", line 109, in add_transaction
    self.logger.info(f"添加交易记录: {transaction_data.get('description', 'N/A')}")
                                      ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'TransactionRequest' object has no attribute 'get'
2025-06-26 23:17:32,237 [INFO] [682bd4ba] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:17:32,237 [INFO] add_transaction 执行时间: 0.0063秒
2025-06-26 23:17:32,238 [INFO] 192.168.1.68 - - [26/Jun/2025 23:17:32] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:18:52,614 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:18:52,614 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:18:52,616 [INFO]  * Restarting with stat
2025-06-26 23:18:53,960 [WARNING]  * Debugger is active!
2025-06-26 23:18:53,967 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:18:55,771 [INFO] 开始处理交易请求 [ID: 0c94f4be]
2025-06-26 23:18:55,773 [INFO] [0c94f4be] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:18:55,774 [INFO] 添加交易记录: 午饭
2025-06-26 23:18:55,854 [ERROR] HTTP错误 - 添加交易失败: 422 Client Error: Unprocessable Content for url: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 23:18:55,856 [INFO] [0c94f4be] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:18:55,857 [INFO] add_transaction 执行时间: 0.0861秒
2025-06-26 23:18:55,858 [INFO] 192.168.1.68 - - [26/Jun/2025 23:18:55] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:23:35,658 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:23:35,659 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:23:35,661 [INFO]  * Restarting with stat
2025-06-26 23:23:36,876 [WARNING]  * Debugger is active!
2025-06-26 23:23:36,883 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:23:38,155 [INFO] 开始处理交易请求 [ID: c50b2170]
2025-06-26 23:23:38,158 [INFO] [c50b2170] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:23:38,158 [INFO] 添加交易记录: 午饭
2025-06-26 23:23:38,158 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:23:38,419 [INFO] 交易添加成功: 181
2025-06-26 23:23:38,420 [INFO] [c50b2170] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:23:38,420 [INFO] add_transaction 执行时间: 0.2653秒
2025-06-26 23:23:38,421 [INFO] 192.168.1.68 - - [26/Jun/2025 23:23:38] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:23:38,432 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:23:38,494 [INFO] 192.168.1.195 - - [26/Jun/2025 23:23:38] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:23:38,524 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:23:38,544 [INFO] 192.168.1.195 - - [26/Jun/2025 23:23:38] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:24:11,191 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:24:11,199 [INFO] 192.168.1.195 - - [26/Jun/2025 23:24:11] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:24:11,226 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:24:11,239 [INFO] 192.168.1.195 - - [26/Jun/2025 23:24:11] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:27:03,521 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:27:03,522 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:27:03,523 [INFO]  * Restarting with stat
2025-06-26 23:27:04,689 [WARNING]  * Debugger is active!
2025-06-26 23:27:04,694 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:27:08,220 [ERROR] 签名验证过程中发生错误: 'NotificationHandler' object has no attribute 'WEBHOOK_SECRET'
2025-06-26 23:27:08,220 [ERROR] Webhook签名验证失败
2025-06-26 23:27:08,220 [ERROR] Webhook处理过程中发生未知错误: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:08,221 [ERROR] webhook 执行失败: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:08,238 [INFO] 192.168.1.195 - - [26/Jun/2025 23:27:08] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:27:08,345 [ERROR] 签名验证过程中发生错误: 'NotificationHandler' object has no attribute 'WEBHOOK_SECRET'
2025-06-26 23:27:08,345 [ERROR] Webhook签名验证失败
2025-06-26 23:27:08,345 [ERROR] Webhook处理过程中发生未知错误: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:08,346 [ERROR] webhook 执行失败: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:08,359 [INFO] 192.168.1.195 - - [26/Jun/2025 23:27:08] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:27:17,851 [INFO] 开始处理交易请求 [ID: b244a744]
2025-06-26 23:27:17,854 [INFO] [b244a744] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:27:17,855 [INFO] 添加交易记录: 午饭
2025-06-26 23:27:17,855 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:27:18,180 [INFO] 交易添加成功: 184
2025-06-26 23:27:18,181 [INFO] [b244a744] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:27:18,181 [INFO] add_transaction 执行时间: 0.3306秒
2025-06-26 23:27:18,182 [INFO] 192.168.1.68 - - [26/Jun/2025 23:27:18] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:27:18,193 [ERROR] 签名验证过程中发生错误: 'NotificationHandler' object has no attribute 'WEBHOOK_SECRET'
2025-06-26 23:27:18,193 [ERROR] Webhook签名验证失败
2025-06-26 23:27:18,193 [ERROR] Webhook处理过程中发生未知错误: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:18,194 [ERROR] webhook 执行失败: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:18,232 [INFO] 192.168.1.195 - - [26/Jun/2025 23:27:18] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:27:18,251 [ERROR] 签名验证过程中发生错误: 'NotificationHandler' object has no attribute 'WEBHOOK_SECRET'
2025-06-26 23:27:18,252 [ERROR] Webhook签名验证失败
2025-06-26 23:27:18,252 [ERROR] Webhook处理过程中发生未知错误: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:18,252 [ERROR] webhook 执行失败: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:18,283 [INFO] 192.168.1.195 - - [26/Jun/2025 23:27:18] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:32:01,658 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:32:01,659 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:32:01,661 [INFO]  * Restarting with stat
2025-06-26 23:32:02,841 [WARNING]  * Debugger is active!
2025-06-26 23:32:02,846 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:32:04,621 [INFO] 开始处理交易请求 [ID: f65beffa]
2025-06-26 23:32:04,625 [INFO] [f65beffa] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:32:04,625 [INFO] 添加交易记录: 午饭
2025-06-26 23:32:04,625 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:32:04,878 [INFO] 交易添加成功: 185
2025-06-26 23:32:04,879 [INFO] [f65beffa] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:32:04,879 [INFO] add_transaction 执行时间: 0.2581秒
2025-06-26 23:32:04,880 [INFO] 192.168.1.68 - - [26/Jun/2025 23:32:04] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:32:04,889 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:32:04,890 [ERROR] webhook 执行失败: APIResponseBuilder.error_response() got an unexpected keyword argument 'status_code'
2025-06-26 23:32:04,929 [INFO] 192.168.1.195 - - [26/Jun/2025 23:32:04] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:32:04,952 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:32:04,955 [ERROR] webhook 执行失败: APIResponseBuilder.error_response() got an unexpected keyword argument 'status_code'
2025-06-26 23:32:04,999 [INFO] 192.168.1.195 - - [26/Jun/2025 23:32:04] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:33:44,158 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:33:44,158 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:33:44,160 [INFO]  * Restarting with stat
2025-06-26 23:33:45,406 [WARNING]  * Debugger is active!
2025-06-26 23:33:45,412 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:33:46,198 [INFO] 开始处理交易请求 [ID: b9e0d6ba]
2025-06-26 23:33:46,201 [INFO] [b9e0d6ba] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:33:46,201 [INFO] 添加交易记录: 午饭
2025-06-26 23:33:46,201 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:33:46,586 [INFO] 交易添加成功: 186
2025-06-26 23:33:46,587 [INFO] [b9e0d6ba] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:33:46,587 [INFO] add_transaction 执行时间: 0.3896秒
2025-06-26 23:33:46,588 [INFO] 192.168.1.68 - - [26/Jun/2025 23:33:46] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:33:46,600 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:46,601 [INFO] webhook 执行时间: 0.0006秒
2025-06-26 23:33:46,601 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:46] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:33:46,620 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:46,620 [INFO] webhook 执行时间: 0.0012秒
2025-06-26 23:33:46,621 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:46] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:33:50,344 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:50,345 [INFO] webhook 执行时间: 0.0480秒
2025-06-26 23:33:50,345 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:50] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:33:50,363 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:50,363 [INFO] webhook 执行时间: 0.0006秒
2025-06-26 23:33:50,364 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:50] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:33:50,381 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:50,382 [INFO] webhook 执行时间: 0.0005秒
2025-06-26 23:33:50,382 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:50] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:41:33,714 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:41:33,715 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:41:33,717 [INFO]  * Restarting with stat
2025-06-26 23:41:35,023 [WARNING]  * Debugger is active!
2025-06-26 23:41:35,028 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:41:36,226 [INFO] 开始处理交易请求 [ID: 5e3e157c]
2025-06-26 23:41:36,229 [INFO] [5e3e157c] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:41:36,229 [INFO] 添加交易记录: 午饭
2025-06-26 23:41:36,230 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:41:36,536 [INFO] 交易添加成功: 187
2025-06-26 23:41:36,536 [INFO] [5e3e157c] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:41:36,537 [INFO] add_transaction 执行时间: 0.3106秒
2025-06-26 23:41:36,538 [INFO] 192.168.1.68 - - [26/Jun/2025 23:41:36] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:41:36,545 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750952496,v1=5b18f3d668e796e2f4217cef9050fa353dd9daf28c335956c4365da97d8838e6', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-26 23:41:36,546 [INFO] Received data: {"uuid": "c21040c3-1a46-4a7a-9b57-a0e1608d985c", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 186, "created_at": "2025-06-26T23:33:46+08:00", "updated_at": "2025-06-26T23:33:46+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "186", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": null, "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "940d7d01ff5b9791aa135348c122d8ef6ee45a536f3c1a9a60c15529d1a7ef05", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/186"}]}}
2025-06-26 23:41:36,546 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：35.0，分类：None，预算：None。
2025-06-26 23:41:36,547 [INFO] webhook 执行时间: 0.0016秒
2025-06-26 23:41:36,547 [INFO] 192.168.1.195 - - [26/Jun/2025 23:41:36] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:41:36,565 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750952496,v1=95697d7916ead4b815e096054d8e91a7e178e2dcfab63b4ca6ae55610c3369c4', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-26 23:41:36,566 [INFO] Received data: {"uuid": "13ead7dd-5844-480e-9808-a50d5d7b7f68", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 187, "created_at": "2025-06-26T23:41:36+08:00", "updated_at": "2025-06-26T23:41:36+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "187", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": null, "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "940d7d01ff5b9791aa135348c122d8ef6ee45a536f3c1a9a60c15529d1a7ef05", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/187"}]}}
2025-06-26 23:41:36,566 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：35.0，分类：None，预算：None。
2025-06-26 23:41:36,567 [INFO] webhook 执行时间: 0.0015秒
2025-06-26 23:41:36,567 [INFO] 192.168.1.195 - - [26/Jun/2025 23:41:36] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:45:13,131 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:45:13,171 [INFO]  * Restarting with stat
2025-06-26 23:45:14,446 [WARNING]  * Debugger is active!
2025-06-26 23:45:14,452 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:45:15,472 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:45:15,576 [INFO]  * Restarting with stat
2025-06-26 23:45:17,340 [WARNING]  * Debugger is active!
2025-06-26 23:45:17,345 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:45:27,441 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:45:27,535 [INFO]  * Restarting with stat
2025-06-26 23:45:28,931 [WARNING]  * Debugger is active!
2025-06-26 23:45:28,937 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:45:30,961 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:45:30,998 [INFO]  * Restarting with stat
2025-06-26 23:45:32,302 [WARNING]  * Debugger is active!
2025-06-26 23:45:32,307 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:46:27,482 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750952787,v1=4415b1cf74fc81b3788e251c9afe56d4d91acca9ff16e065de61acb6e49acb66', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1739'}
2025-06-26 23:46:27,483 [INFO] Received data: {"uuid": "4c9d8577-cd1a-4208-82a7-e100aa09c211", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 188, "created_at": "2025-06-26T23:46:27+08:00", "updated_at": "2025-06-26T23:46:27+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "188", "type": "withdrawal", "date": "2025-06-26T20:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": null, "description": "购买书籍", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "1", "budget_name": "周预算", "category_id": "3", "category_name": "生活爱好", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["读书"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "ea0b3758e6fcbd9503886418263cd0c8f7402824172b0ea9780d2e1ddac2ab5a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/188"}]}}
2025-06-26 23:46:27,484 [INFO] Webhook处理成功: 您新增了一笔交易：购买书籍, 费用：[FILTERED]，分类：生活爱好，预算：周预算。
2025-06-26 23:46:27,484 [INFO] webhook 执行时间: 0.0032秒
2025-06-26 23:46:27,486 [INFO] 192.168.1.195 - - [26/Jun/2025 23:46:27] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:47:01,784 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:47:01,840 [INFO]  * Restarting with stat
2025-06-26 23:49:09,592 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:49:09,593 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:49:09,594 [INFO]  * Restarting with stat
2025-06-26 23:49:10,848 [WARNING]  * Debugger is active!
2025-06-26 23:49:10,855 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:49:32,564 [INFO] 开始处理交易请求 [ID: 69635aca]
2025-06-26 23:49:32,569 [WARNING] [69635aca] 交易数据验证失败: 2 validation errors for TransactionRequest
date
  Value error, 日期格式应为 YYYY-MM-DD [type=value_error, input_value='2025-06-26T20:00:00+08:00', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
destination_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...卡（交通银行）'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-26 23:49:32,570 [INFO] add_transaction 执行时间: 0.0054秒
2025-06-26 23:49:32,570 [INFO] 192.168.1.68 - - [26/Jun/2025 23:49:32] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-26 23:49:32,919 [INFO] 成功获取 1 个预算
2025-06-26 23:49:32,919 [INFO] budgets 执行时间: 0.2002秒
2025-06-26 23:49:32,920 [INFO] 192.168.1.68 - - [26/Jun/2025 23:49:32] "GET /budgets HTTP/1.1" 200 -
2025-06-26 23:56:10,256 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:56:10,257 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:56:10,263 [INFO]  * Restarting with stat
2025-06-26 23:56:11,531 [WARNING]  * Debugger is active!
2025-06-26 23:56:11,536 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:56:35,798 [INFO] 开始处理交易请求 [ID: 667896a9]
2025-06-26 23:56:35,799 [WARNING] [667896a9] 交易数据验证失败: 1 validation error for TransactionRequest
destination_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...卡（交通银行）'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-26 23:56:35,800 [INFO] add_transaction 执行时间: 0.0020秒
2025-06-26 23:56:35,800 [INFO] 192.168.1.68 - - [26/Jun/2025 23:56:35] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-26 23:56:36,119 [INFO] 成功获取 1 个预算
2025-06-26 23:56:36,120 [INFO] budgets 执行时间: 0.1882秒
2025-06-26 23:56:36,121 [INFO] 192.168.1.68 - - [26/Jun/2025 23:56:36] "GET /budgets HTTP/1.1" 200 -
2025-06-26 23:59:11,886 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:59:11,887 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:59:11,889 [INFO]  * Restarting with stat
2025-06-26 23:59:13,054 [WARNING]  * Debugger is active!
2025-06-26 23:59:13,059 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:59:26,347 [INFO] 开始处理交易请求 [ID: 2a23227a]
2025-06-26 23:59:26,347 [INFO] [2a23227a] 交易数据验证成功: {'amount': '200.0', 'description': '购书', 'source_account': '信用卡（交通银行）', 'destination_account': 'N/A', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:59:26,347 [INFO] 添加交易记录: 购书
2025-06-26 23:59:26,348 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '200.0', 'description': '购书', 'source_name': '信用卡（交通银行）', 'destination_name': ''}]}
2025-06-26 23:59:26,631 [INFO] 交易添加成功: 189
2025-06-26 23:59:26,632 [INFO] [2a23227a] 交易创建成功: amount=200.0, description=购书
2025-06-26 23:59:26,633 [INFO] add_transaction 执行时间: 0.2866秒
2025-06-26 23:59:26,634 [INFO] 192.168.1.68 - - [26/Jun/2025 23:59:26] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:59:26,684 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750953566,v1=2394e78b54d57b45532aaf0c7621aeadf74a8a1671de75b32da52405f104890a', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1673'}
2025-06-26 23:59:26,685 [INFO] Received data: {"uuid": "b4f258ba-71e9-4979-8126-70cdf0fe3fd7", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 189, "created_at": "2025-06-26T23:59:26+08:00", "updated_at": "2025-06-26T23:59:26+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "189", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "购书", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "ff7978f25b78ba9f59a02403f76ee89c5f98f523e7e42fa3ee1beb4865a284da", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/189"}]}}
2025-06-26 23:59:26,686 [INFO] Webhook处理成功: 您新增了一笔交易：购书, 费用：[FILTERED]，分类：None，预算：None。
2025-06-26 23:59:26,689 [INFO] webhook 执行时间: 0.0047秒
2025-06-26 23:59:26,690 [INFO] 192.168.1.195 - - [26/Jun/2025 23:59:26] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:59:27,056 [INFO] 成功获取 1 个预算
2025-06-26 23:59:27,056 [INFO] budgets 执行时间: 0.2101秒
2025-06-26 23:59:27,057 [INFO] 192.168.1.68 - - [26/Jun/2025 23:59:27] "GET /budgets HTTP/1.1" 200 -
