2025-06-26 17:30:11,787 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:30:11,787 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:32:15,278 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:32:15,279 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:32:19,660 [INFO] [Dify] 收到请求: {'api_endpoint': '/budgets', 'method': 'GET', 'query_parameters': {'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}}
2025-06-26 17:32:19,737 [WARNING] 获取预算限制失败: name 'request_data' is not defined
2025-06-26 17:32:19,737 [INFO] 192.168.1.68 - - [26/Jun/2025 17:32:19] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:34:50,519 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:34:50,519 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:34:54,841 [INFO] [Dify] 收到请求: {'api_endpoint': '/budgets', 'method': 'GET', 'query_parameters': {'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}}
2025-06-26 17:34:55,045 [INFO] 预算 1 通过 /budgets/1/limits 查询到 4 条记录
2025-06-26 17:34:55,046 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-23T00:00:00+08:00 - 2025-06-29T23:59:59+08:00
2025-06-26 17:34:55,046 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-16T00:00:00+08:00 - 2025-06-22T23:59:59+08:00
2025-06-26 17:34:55,046 [INFO] 预算 1 找到限制记录: 4000.0, 时间: 2025-06-09T00:00:00+08:00 - 2025-06-15T23:59:59+08:00
2025-06-26 17:34:55,047 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-02T00:00:00+08:00 - 2025-06-08T23:59:59+08:00
2025-06-26 17:34:55,047 [INFO] 192.168.1.68 - - [26/Jun/2025 17:34:55] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:41:50,402 [INFO] [Dify] 收到请求: {'api_endpoint': '/budgets', 'method': 'GET', 'query_parameters': {'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}}
2025-06-26 17:41:50,638 [INFO] 预算 1 通过 /budgets/1/limits 查询到 4 条记录
2025-06-26 17:41:50,638 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-23T00:00:00+08:00 - 2025-06-29T23:59:59+08:00
2025-06-26 17:41:50,638 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-16T00:00:00+08:00 - 2025-06-22T23:59:59+08:00
2025-06-26 17:41:50,639 [INFO] 预算 1 找到限制记录: 4000.0, 时间: 2025-06-09T00:00:00+08:00 - 2025-06-15T23:59:59+08:00
2025-06-26 17:41:50,640 [INFO] 预算 1 找到限制记录: 2000.0, 时间: 2025-06-02T00:00:00+08:00 - 2025-06-08T23:59:59+08:00
2025-06-26 17:41:50,641 [INFO] 192.168.1.68 - - [26/Jun/2025 17:41:50] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:53:06,759 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:53:06,759 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:53:11,711 [INFO] [Dify] 验证通过的请求: /budgets
2025-06-26 17:53:11,932 [ERROR] [Dify] 服务处理失败: 'list' object has no attribute 'get_json'
Traceback (most recent call last):
  File "D:\fleshrecord\app.py", line 425, in dify_webhook
    budget_data = budget_result.get_json()
                  ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get_json'
2025-06-26 17:53:11,934 [INFO] 192.168.1.68 - - [26/Jun/2025 17:53:11] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 17:54:54,668 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 17:54:54,668 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 17:54:58,099 [INFO] [Dify] 验证通过的请求: /budgets
2025-06-26 17:54:58,279 [INFO] 192.168.1.68 - - [26/Jun/2025 17:54:58] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:57:14,067 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 17:57:14,067 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'limit': 50}
2025-06-26 17:57:14,202 [INFO] 成功查询到 50 条交易记录
2025-06-26 17:57:14,203 [INFO] 192.168.1.68 - - [26/Jun/2025 17:57:14] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 17:57:57,367 [ERROR] [Dify] 请求解析失败: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.
2025-06-26 17:57:57,367 [INFO] 192.168.1.68 - - [26/Jun/2025 17:57:57] "[31m[1mPOST /dify_webhook HTTP/1.1[0m" 400 -
2025-06-26 17:58:09,939 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 17:58:09,942 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'limit': 50}
2025-06-26 17:58:10,045 [INFO] 成功查询到 50 条交易记录
2025-06-26 17:58:10,046 [INFO] 192.168.1.68 - - [26/Jun/2025 17:58:10] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 18:02:19,742 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 18:02:19,746 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 18:02:24,701 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 18:02:24,702 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'limit': 50}
2025-06-26 18:02:24,833 [INFO] 成功查询到 50 条交易记录，总共 71 条
2025-06-26 18:02:24,834 [INFO] 192.168.1.68 - - [26/Jun/2025 18:02:24] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 18:05:02,253 [INFO] [Dify] 验证通过的请求: /budgets
2025-06-26 18:05:02,432 [INFO] 192.168.1.68 - - [26/Jun/2025 18:05:02] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 18:08:51,178 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 18:08:51,178 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'start': '2025-06-01', 'end': '2025-06-26', 'limit': 50}
2025-06-26 18:08:51,262 [INFO] 成功查询到 50 条交易记录，总共 71 条
2025-06-26 18:08:51,263 [INFO] 192.168.1.68 - - [26/Jun/2025 18:08:51] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 18:40:32,733 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750934432,v1=04eeb467613017795d00dd0d3dbc74af1a6176bfa3770a9fdd072bda1747570d', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1708'}
2025-06-26 18:40:32,733 [INFO] Received raw data: {"uuid": "965233f9-1f64-49d5-bb7b-cbc7655fa05c", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 178, "created_at": "2025-06-26T18:40:32+08:00", "updated_at": "2025-06-26T18:40:32+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "178", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "3.50", "foreign_amount": null, "description": "买药", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "4", "category_name": "医药护理", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["药品"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "b02763b77b6c72c36295bffb834464fc86af16e7db0e0a3110e32591872f6071", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/178"}]}}
2025-06-26 18:40:32,923 [INFO] {'name': '周预算', 'total_budget': 10000.0, 'total_spent': 11932.23, 'remaining': 0.0}
2025-06-26 18:40:32,923 [INFO] 构造消息内容: 您新增了一笔交易：买药, 费用：3.50，分类：医药护理，预算：None。
交易处理完成，当前预算情况:
当月预算: 10000.0，支出：11932.23，剩余： 0.0 元
2025-06-26 18:40:33,142 [INFO] Webhook response: {"errcode":0,"errmsg":"ok"}
2025-06-26 18:40:33,143 [INFO] 192.168.1.195 - - [26/Jun/2025 18:40:33] "POST /webhook HTTP/1.1" 200 -
2025-06-26 19:15:30,904 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:15:30,905 [INFO] 查询交易记录，参数: {'start': '2025-06-19', 'end': '2025-06-26', 'type': 'withdrawal', 'limit': 50}
2025-06-26 19:15:30,978 [INFO] 成功查询到 28 条交易记录，总共 28 条
2025-06-26 19:15:30,979 [INFO] 192.168.1.68 - - [26/Jun/2025 19:15:30] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:21:21,021 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:21:21,021 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '餐饮', 'limit': 50}
2025-06-26 19:21:21,141 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:21:21,142 [INFO] 192.168.1.68 - - [26/Jun/2025 19:21:21] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:22:33,750 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:22:33,751 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '餐饮'}
2025-06-26 19:22:33,869 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:22:33,870 [INFO] 192.168.1.68 - - [26/Jun/2025 19:22:33] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:23:48,612 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:23:48,613 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '买药', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:23:48,718 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:23:48,719 [INFO] 192.168.1.68 - - [26/Jun/2025 19:23:48] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:28:18,994 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:28:18,995 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:28:19,134 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:28:19,135 [INFO] 192.168.1.68 - - [26/Jun/2025 19:28:19] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:29:25,767 [ERROR] [Dify] 请求解析失败: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.
2025-06-26 19:29:25,768 [INFO] 192.168.1.68 - - [26/Jun/2025 19:29:25] "[31m[1mPOST /dify_webhook HTTP/1.1[0m" 400 -
2025-06-26 19:29:32,405 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:29:32,405 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:29:32,501 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:29:32,502 [INFO] 192.168.1.68 - - [26/Jun/2025 19:29:32] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:29:52,045 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:29:52,045 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:29:52,160 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:29:52,161 [INFO] 192.168.1.68 - - [26/Jun/2025 19:29:52] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:32:53,877 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:32:53,878 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:32:56,898 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:32:56,899 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:32:56,899 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:32:56,900 [INFO] 请求参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:32:56,996 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&start=2025-06-01&end=2025-06-26
2025-06-26 19:32:57,002 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:32:57,002 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:32:57,002 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:32:57,003 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:32:57,003 [INFO] 返回交易的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:32:57,004 [INFO] 192.168.1.68 - - [26/Jun/2025 19:32:57] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:35:15,837 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:35:15,837 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:35:21,504 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:35:21,504 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:35:21,505 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:35:21,505 [INFO] 请求参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:35:21,597 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&start=2025-06-01&end=2025-06-26
2025-06-26 19:35:21,603 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:35:21,603 [INFO] 类目过滤后剩余 1 条交易记录（类目: 医药护理）
2025-06-26 19:35:21,603 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:35:21,604 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:35:21,604 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:35:21,604 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:35:21,605 [INFO] 192.168.1.68 - - [26/Jun/2025 19:35:21] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:37:31,451 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:37:31,451 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:37:37,070 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:37:37,071 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:37:42,893 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:37:42,893 [INFO] 查询交易记录，参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:37:42,894 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:37:42,894 [INFO] 请求参数: {'type': 'withdrawal', 'category': '医药护理', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 19:37:42,988 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&start=2025-06-01&end=2025-06-26
2025-06-26 19:37:42,994 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:37:42,994 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 19:37:42,994 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 19:37:42,995 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 19:37:42,995 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 19:37:42,995 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 19:37:42,996 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 19:37:42,996 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 19:37:42,996 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 19:37:42,996 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 19:37:42,997 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 19:37:42,997 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 19:37:42,997 [INFO] 类目过滤后剩余 1 条交易记录（类目: 医药护理）
2025-06-26 19:37:42,997 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:37:42,998 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:37:42,998 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:37:42,998 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:37:42,999 [INFO] 192.168.1.68 - - [26/Jun/2025 19:37:42] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:43:32,962 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 19:43:32,962 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 19:43:50,603 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:43:50,604 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 19:43:50,604 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:43:50,604 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 19:43:50,705 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7
2025-06-26 19:43:50,710 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:43:50,710 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 19:43:50,711 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 19:43:50,711 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 19:43:50,712 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 19:43:50,712 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 19:43:50,712 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 19:43:50,712 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 19:43:50,713 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 19:43:50,713 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 19:43:50,713 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 19:43:50,713 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 19:43:50,714 [INFO] 类目过滤后剩余 6 条交易记录（类目: 社交宴请）
2025-06-26 19:43:50,714 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:43:50,714 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:43:50,715 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:43:50,715 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:43:50,716 [INFO] 192.168.1.68 - - [26/Jun/2025 19:43:50] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:44:48,069 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 19:44:48,069 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 19:44:48,070 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 19:44:48,071 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 19:44:48,158 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7
2025-06-26 19:44:48,160 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 19:44:48,161 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 19:44:48,161 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 19:44:48,161 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 19:44:48,162 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 19:44:48,162 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 19:44:48,162 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 19:44:48,163 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 19:44:48,163 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 19:44:48,163 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 19:44:48,164 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 19:44:48,164 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 19:44:48,165 [INFO] 类目过滤后剩余 6 条交易记录（类目: 社交宴请）
2025-06-26 19:44:48,165 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 19:44:48,165 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 19:44:48,166 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 19:44:48,166 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 14, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 6, '信用还款': 2, '房贷车贷': 2}
2025-06-26 19:44:48,167 [INFO] 192.168.1.68 - - [26/Jun/2025 19:44:48] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 19:45:49,799 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750938349,v1=2b11854a2a22aa03872523afade208aa28557cbbed99f2da38ef71c5dcee79de', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1736'}
2025-06-26 19:45:49,800 [INFO] Received raw data: {"uuid": "aa353726-c439-4d93-9b76-c3254e6967fd", "user_id": 1, "trigger": "UPDATE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 144, "created_at": "2025-06-24T18:12:28+08:00", "updated_at": "2025-06-26T19:45:48+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "144", "type": "withdrawal", "date": "2025-06-16T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "1041.17", "foreign_amount": null, "description": "购买鱼翅佛跳墙3盒", "source_id": "71", "source_name": "京东白条", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "1", "budget_name": "周预算", "category_id": "1", "category_name": "生活饮食", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["礼品"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "a561fc15f1bfc7120215733b6deb856dab19851e7a3f147c9e9f993c124440bc", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/144"}]}}
2025-06-26 19:45:49,962 [INFO] {'name': '周预算', 'total_budget': 10000.0, 'total_spent': 11932.23, 'remaining': 0.0}
2025-06-26 19:45:49,962 [INFO] 构造消息内容: 您更新了一笔交易：购买鱼翅佛跳墙3盒, 费用：1041.17，分类：生活饮食，预算：周预算。
交易处理完成，当前预算情况:
当月预算: 10000.0，支出：11932.23，剩余： 0.0 元
2025-06-26 19:45:50,168 [INFO] Webhook response: {"errcode":0,"errmsg":"ok"}
2025-06-26 19:45:50,169 [INFO] 192.168.1.195 - - [26/Jun/2025 19:45:50] "POST /webhook HTTP/1.1" 200 -
2025-06-26 20:10:53,321 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:10:53,322 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:10:53,322 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:10:53,322 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:10:53,419 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7
2025-06-26 20:10:53,421 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 20:10:53,422 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 20:10:53,423 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:10:53,423 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:10:53,423 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:10:53,423 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:10:53,423 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:10:53,424 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:10:53,424 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:10:53,424 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:10:53,425 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:10:53,425 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:10:53,425 [INFO] 类目过滤后剩余 5 条交易记录（类目: 社交宴请）
2025-06-26 20:10:53,425 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:10:53,426 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:10:53,426 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:10:53,426 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 15, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 5, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:10:53,427 [INFO] 192.168.1.68 - - [26/Jun/2025 20:10:53] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:10:58,563 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:10:58,564 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:10:58,564 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:10:58,565 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:10:58,666 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7
2025-06-26 20:10:58,668 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 20:10:58,668 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 20:10:58,668 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:10:58,669 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:10:58,669 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:10:58,669 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:10:58,670 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:10:58,670 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:10:58,670 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:10:58,671 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:10:58,671 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:10:58,671 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:10:58,672 [INFO] 类目过滤后剩余 5 条交易记录（类目: 社交宴请）
2025-06-26 20:10:58,672 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:10:58,672 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:10:58,673 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:10:58,673 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 15, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 5, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:10:58,674 [INFO] 192.168.1.68 - - [26/Jun/2025 20:10:58] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:12:32,002 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:12:32,003 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:12:32,003 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:12:32,004 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:12:32,097 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BF%A1%E7%94%A8%E8%BF%98%E6%AC%BE
2025-06-26 20:12:32,098 [INFO] 成功查询到 50 条交易记录，总共 72 条
2025-06-26 20:12:32,098 [INFO] 开始类目过滤，目标类目: 信用还款
2025-06-26 20:12:32,098 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:12:32,099 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:12:32,099 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:12:32,099 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:12:32,099 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:12:32,100 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:12:32,100 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:12:32,101 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:12:32,101 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:12:32,101 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:12:32,102 [INFO] 类目过滤后剩余 2 条交易记录（类目: 信用还款）
2025-06-26 20:12:32,102 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:12:32,102 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:12:32,103 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:12:32,103 [INFO] API返回的类目分布: {'医药护理': 1, '交通通讯': 12, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 15, '社交娱乐': 2, '生活爱好': 1, '家用衣物': 1, '社交宴请': 5, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:12:32,104 [INFO] 192.168.1.68 - - [26/Jun/2025 20:12:32] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:15:13,744 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 20:15:13,745 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 20:15:17,756 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:15:17,756 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:15:17,757 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:15:17,757 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款', 'page': 1, 'limit': 200}
2025-06-26 20:15:17,867 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BF%A1%E7%94%A8%E8%BF%98%E6%AC%BE&page=1&limit=200
2025-06-26 20:15:17,875 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:15:17,876 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:15:17,876 [INFO] 开始类目过滤，目标类目: 信用还款
2025-06-26 20:15:17,876 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:15:17,877 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:15:17,878 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:15:17,878 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:15:17,879 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:15:17,880 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:15:17,880 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:15:17,881 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:15:17,881 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:15:17,881 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:15:17,882 [INFO] 类目过滤后剩余 2 条交易记录（类目: 信用还款）
2025-06-26 20:15:17,882 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:15:17,882 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:15:17,882 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:15:17,883 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:15:17,884 [INFO] 192.168.1.68 - - [26/Jun/2025 20:15:17] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:15:20,920 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:15:20,920 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:15:20,921 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:15:20,921 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款', 'page': 1, 'limit': 200}
2025-06-26 20:15:21,011 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BF%A1%E7%94%A8%E8%BF%98%E6%AC%BE&page=1&limit=200
2025-06-26 20:15:21,012 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:15:21,013 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:15:21,013 [INFO] 开始类目过滤，目标类目: 信用还款
2025-06-26 20:15:21,013 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:15:21,013 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:15:21,014 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:15:21,014 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:15:21,014 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:15:21,014 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:15:21,015 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:15:21,015 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:15:21,015 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:15:21,015 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:15:21,016 [INFO] 类目过滤后剩余 2 条交易记录（类目: 信用还款）
2025-06-26 20:15:21,016 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:15:21,016 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:15:21,016 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:15:21,017 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:15:21,017 [INFO] 192.168.1.68 - - [26/Jun/2025 20:15:21] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:15:26,345 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:15:26,345 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:15:26,346 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:15:26,346 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请', 'page': 1, 'limit': 200}
2025-06-26 20:15:26,473 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7&page=1&limit=200
2025-06-26 20:15:26,475 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:15:26,475 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:15:26,475 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 20:15:26,476 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:15:26,476 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:15:26,476 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:15:26,476 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:15:26,476 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:15:26,477 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:15:26,477 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:15:26,477 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:15:26,478 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:15:26,478 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:15:26,478 [INFO] 类目过滤后剩余 8 条交易记录（类目: 社交宴请）
2025-06-26 20:15:26,478 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:15:26,479 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:15:26,479 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:15:26,480 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:15:26,480 [INFO] 192.168.1.68 - - [26/Jun/2025 20:15:26] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:15:41,483 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:15:41,484 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款'}
2025-06-26 20:15:41,484 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:15:41,484 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '信用还款', 'page': 1, 'limit': 200}
2025-06-26 20:15:41,578 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BF%A1%E7%94%A8%E8%BF%98%E6%AC%BE&page=1&limit=200
2025-06-26 20:15:41,579 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:15:41,580 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:15:41,580 [INFO] 开始类目过滤，目标类目: 信用还款
2025-06-26 20:15:41,580 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:15:41,581 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:15:41,581 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:15:41,581 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:15:41,582 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:15:41,582 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:15:41,582 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:15:41,583 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:15:41,583 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:15:41,583 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:15:41,584 [INFO] 类目过滤后剩余 2 条交易记录（类目: 信用还款）
2025-06-26 20:15:41,584 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:15:41,584 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:15:41,584 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:15:41,585 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:15:41,586 [INFO] 192.168.1.68 - - [26/Jun/2025 20:15:41] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:16:59,223 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:16:59,224 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 20:16:59,224 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:16:59,224 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 20:16:59,321 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 20:16:59,322 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:16:59,323 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:16:59,323 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 20:16:59,323 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:16:59,324 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:16:59,324 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:16:59,324 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:16:59,325 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:16:59,325 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:16:59,325 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:16:59,325 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:16:59,326 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:16:59,326 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:16:59,326 [INFO] 类目过滤后剩余 17 条交易记录（类目: 交通通讯）
2025-06-26 20:16:59,327 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:16:59,327 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:16:59,327 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:16:59,328 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:16:59,328 [INFO] 192.168.1.68 - - [26/Jun/2025 20:16:59] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:18:22,725 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:18:22,726 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 20:18:22,726 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:18:22,726 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 20:18:22,826 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 20:18:22,827 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:18:22,828 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:18:22,828 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 20:18:22,828 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:18:22,828 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:18:22,829 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:18:22,829 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:18:22,829 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:18:22,829 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:18:22,830 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:18:22,830 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:18:22,830 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:18:22,831 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:18:22,831 [INFO] 类目过滤后剩余 2 条交易记录（类目: 医药护理）
2025-06-26 20:18:22,831 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:18:22,832 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:18:22,832 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:18:22,832 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:18:22,833 [INFO] 192.168.1.68 - - [26/Jun/2025 20:18:22] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:18:36,801 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:18:36,801 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 20:18:36,802 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:18:36,802 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 20:18:36,913 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 20:18:36,914 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:18:36,914 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:18:36,915 [INFO] 开始类目过滤，目标类目: 家庭娱乐
2025-06-26 20:18:36,915 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:18:36,916 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:18:36,916 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:18:36,916 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:18:36,916 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:18:36,917 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:18:36,917 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:18:36,917 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:18:36,918 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:18:36,918 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:18:36,918 [INFO] 类目过滤后剩余 2 条交易记录（类目: 家庭娱乐）
2025-06-26 20:18:36,918 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:18:36,919 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:18:36,919 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:18:36,919 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:18:36,920 [INFO] 192.168.1.68 - - [26/Jun/2025 20:18:36] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:19:45,281 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:19:45,281 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请'}
2025-06-26 20:19:45,282 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:19:45,282 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '社交宴请', 'page': 1, 'limit': 200}
2025-06-26 20:19:45,378 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E7%A4%BE%E4%BA%A4%E5%AE%B4%E8%AF%B7&page=1&limit=200
2025-06-26 20:19:45,381 [INFO] 获取第 1 页，本页 72 条记录，总计 72 条
2025-06-26 20:19:45,381 [INFO] 成功查询到 72 条交易记录，API总共 72 条
2025-06-26 20:19:45,382 [INFO] 开始类目过滤，目标类目: 社交宴请
2025-06-26 20:19:45,382 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 20:19:45,382 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 20:19:45,383 [INFO] 交易 3: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 20:19:45,383 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 20:19:45,383 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 20:19:45,383 [INFO] 交易 6: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 20:19:45,384 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 20:19:45,384 [INFO] 交易 8: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 20:19:45,384 [INFO] 交易 9: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 20:19:45,385 [INFO] 交易 10: 日期:2025-06-23T08:00:00+08:00, 描述:续费VPS年费, 金额:83.020000000000, 类目:交通通讯
2025-06-26 20:19:45,385 [INFO] 类目过滤后剩余 8 条交易记录（类目: 社交宴请）
2025-06-26 20:19:45,385 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:19:45,386 [INFO] 第一条交易分录的类目: 医药护理
2025-06-26 20:19:45,386 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:19:45,386 [INFO] API返回的类目分布: {'医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '生活爱好': 9, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 20:19:45,387 [INFO] 192.168.1.68 - - [26/Jun/2025 20:19:45] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 20:23:52,287 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750940632,v1=df8617c13c12957e266f80fb07d58f969503e20a8cde2b9a3c47605bcc42fab2', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1730'}
2025-06-26 20:23:52,288 [INFO] Received raw data: {"uuid": "b85f071d-ef2c-4efb-beb0-907b0f4984da", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 179, "created_at": "2025-06-26T20:23:51+08:00", "updated_at": "2025-06-26T20:23:51+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "179", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "155.02", "foreign_amount": null, "description": "claude大模型使用费", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "3", "category_name": "生活爱好", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["AI"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "831e17bc4196ce4bbe49a8626713dcdc9ce562e0540ca74775489d81c1254801", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/179"}]}}
2025-06-26 20:23:52,491 [INFO] {'name': '周预算', 'total_budget': 10000.0, 'total_spent': 11932.23, 'remaining': 0.0}
2025-06-26 20:23:52,492 [INFO] 构造消息内容: 您新增了一笔交易：claude大模型使用费, 费用：155.02，分类：生活爱好，预算：None。
交易处理完成，当前预算情况:
当月预算: 10000.0，支出：11932.23，剩余： 0.0 元
2025-06-26 20:23:52,697 [INFO] Webhook response: {"errcode":0,"errmsg":"ok"}
2025-06-26 20:23:52,697 [INFO] 192.168.1.195 - - [26/Jun/2025 20:23:52] "POST /webhook HTTP/1.1" 200 -
2025-06-26 20:45:37,178 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 20:45:37,178 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 20:45:40,560 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 20:45:40,561 [INFO] 查询交易记录，参数: {'start': '2025-06-23', 'end': '2025-06-26', 'limit': 50}
2025-06-26 20:45:40,561 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 20:45:40,561 [INFO] 请求参数: {'start': '2025-06-23', 'end': '2025-06-26', 'limit': 200, 'page': 1}
2025-06-26 20:45:40,638 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-23&end=2025-06-26&limit=200&page=1
2025-06-26 20:45:40,646 [INFO] 获取第 1 页，本页 16 条记录，总计 16 条
2025-06-26 20:45:40,649 [INFO] 成功查询到 16 条交易记录，API总共 16 条
2025-06-26 20:45:40,649 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 20:45:40,649 [INFO] 第一条交易分录的类目: 生活爱好
2025-06-26 20:45:40,650 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 20:45:40,650 [INFO] API返回的类目分布: {'生活爱好': 1, '医药护理': 1, '交通通讯': 4, None: 2, '工资收入': 1, '购物支出': 3, '家庭娱乐': 1, '生活饮食': 2, '社交娱乐': 1}
2025-06-26 20:45:40,651 [INFO] 192.168.1.68 - - [26/Jun/2025 20:45:40] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 21:02:23,827 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:02:23,827 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:04:54,041 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:04:54,041 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:17:49,238 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:17:49,238 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:17:55,277 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 21:17:55,278 [INFO] 查询交易记录，参数: {'start': '2025-06-23', 'end': '2025-06-26', 'limit': 50}
2025-06-26 21:17:55,278 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 21:17:55,278 [INFO] 请求参数: {'start': '2025-06-23', 'end': '2025-06-26', 'limit': 200, 'page': 1}
2025-06-26 21:17:55,382 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-23&end=2025-06-26&limit=200&page=1
2025-06-26 21:17:55,387 [INFO] 获取第 1 页，本页 16 条记录，总计 16 条
2025-06-26 21:17:55,388 [INFO] 成功查询到 16 条交易记录，API总共 16 条
2025-06-26 21:17:55,388 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 21:17:55,388 [INFO] 第一条交易分录的类目: 生活爱好
2025-06-26 21:17:55,388 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 21:17:55,389 [INFO] API返回的类目分布: {'生活爱好': 1, '医药护理': 1, '交通通讯': 4, None: 2, '工资收入': 1, '购物支出': 3, '家庭娱乐': 1, '生活饮食': 2, '社交娱乐': 1}
2025-06-26 21:17:55,390 [INFO] 192.168.1.68 - - [26/Jun/2025 21:17:55] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 21:18:08,193 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 21:18:08,194 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 21:18:08,194 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 21:18:08,194 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 21:18:08,306 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 21:18:08,310 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 21:18:08,310 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 21:18:08,310 [INFO] 开始类目过滤，目标类目: 家庭娱乐
2025-06-26 21:18:08,311 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 21:18:08,311 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 21:18:08,311 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 21:18:08,312 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 21:18:08,312 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 21:18:08,312 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 21:18:08,313 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 21:18:08,313 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 21:18:08,313 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 21:18:08,314 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 21:18:08,314 [INFO] 类目过滤后剩余 2 条交易记录（类目: 家庭娱乐）
2025-06-26 21:18:08,314 [INFO] 第一条交易记录的结构: ['type', 'id', 'attributes', 'links']
2025-06-26 21:18:08,315 [INFO] 第一条交易分录的类目: 生活爱好
2025-06-26 21:18:08,315 [INFO] 第一条交易分录的类型: withdrawal
2025-06-26 21:18:08,315 [INFO] API返回的类目分布: {'生活爱好': 10, '医药护理': 2, '交通通讯': 17, '购物支出': 7, '家庭娱乐': 2, '生活饮食': 20, '社交娱乐': 2, '家用衣物': 1, '社交宴请': 8, '信用还款': 2, '房贷车贷': 2}
2025-06-26 21:18:08,316 [INFO] 192.168.1.68 - - [26/Jun/2025 21:18:08] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 21:21:30,475 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:21:30,477 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:21:33,632 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 21:21:33,633 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 21:21:33,633 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 21:21:33,633 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 21:21:33,731 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 21:21:33,737 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 21:21:33,737 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 21:21:33,737 [INFO] 开始类目过滤，目标类目: 家庭娱乐
2025-06-26 21:21:33,738 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 21:21:33,738 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 21:21:33,738 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 21:21:33,739 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 21:21:33,739 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 21:21:33,739 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 21:21:33,739 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 21:21:33,740 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 21:21:33,740 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 21:21:33,740 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 21:21:33,742 [INFO] 192.168.1.68 - - [26/Jun/2025 21:21:33] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 21:58:32,176 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 21:58:32,176 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 21:58:32,179 [INFO]  * Restarting with stat
2025-06-26 21:58:33,339 [WARNING]  * Debugger is active!
2025-06-26 21:58:33,345 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 21:58:36,382 [INFO]  * Detected change in 'D:\\fleshrecord\\conf\\config.py', reloading
2025-06-26 21:58:36,435 [INFO]  * Restarting with stat
2025-06-26 21:58:37,581 [WARNING]  * Debugger is active!
2025-06-26 21:58:37,587 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 21:58:54,098 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 21:58:54,098 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 21:58:54,099 [INFO] 请求 URL: http://192.168.1.195/api/v1/transactions
2025-06-26 21:58:54,099 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 21:58:54,195 [INFO] 实际发送的完整 URL: http://192.168.1.195/login
2025-06-26 21:58:54,273 [ERROR] 请求异常 - 查询交易失败: Expecting value: line 2 column 1 (char 1)
2025-06-26 21:58:54,274 [INFO] 192.168.1.68 - - [26/Jun/2025 21:58:54] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:00:00,905 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:00:00,914 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:00:00,917 [INFO]  * Restarting with stat
2025-06-26 22:00:02,185 [WARNING]  * Debugger is active!
2025-06-26 22:00:02,190 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:00:05,558 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 22:00:05,558 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 22:00:05,559 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:00:05,559 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 22:00:05,797 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:00:05,797 [ERROR] HTTP错误 - 查询交易失败: 401 Client Error: Unauthorized for url: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:00:05,798 [INFO] 192.168.1.68 - - [26/Jun/2025 22:00:05] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:00:52,663 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:00:52,664 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:00:52,666 [INFO]  * Restarting with stat
2025-06-26 22:00:53,891 [WARNING]  * Debugger is active!
2025-06-26 22:00:53,896 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:00:57,359 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 22:00:57,359 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 22:00:57,359 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:00:57,360 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 22:00:57,416 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:00:57,417 [ERROR] HTTP错误 - 查询交易失败: 401 Client Error: Unauthorized for url: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:00:57,418 [INFO] 192.168.1.68 - - [26/Jun/2025 22:00:57] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:04:23,989 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\firefly_service.py', reloading
2025-06-26 22:04:24,031 [INFO]  * Restarting with stat
2025-06-26 22:04:25,290 [WARNING]  * Debugger is active!
2025-06-26 22:04:25,296 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:04:26,318 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\firefly_service.py', reloading
2025-06-26 22:04:26,434 [INFO]  * Restarting with stat
2025-06-26 22:04:27,958 [WARNING]  * Debugger is active!
2025-06-26 22:04:27,963 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:06:49,473 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:06:49,474 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:06:49,476 [INFO]  * Restarting with stat
2025-06-26 22:06:50,568 [WARNING]  * Debugger is active!
2025-06-26 22:06:50,573 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:06:53,817 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 22:06:53,818 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐'}
2025-06-26 22:06:53,818 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:06:53,818 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '家庭娱乐', 'page': 1, 'limit': 200}
2025-06-26 22:06:53,935 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%AE%B6%E5%BA%AD%E5%A8%B1%E4%B9%90&page=1&limit=200
2025-06-26 22:06:53,940 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:06:53,941 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:06:53,941 [INFO] 开始类目过滤，目标类目: 家庭娱乐
2025-06-26 22:06:53,941 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:06:53,942 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:06:53,942 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:06:53,942 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:06:53,943 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:06:53,943 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:06:53,943 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:06:53,944 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:06:53,944 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:06:53,944 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:06:53,945 [INFO] 192.168.1.68 - - [26/Jun/2025 22:06:53] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:07:06,033 [INFO] [Dify] 验证通过的请求: /transactions
2025-06-26 22:07:06,034 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:07:06,034 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:07:06,035 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 22:07:06,140 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 22:07:06,142 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:07:06,142 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:07:06,143 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 22:07:06,144 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:07:06,144 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:07:06,144 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:07:06,145 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:07:06,145 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:07:06,145 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:07:06,145 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:07:06,146 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:07:06,146 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:07:06,147 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:07:06,148 [INFO] 192.168.1.68 - - [26/Jun/2025 22:07:06] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:08:43,154 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 22:08:43,197 [INFO]  * Restarting with stat
2025-06-26 22:08:44,362 [WARNING]  * Debugger is active!
2025-06-26 22:08:44,367 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:40:47,435 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:40:47,436 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:40:47,438 [INFO]  * Restarting with stat
2025-06-26 22:40:48,534 [WARNING]  * Debugger is active!
2025-06-26 22:40:48,539 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:40:54,610 [INFO] 192.168.1.68 - - [26/Jun/2025 22:40:54] "[33mPOST /dify_webhook HTTP/1.1[0m" 404 -
2025-06-26 22:41:11,248 [INFO] 192.168.1.68 - - [26/Jun/2025 22:41:11] "[33mPOST /dify_webhook HTTP/1.1[0m" 404 -
2025-06-26 22:42:04,665 [INFO] 192.168.1.68 - - [26/Jun/2025 22:42:04] "[33mGET /dify_webhook HTTP/1.1[0m" 404 -
2025-06-26 22:42:58,174 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:42:58,174 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:42:58,176 [INFO]  * Restarting with stat
2025-06-26 22:42:59,342 [WARNING]  * Debugger is active!
2025-06-26 22:42:59,348 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:43:01,858 [ERROR] dify_webhook 执行失败: 'DifyHandler' object has no attribute 'handle_dify_request'
2025-06-26 22:43:01,866 [INFO] 192.168.1.68 - - [26/Jun/2025 22:43:01] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:44:02,688 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 22:44:02,727 [INFO]  * Restarting with stat
2025-06-26 22:44:03,939 [WARNING]  * Debugger is active!
2025-06-26 22:44:03,945 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:44:04,968 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 22:44:05,005 [INFO]  * Restarting with stat
2025-06-26 22:44:06,208 [WARNING]  * Debugger is active!
2025-06-26 22:44:06,213 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:44:25,536 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:44:25,537 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:44:25,539 [INFO]  * Restarting with stat
2025-06-26 22:44:26,922 [WARNING]  * Debugger is active!
2025-06-26 22:44:26,927 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:44:28,534 [ERROR] 处理Dify webhook请求时发生错误: 'DifyWebhookRequest' object has no attribute 'query'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 40, in handle_dify_webhook
    f"query={webhook_data.query[:50]}..." if len(webhook_data.query) > 50
                                                 ^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DifyWebhookRequest' object has no attribute 'query'
2025-06-26 22:44:28,536 [INFO] dify_webhook 执行时间: 0.0023秒
2025-06-26 22:44:28,537 [INFO] 192.168.1.68 - - [26/Jun/2025 22:44:28] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:45:06,137 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:45:06,183 [INFO]  * Restarting with stat
2025-06-26 22:45:07,396 [WARNING]  * Debugger is active!
2025-06-26 22:45:07,402 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:45:35,127 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:45:35,128 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:45:35,130 [INFO]  * Restarting with stat
2025-06-26 22:45:36,537 [WARNING]  * Debugger is active!
2025-06-26 22:45:36,543 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:45:40,178 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:45:40,179 [ERROR] 处理Dify webhook请求时发生错误: 'DifyWebhookRequest' object has no attribute 'query'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 44, in handle_dify_webhook
    return self._route_request(webhook_data)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\dify_handler.py", line 100, in _route_request
    return self._handle_transactions_request(webhook_data.query)
                                             ^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DifyWebhookRequest' object has no attribute 'query'
2025-06-26 22:45:40,181 [INFO] dify_webhook 执行时间: 0.0027秒
2025-06-26 22:45:40,181 [INFO] 192.168.1.68 - - [26/Jun/2025 22:45:40] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:46:04,596 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:46:04,597 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:46:04,598 [INFO]  * Restarting with stat
2025-06-26 22:46:05,730 [WARNING]  * Debugger is active!
2025-06-26 22:46:05,736 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:46:08,514 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:46:08,514 [ERROR] 处理Dify webhook请求时发生错误: 'DifyWebhookRequest' object has no attribute 'query'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 44, in handle_dify_webhook
    return self._route_request(webhook_data)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\dify_handler.py", line 100, in _route_request
    return self._handle_transactions_request(webhook_data.query)
                                             ^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'DifyWebhookRequest' object has no attribute 'query'
2025-06-26 22:46:08,516 [INFO] dify_webhook 执行时间: 0.0027秒
2025-06-26 22:46:08,517 [INFO] 192.168.1.68 - - [26/Jun/2025 22:46:08] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:46:42,931 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:46:42,972 [INFO]  * Restarting with stat
2025-06-26 22:46:44,221 [WARNING]  * Debugger is active!
2025-06-26 22:46:44,227 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:46:45,248 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:46:45,342 [INFO]  * Restarting with stat
2025-06-26 22:46:46,646 [WARNING]  * Debugger is active!
2025-06-26 22:46:46,652 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:47:00,674 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:47:00,674 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:47:00,676 [INFO]  * Restarting with stat
2025-06-26 22:47:01,814 [WARNING]  * Debugger is active!
2025-06-26 22:47:01,820 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:47:03,830 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:47:03,830 [ERROR] 查询交易记录失败: 'dict' object has no attribute 'strip'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 118, in _handle_transactions_request
    query_params = self._parse_query_string(query)
  File "D:\fleshrecord\handlers\dify_handler.py", line 204, in _parse_query_string
    if query.strip().startswith('{'):
       ^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'strip'
2025-06-26 22:47:03,832 [INFO] dify_webhook 执行时间: 0.0023秒
2025-06-26 22:47:03,833 [INFO] 192.168.1.68 - - [26/Jun/2025 22:47:03] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:48:31,103 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:48:31,104 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:48:31,108 [INFO]  * Restarting with stat
2025-06-26 22:48:32,332 [WARNING]  * Debugger is active!
2025-06-26 22:48:32,337 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:48:35,586 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:48:35,586 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:48:35,587 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:48:35,587 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 22:48:35,691 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 22:48:35,697 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:48:35,697 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:48:35,697 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 22:48:35,698 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:48:35,698 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:48:35,700 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:48:35,704 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:48:35,704 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:48:35,704 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:48:35,705 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:48:35,705 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:48:35,707 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:48:35,708 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:48:35,709 [INFO] 成功获取 6 条交易记录
2025-06-26 22:48:35,718 [ERROR] 查询交易记录失败: slice(None, 10, None)
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 229, in _format_transactions_response
    "data": transactions[:10],  # 限制返回前10条记录
            ~~~~~~~~~~~~^^^^^
KeyError: slice(None, 10, None)
2025-06-26 22:48:35,721 [INFO] dify_webhook 执行时间: 0.1353秒
2025-06-26 22:48:35,722 [INFO] 192.168.1.68 - - [26/Jun/2025 22:48:35] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:48:38,135 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:48:38,135 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:48:38,136 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:48:38,136 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 22:48:38,253 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 22:48:38,254 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:48:38,255 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:48:38,255 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 22:48:38,256 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:48:38,256 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:48:38,256 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:48:38,257 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:48:38,257 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:48:38,258 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:48:38,258 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:48:38,258 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:48:38,259 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:48:38,259 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:48:38,259 [INFO] 成功获取 6 条交易记录
2025-06-26 22:48:38,260 [ERROR] 查询交易记录失败: slice(None, 10, None)
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 229, in _format_transactions_response
    "data": transactions[:10],  # 限制返回前10条记录
            ~~~~~~~~~~~~^^^^^
KeyError: slice(None, 10, None)
2025-06-26 22:48:38,261 [INFO] dify_webhook 执行时间: 0.1259秒
2025-06-26 22:48:38,261 [INFO] 192.168.1.68 - - [26/Jun/2025 22:48:38] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:50:31,806 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:50:31,807 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:50:31,808 [INFO]  * Restarting with stat
2025-06-26 22:50:32,929 [WARNING]  * Debugger is active!
2025-06-26 22:50:32,935 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:50:35,102 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:50:35,104 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯'}
2025-06-26 22:50:35,104 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:50:35,104 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '交通通讯', 'page': 1, 'limit': 200}
2025-06-26 22:50:35,223 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E4%BA%A4%E9%80%9A%E9%80%9A%E8%AE%AF&page=1&limit=200
2025-06-26 22:50:35,231 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:50:35,231 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:50:35,231 [INFO] 开始类目过滤，目标类目: 交通通讯
2025-06-26 22:50:35,232 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:50:35,232 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:50:35,232 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:50:35,232 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:50:35,233 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:50:35,233 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:50:35,233 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:50:35,234 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:50:35,234 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:50:35,235 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:50:35,235 [INFO] 成功获取 6 条交易记录
2025-06-26 22:50:35,236 [INFO] dify_webhook 执行时间: 0.1341秒
2025-06-26 22:50:35,237 [INFO] 192.168.1.68 - - [26/Jun/2025 22:50:35] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:53:55,224 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:53:55,225 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:53:55,225 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:53:55,225 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:53:55,324 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:53:55,326 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 22:53:55,326 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 22:53:55,327 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:53:55,327 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:53:55,327 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:53:55,328 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:53:55,328 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:53:55,329 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:53:55,329 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:53:55,329 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:53:55,330 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:53:55,330 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:53:55,330 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:53:55,331 [INFO] 成功获取 6 条交易记录
2025-06-26 22:53:55,331 [INFO] dify_webhook 执行时间: 0.1073秒
2025-06-26 22:53:55,332 [INFO] 192.168.1.68 - - [26/Jun/2025 22:53:55] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:54:51,848 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:54:51,848 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:54:51,849 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:54:51,849 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:54:51,909 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:54:51,912 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 22:54:51,912 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 22:54:51,912 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:54:51,913 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:54:51,913 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:54:51,913 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:54:51,914 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:54:51,914 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:54:51,914 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:54:51,915 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:54:51,915 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:54:51,915 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:54:51,915 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:54:51,916 [INFO] 成功获取 6 条交易记录
2025-06-26 22:54:51,916 [INFO] dify_webhook 执行时间: 0.0683秒
2025-06-26 22:54:51,917 [INFO] 192.168.1.68 - - [26/Jun/2025 22:54:51] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 22:55:58,673 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:55:58,674 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:55:58,675 [INFO]  * Restarting with stat
2025-06-26 22:55:59,946 [WARNING]  * Debugger is active!
2025-06-26 22:55:59,952 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:56:02,570 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:56:02,570 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:56:02,571 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:56:02,571 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:56:02,666 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:56:02,673 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 22:56:02,673 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 22:56:02,674 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:56:02,674 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:56:02,675 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:56:02,675 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:56:02,675 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:56:02,676 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:56:02,676 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:56:02,676 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:56:02,677 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:56:02,677 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:56:02,677 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:56:02,678 [INFO] 成功获取 6 条交易记录
2025-06-26 22:56:02,678 [ERROR] 查询交易记录失败: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 229, in _format_transactions_response
    for item in transactions.get('data', {}).get('data', []):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
2025-06-26 22:56:02,680 [INFO] dify_webhook 执行时间: 0.1102秒
2025-06-26 22:56:02,680 [INFO] 192.168.1.68 - - [26/Jun/2025 22:56:02] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:57:14,193 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 22:57:14,194 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 22:57:14,195 [INFO]  * Restarting with stat
2025-06-26 22:57:15,387 [WARNING]  * Debugger is active!
2025-06-26 22:57:15,392 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:57:16,364 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:57:16,364 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:57:16,365 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:57:16,365 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:57:16,449 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:57:16,454 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 22:57:16,455 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 22:57:16,455 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:57:16,455 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:57:16,456 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:57:16,456 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:57:16,456 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:57:16,457 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:57:16,457 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:57:16,457 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:57:16,458 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:57:16,458 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:57:16,459 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:57:16,459 [INFO] 成功获取 6 条交易记录
2025-06-26 22:57:16,460 [ERROR] 查询交易记录失败: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 224, in _format_transactions_response
    for item in transactions.get('data', {}).get('data', []):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
2025-06-26 22:57:16,462 [INFO] dify_webhook 执行时间: 0.0981秒
2025-06-26 22:57:16,462 [INFO] 192.168.1.68 - - [26/Jun/2025 22:57:16] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 22:59:06,984 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:59:07,020 [INFO]  * Restarting with stat
2025-06-26 22:59:08,165 [WARNING]  * Debugger is active!
2025-06-26 22:59:08,170 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:59:12,207 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\dify_handler.py', reloading
2025-06-26 22:59:12,247 [INFO]  * Restarting with stat
2025-06-26 22:59:13,423 [WARNING]  * Debugger is active!
2025-06-26 22:59:13,428 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 22:59:20,695 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:59:20,696 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 22:59:20,696 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 22:59:20,696 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 22:59:20,784 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 22:59:20,791 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 22:59:20,792 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 22:59:20,792 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 22:59:20,793 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 22:59:20,793 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 22:59:20,794 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 22:59:20,795 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 22:59:20,799 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 22:59:20,800 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 22:59:20,800 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 22:59:20,801 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 22:59:20,802 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 22:59:20,803 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 22:59:20,803 [INFO] 成功获取 6 条交易记录
2025-06-26 22:59:20,803 [ERROR] 查询交易记录失败: name 'datetime' is not defined
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\dify_handler.py", line 125, in _handle_transactions_request
    formatted_result = self._format_transactions_response(transactions)
  File "D:\fleshrecord\handlers\dify_handler.py", line 262, in _format_transactions_response
    'timestamp': datetime.now().isoformat()
                 ^^^^^^^^
NameError: name 'datetime' is not defined. Did you forget to import 'datetime'?
2025-06-26 22:59:20,805 [INFO] dify_webhook 执行时间: 0.1105秒
2025-06-26 22:59:20,809 [INFO] 192.168.1.68 - - [26/Jun/2025 22:59:20] "[35m[1mPOST /dify_webhook HTTP/1.1[0m" 500 -
2025-06-26 23:00:09,974 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:00:09,975 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:00:09,976 [INFO]  * Restarting with stat
2025-06-26 23:00:11,249 [WARNING]  * Debugger is active!
2025-06-26 23:00:11,257 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:00:12,703 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 23:00:12,703 [INFO] 查询交易记录，参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 23:00:12,704 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 23:00:12,704 [INFO] 请求参数: {'start': '2025-06-21', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 23:00:12,785 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-21&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 23:00:12,791 [INFO] 获取第 1 页，本页 21 条记录，总计 21 条
2025-06-26 23:00:12,791 [INFO] 成功查询到 21 条交易记录，API总共 21 条
2025-06-26 23:00:12,791 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 23:00:12,792 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 23:00:12,792 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 23:00:12,793 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 23:00:12,793 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 23:00:12,793 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 23:00:12,794 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 23:00:12,794 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 23:00:12,794 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 23:00:12,795 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 23:00:12,795 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 23:00:12,795 [INFO] 成功获取 6 条交易记录
2025-06-26 23:00:12,796 [INFO] dify_webhook 执行时间: 0.0929秒
2025-06-26 23:00:12,797 [INFO] 192.168.1.68 - - [26/Jun/2025 23:00:12] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 23:00:19,327 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-1', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 23:00:19,328 [INFO] 查询交易记录，参数: {'start': '2025-06-1', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理'}
2025-06-26 23:00:19,328 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 23:00:19,328 [INFO] 请求参数: {'start': '2025-06-1', 'end': '2025-06-26', 'type': 'withdrawal', 'category': '医药护理', 'page': 1, 'limit': 200}
2025-06-26 23:00:19,421 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-1&end=2025-06-26&type=withdrawal&category=%E5%8C%BB%E8%8D%AF%E6%8A%A4%E7%90%86&page=1&limit=200
2025-06-26 23:00:19,425 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-26 23:00:19,426 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-26 23:00:19,427 [INFO] 开始类目过滤，目标类目: 医药护理
2025-06-26 23:00:19,428 [INFO] 交易 1: 日期:2025-06-26T00:00:00+08:00, 描述:claude大模型使用费, 金额:155.020000000000, 类目:生活爱好
2025-06-26 23:00:19,429 [INFO] 交易 2: 日期:2025-06-26T00:00:00+08:00, 描述:买药, 金额:3.500000000000, 类目:医药护理
2025-06-26 23:00:19,431 [INFO] 交易 3: 日期:2025-06-26T00:00:00+08:00, 描述:违停罚款, 金额:200.000000000000, 类目:交通通讯
2025-06-26 23:00:19,432 [INFO] 交易 4: 日期:2025-06-25T00:00:00+08:00, 描述:给多多购买自动铅笔, 金额:8.000000000000, 类目:购物支出
2025-06-26 23:00:19,434 [INFO] 交易 5: 日期:2025-06-25T00:00:00+08:00, 描述:6月物业管理费, 金额:861.600000000000, 类目:家庭娱乐
2025-06-26 23:00:19,435 [INFO] 交易 6: 日期:2025-06-25T00:00:00+08:00, 描述:交停车费, 金额:15.000000000000, 类目:交通通讯
2025-06-26 23:00:19,435 [INFO] 交易 7: 日期:2025-06-24T00:00:00+08:00, 描述:购买敦煌画册, 金额:469.000000000000, 类目:购物支出
2025-06-26 23:00:19,444 [INFO] 交易 8: 日期:2025-06-24T00:00:00+08:00, 描述:7月停车费, 金额:550.000000000000, 类目:交通通讯
2025-06-26 23:00:19,449 [INFO] 交易 9: 日期:2025-06-23T20:00:00+08:00, 描述:美团外卖-黄皮冰柠茶, 金额:25.000000000000, 类目:生活饮食
2025-06-26 23:00:19,451 [INFO] 交易 10: 日期:2025-06-23T19:00:00+08:00, 描述:4斤小龙虾外卖, 金额:84.800000000000, 类目:生活饮食
2025-06-26 23:00:19,453 [INFO] 成功获取 6 条交易记录
2025-06-26 23:00:19,454 [INFO] dify_webhook 执行时间: 0.1264秒
2025-06-26 23:00:19,454 [INFO] 192.168.1.68 - - [26/Jun/2025 23:00:19] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 23:01:01,722 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 23:01:01,919 [INFO] 成功获取 1 个预算
2025-06-26 23:01:01,919 [INFO] dify_webhook 执行时间: 0.1969秒
2025-06-26 23:01:01,920 [INFO] 192.168.1.68 - - [26/Jun/2025 23:01:01] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 23:02:30,217 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-26 23:02:30,432 [INFO] 成功获取 1 个预算
2025-06-26 23:02:30,432 [INFO] dify_webhook 执行时间: 0.2155秒
2025-06-26 23:02:30,433 [INFO] 192.168.1.68 - - [26/Jun/2025 23:02:30] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-26 23:03:44,359 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:03:44,368 [INFO] 192.168.1.68 - - [26/Jun/2025 23:03:44] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:03:44,602 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:03:44,609 [INFO] 192.168.1.68 - - [26/Jun/2025 23:03:44] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:03:44,815 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:03:44,825 [INFO] 192.168.1.68 - - [26/Jun/2025 23:03:44] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:03:44,960 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:03:44,970 [INFO] 192.168.1.195 - - [26/Jun/2025 23:03:44] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:03:45,104 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:03:45,113 [INFO] 192.168.1.68 - - [26/Jun/2025 23:03:45] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,106 [ERROR] add_transaction 执行失败: 'TransactionHandler' object has no attribute 'handle_add_transaction'
2025-06-26 23:05:13,113 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,269 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:05:13,277 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,463 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:05:13,471 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,712 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:05:13,721 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:05:13,956 [ERROR] budgets 执行失败: 'BudgetHandler' object has no attribute 'handle_budget_request'
2025-06-26 23:05:13,968 [INFO] 192.168.1.68 - - [26/Jun/2025 23:05:13] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-26 23:06:11,848 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:06:11,856 [INFO] 192.168.1.195 - - [26/Jun/2025 23:06:11] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:06:34,174 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 23:06:34,222 [INFO]  * Restarting with stat
2025-06-26 23:06:35,578 [WARNING]  * Debugger is active!
2025-06-26 23:06:35,585 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:06:57,120 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:06:57,121 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:06:57,122 [INFO]  * Restarting with stat
2025-06-26 23:06:58,255 [WARNING]  * Debugger is active!
2025-06-26 23:06:58,260 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:07:15,742 [ERROR] 获取预算信息时发生错误: 'BudgetQueryParams' object has no attribute 'budget_id'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 55, in get_budgets_endpoint
    if query_params.budget_id:
       ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'BudgetQueryParams' object has no attribute 'budget_id'
2025-06-26 23:07:15,744 [INFO] budgets 执行时间: 0.0024秒
2025-06-26 23:07:15,745 [INFO] 192.168.1.68 - - [26/Jun/2025 23:07:15] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-26 23:08:52,397 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:08:52,398 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:08:52,402 [INFO]  * Restarting with stat
2025-06-26 23:08:53,552 [WARNING]  * Debugger is active!
2025-06-26 23:08:53,558 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:08:55,989 [INFO] 成功获取 1 个预算
2025-06-26 23:08:55,989 [INFO] budgets 执行时间: 0.1758秒
2025-06-26 23:08:55,990 [INFO] 192.168.1.68 - - [26/Jun/2025 23:08:55] "GET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1" 200 -
2025-06-26 23:09:16,886 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:09:16,889 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:09:16,896 [INFO]  * Restarting with stat
2025-06-26 23:09:18,051 [WARNING]  * Debugger is active!
2025-06-26 23:09:18,056 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:09:36,227 [ERROR] add_transaction 执行失败: 'TransactionHandler' object has no attribute 'handle_add_transaction'
2025-06-26 23:09:36,235 [INFO] 192.168.1.68 - - [26/Jun/2025 23:09:36] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:10:10,332 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-26 23:10:10,371 [INFO]  * Restarting with stat
2025-06-26 23:10:11,606 [WARNING]  * Debugger is active!
2025-06-26 23:10:11,612 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:10:32,128 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:10:32,128 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:10:32,130 [INFO]  * Restarting with stat
2025-06-26 23:10:33,967 [WARNING]  * Debugger is active!
2025-06-26 23:10:33,972 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:10:35,408 [INFO] 开始处理交易请求 [ID: e0b5adb7]
2025-06-26 23:10:35,409 [WARNING] [e0b5adb7] 交易数据验证失败: 5 validation errors for TransactionRequest
amount
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
description
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
date
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
source_account
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
destination_account
  Field required [type=missing, input_value={'transactions': [{'type'...ation_name': '餐饮'}]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-26 23:10:35,410 [INFO] add_transaction 执行时间: 0.0018秒
2025-06-26 23:10:35,411 [INFO] 192.168.1.68 - - [26/Jun/2025 23:10:35] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-26 23:12:06,294 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:12:06,296 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:12:06,298 [INFO]  * Restarting with stat
2025-06-26 23:12:07,600 [WARNING]  * Debugger is active!
2025-06-26 23:12:07,605 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:12:09,477 [INFO] 开始处理交易请求 [ID: 75451bd8]
2025-06-26 23:12:09,479 [WARNING] [75451bd8] 交易数据验证失败: 2 validation errors for TransactionRequest
source_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...ination_name': '餐饮'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
destination_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...ination_name': '餐饮'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-26 23:12:09,480 [INFO] add_transaction 执行时间: 0.0035秒
2025-06-26 23:12:09,481 [INFO] 192.168.1.68 - - [26/Jun/2025 23:12:09] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-26 23:13:42,970 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:13:42,971 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:13:42,972 [INFO]  * Restarting with stat
2025-06-26 23:13:44,210 [WARNING]  * Debugger is active!
2025-06-26 23:13:44,215 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:13:45,225 [INFO] 开始处理交易请求 [ID: 37096534]
2025-06-26 23:13:45,229 [ERROR] [37096534] 处理交易请求时发生错误: 'TransactionRequest' object has no attribute 'type'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\transaction_handler.py", line 42, in add_transaction_endpoint
    self._log_transaction_info(transaction_data, transaction_id)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\transaction_handler.py", line 142, in _log_transaction_info
    'transaction_type': transaction_data.type,
                        ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'TransactionRequest' object has no attribute 'type'
2025-06-26 23:13:45,231 [INFO] add_transaction 执行时间: 0.0057秒
2025-06-26 23:13:45,232 [INFO] 192.168.1.68 - - [26/Jun/2025 23:13:45] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:14:55,583 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-26 23:14:55,625 [INFO]  * Restarting with stat
2025-06-26 23:14:56,766 [WARNING]  * Debugger is active!
2025-06-26 23:14:56,771 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:14:57,792 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-26 23:14:57,893 [INFO]  * Restarting with stat
2025-06-26 23:14:59,508 [WARNING]  * Debugger is active!
2025-06-26 23:14:59,522 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:15:23,561 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:15:23,561 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:15:23,563 [INFO]  * Restarting with stat
2025-06-26 23:15:24,777 [WARNING]  * Debugger is active!
2025-06-26 23:15:24,783 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:15:26,843 [INFO] 开始处理交易请求 [ID: 3fcab472]
2025-06-26 23:15:26,846 [ERROR] [3fcab472] 处理交易请求时发生错误: 'NoneType' object is not subscriptable
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\transaction_handler.py", line 42, in add_transaction_endpoint
    self._log_transaction_info(transaction_data, transaction_id)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\transaction_handler.py", line 144, in _log_transaction_info
    'category': getattr(transaction_data, 'category', 'N/A')[:30],
                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
TypeError: 'NoneType' object is not subscriptable
2025-06-26 23:15:26,848 [INFO] add_transaction 执行时间: 0.0045秒
2025-06-26 23:15:26,849 [INFO] 192.168.1.68 - - [26/Jun/2025 23:15:26] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:16:19,264 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:16:19,267 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:16:19,273 [INFO]  * Restarting with stat
2025-06-26 23:16:20,402 [WARNING]  * Debugger is active!
2025-06-26 23:16:20,407 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:16:23,355 [INFO] 开始处理交易请求 [ID: ca78b81c]
2025-06-26 23:16:23,358 [INFO] [ca78b81c] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:16:23,358 [ERROR] [ca78b81c] 处理交易请求时发生错误: 'FireflyService' object has no attribute 'create_transaction'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\transaction_handler.py", line 45, in add_transaction_endpoint
    result = self.firefly_service.create_transaction(transaction_data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'FireflyService' object has no attribute 'create_transaction'. Did you mean: 'add_transaction'?
2025-06-26 23:16:23,359 [INFO] add_transaction 执行时间: 0.0046秒
2025-06-26 23:16:23,360 [INFO] 192.168.1.68 - - [26/Jun/2025 23:16:23] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-26 23:17:29,908 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:17:29,909 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:17:29,910 [INFO]  * Restarting with stat
2025-06-26 23:17:31,142 [WARNING]  * Debugger is active!
2025-06-26 23:17:31,147 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:17:32,231 [INFO] 开始处理交易请求 [ID: 682bd4ba]
2025-06-26 23:17:32,234 [INFO] [682bd4ba] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:17:32,235 [ERROR] 未知错误 - 添加交易失败: 'TransactionRequest' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\fleshrecord\services\firefly_service.py", line 109, in add_transaction
    self.logger.info(f"添加交易记录: {transaction_data.get('description', 'N/A')}")
                                      ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\yujq\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'TransactionRequest' object has no attribute 'get'
2025-06-26 23:17:32,237 [INFO] [682bd4ba] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:17:32,237 [INFO] add_transaction 执行时间: 0.0063秒
2025-06-26 23:17:32,238 [INFO] 192.168.1.68 - - [26/Jun/2025 23:17:32] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:18:52,614 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:18:52,614 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:18:52,616 [INFO]  * Restarting with stat
2025-06-26 23:18:53,960 [WARNING]  * Debugger is active!
2025-06-26 23:18:53,967 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:18:55,771 [INFO] 开始处理交易请求 [ID: 0c94f4be]
2025-06-26 23:18:55,773 [INFO] [0c94f4be] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:18:55,774 [INFO] 添加交易记录: 午饭
2025-06-26 23:18:55,854 [ERROR] HTTP错误 - 添加交易失败: 422 Client Error: Unprocessable Content for url: http://192.168.1.195:9941/api/v1/transactions
2025-06-26 23:18:55,856 [INFO] [0c94f4be] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:18:55,857 [INFO] add_transaction 执行时间: 0.0861秒
2025-06-26 23:18:55,858 [INFO] 192.168.1.68 - - [26/Jun/2025 23:18:55] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:23:35,658 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:23:35,659 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:23:35,661 [INFO]  * Restarting with stat
2025-06-26 23:23:36,876 [WARNING]  * Debugger is active!
2025-06-26 23:23:36,883 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:23:38,155 [INFO] 开始处理交易请求 [ID: c50b2170]
2025-06-26 23:23:38,158 [INFO] [c50b2170] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:23:38,158 [INFO] 添加交易记录: 午饭
2025-06-26 23:23:38,158 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:23:38,419 [INFO] 交易添加成功: 181
2025-06-26 23:23:38,420 [INFO] [c50b2170] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:23:38,420 [INFO] add_transaction 执行时间: 0.2653秒
2025-06-26 23:23:38,421 [INFO] 192.168.1.68 - - [26/Jun/2025 23:23:38] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:23:38,432 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:23:38,494 [INFO] 192.168.1.195 - - [26/Jun/2025 23:23:38] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:23:38,524 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:23:38,544 [INFO] 192.168.1.195 - - [26/Jun/2025 23:23:38] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:24:11,191 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:24:11,199 [INFO] 192.168.1.195 - - [26/Jun/2025 23:24:11] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:24:11,226 [ERROR] webhook 执行失败: 'WebhookHandler' object has no attribute 'handle_webhook_request'
2025-06-26 23:24:11,239 [INFO] 192.168.1.195 - - [26/Jun/2025 23:24:11] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:27:03,521 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:27:03,522 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:27:03,523 [INFO]  * Restarting with stat
2025-06-26 23:27:04,689 [WARNING]  * Debugger is active!
2025-06-26 23:27:04,694 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:27:08,220 [ERROR] 签名验证过程中发生错误: 'NotificationHandler' object has no attribute 'WEBHOOK_SECRET'
2025-06-26 23:27:08,220 [ERROR] Webhook签名验证失败
2025-06-26 23:27:08,220 [ERROR] Webhook处理过程中发生未知错误: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:08,221 [ERROR] webhook 执行失败: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:08,238 [INFO] 192.168.1.195 - - [26/Jun/2025 23:27:08] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:27:08,345 [ERROR] 签名验证过程中发生错误: 'NotificationHandler' object has no attribute 'WEBHOOK_SECRET'
2025-06-26 23:27:08,345 [ERROR] Webhook签名验证失败
2025-06-26 23:27:08,345 [ERROR] Webhook处理过程中发生未知错误: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:08,346 [ERROR] webhook 执行失败: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:08,359 [INFO] 192.168.1.195 - - [26/Jun/2025 23:27:08] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:27:17,851 [INFO] 开始处理交易请求 [ID: b244a744]
2025-06-26 23:27:17,854 [INFO] [b244a744] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:27:17,855 [INFO] 添加交易记录: 午饭
2025-06-26 23:27:17,855 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:27:18,180 [INFO] 交易添加成功: 184
2025-06-26 23:27:18,181 [INFO] [b244a744] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:27:18,181 [INFO] add_transaction 执行时间: 0.3306秒
2025-06-26 23:27:18,182 [INFO] 192.168.1.68 - - [26/Jun/2025 23:27:18] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:27:18,193 [ERROR] 签名验证过程中发生错误: 'NotificationHandler' object has no attribute 'WEBHOOK_SECRET'
2025-06-26 23:27:18,193 [ERROR] Webhook签名验证失败
2025-06-26 23:27:18,193 [ERROR] Webhook处理过程中发生未知错误: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:18,194 [ERROR] webhook 执行失败: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:18,232 [INFO] 192.168.1.195 - - [26/Jun/2025 23:27:18] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:27:18,251 [ERROR] 签名验证过程中发生错误: 'NotificationHandler' object has no attribute 'WEBHOOK_SECRET'
2025-06-26 23:27:18,252 [ERROR] Webhook签名验证失败
2025-06-26 23:27:18,252 [ERROR] Webhook处理过程中发生未知错误: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:18,252 [ERROR] webhook 执行失败: type object 'APIResponseBuilder' has no attribute 'error'
2025-06-26 23:27:18,283 [INFO] 192.168.1.195 - - [26/Jun/2025 23:27:18] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:32:01,658 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:32:01,659 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:32:01,661 [INFO]  * Restarting with stat
2025-06-26 23:32:02,841 [WARNING]  * Debugger is active!
2025-06-26 23:32:02,846 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:32:04,621 [INFO] 开始处理交易请求 [ID: f65beffa]
2025-06-26 23:32:04,625 [INFO] [f65beffa] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:32:04,625 [INFO] 添加交易记录: 午饭
2025-06-26 23:32:04,625 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:32:04,878 [INFO] 交易添加成功: 185
2025-06-26 23:32:04,879 [INFO] [f65beffa] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:32:04,879 [INFO] add_transaction 执行时间: 0.2581秒
2025-06-26 23:32:04,880 [INFO] 192.168.1.68 - - [26/Jun/2025 23:32:04] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:32:04,889 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:32:04,890 [ERROR] webhook 执行失败: APIResponseBuilder.error_response() got an unexpected keyword argument 'status_code'
2025-06-26 23:32:04,929 [INFO] 192.168.1.195 - - [26/Jun/2025 23:32:04] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:32:04,952 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:32:04,955 [ERROR] webhook 执行失败: APIResponseBuilder.error_response() got an unexpected keyword argument 'status_code'
2025-06-26 23:32:04,999 [INFO] 192.168.1.195 - - [26/Jun/2025 23:32:04] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-26 23:33:44,158 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:33:44,158 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:33:44,160 [INFO]  * Restarting with stat
2025-06-26 23:33:45,406 [WARNING]  * Debugger is active!
2025-06-26 23:33:45,412 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:33:46,198 [INFO] 开始处理交易请求 [ID: b9e0d6ba]
2025-06-26 23:33:46,201 [INFO] [b9e0d6ba] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:33:46,201 [INFO] 添加交易记录: 午饭
2025-06-26 23:33:46,201 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:33:46,586 [INFO] 交易添加成功: 186
2025-06-26 23:33:46,587 [INFO] [b9e0d6ba] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:33:46,587 [INFO] add_transaction 执行时间: 0.3896秒
2025-06-26 23:33:46,588 [INFO] 192.168.1.68 - - [26/Jun/2025 23:33:46] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:33:46,600 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:46,601 [INFO] webhook 执行时间: 0.0006秒
2025-06-26 23:33:46,601 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:46] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:33:46,620 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:46,620 [INFO] webhook 执行时间: 0.0012秒
2025-06-26 23:33:46,621 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:46] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:33:50,344 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:50,345 [INFO] webhook 执行时间: 0.0480秒
2025-06-26 23:33:50,345 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:50] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:33:50,363 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:50,363 [INFO] webhook 执行时间: 0.0006秒
2025-06-26 23:33:50,364 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:50] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:33:50,381 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Amount must be a number
2025-06-26 23:33:50,382 [INFO] webhook 执行时间: 0.0005秒
2025-06-26 23:33:50,382 [INFO] 192.168.1.195 - - [26/Jun/2025 23:33:50] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:41:33,714 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:41:33,715 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:41:33,717 [INFO]  * Restarting with stat
2025-06-26 23:41:35,023 [WARNING]  * Debugger is active!
2025-06-26 23:41:35,028 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:41:36,226 [INFO] 开始处理交易请求 [ID: 5e3e157c]
2025-06-26 23:41:36,229 [INFO] [5e3e157c] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:41:36,229 [INFO] 添加交易记录: 午饭
2025-06-26 23:41:36,230 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '35.0', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-26 23:41:36,536 [INFO] 交易添加成功: 187
2025-06-26 23:41:36,536 [INFO] [5e3e157c] 交易创建成功: amount=35.0, description=午饭
2025-06-26 23:41:36,537 [INFO] add_transaction 执行时间: 0.3106秒
2025-06-26 23:41:36,538 [INFO] 192.168.1.68 - - [26/Jun/2025 23:41:36] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:41:36,545 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750952496,v1=5b18f3d668e796e2f4217cef9050fa353dd9daf28c335956c4365da97d8838e6', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-26 23:41:36,546 [INFO] Received data: {"uuid": "c21040c3-1a46-4a7a-9b57-a0e1608d985c", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 186, "created_at": "2025-06-26T23:33:46+08:00", "updated_at": "2025-06-26T23:33:46+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "186", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": null, "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "940d7d01ff5b9791aa135348c122d8ef6ee45a536f3c1a9a60c15529d1a7ef05", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/186"}]}}
2025-06-26 23:41:36,546 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：35.0，分类：None，预算：None。
2025-06-26 23:41:36,547 [INFO] webhook 执行时间: 0.0016秒
2025-06-26 23:41:36,547 [INFO] 192.168.1.195 - - [26/Jun/2025 23:41:36] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:41:36,565 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750952496,v1=95697d7916ead4b815e096054d8e91a7e178e2dcfab63b4ca6ae55610c3369c4', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-26 23:41:36,566 [INFO] Received data: {"uuid": "13ead7dd-5844-480e-9808-a50d5d7b7f68", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 187, "created_at": "2025-06-26T23:41:36+08:00", "updated_at": "2025-06-26T23:41:36+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "187", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": null, "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "940d7d01ff5b9791aa135348c122d8ef6ee45a536f3c1a9a60c15529d1a7ef05", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/187"}]}}
2025-06-26 23:41:36,566 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：35.0，分类：None，预算：None。
2025-06-26 23:41:36,567 [INFO] webhook 执行时间: 0.0015秒
2025-06-26 23:41:36,567 [INFO] 192.168.1.195 - - [26/Jun/2025 23:41:36] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:45:13,131 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:45:13,171 [INFO]  * Restarting with stat
2025-06-26 23:45:14,446 [WARNING]  * Debugger is active!
2025-06-26 23:45:14,452 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:45:15,472 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:45:15,576 [INFO]  * Restarting with stat
2025-06-26 23:45:17,340 [WARNING]  * Debugger is active!
2025-06-26 23:45:17,345 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:45:27,441 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:45:27,535 [INFO]  * Restarting with stat
2025-06-26 23:45:28,931 [WARNING]  * Debugger is active!
2025-06-26 23:45:28,937 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:45:30,961 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:45:30,998 [INFO]  * Restarting with stat
2025-06-26 23:45:32,302 [WARNING]  * Debugger is active!
2025-06-26 23:45:32,307 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:46:27,482 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750952787,v1=4415b1cf74fc81b3788e251c9afe56d4d91acca9ff16e065de61acb6e49acb66', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1739'}
2025-06-26 23:46:27,483 [INFO] Received data: {"uuid": "4c9d8577-cd1a-4208-82a7-e100aa09c211", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 188, "created_at": "2025-06-26T23:46:27+08:00", "updated_at": "2025-06-26T23:46:27+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "188", "type": "withdrawal", "date": "2025-06-26T20:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": null, "description": "购买书籍", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "1", "budget_name": "周预算", "category_id": "3", "category_name": "生活爱好", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["读书"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "ea0b3758e6fcbd9503886418263cd0c8f7402824172b0ea9780d2e1ddac2ab5a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/188"}]}}
2025-06-26 23:46:27,484 [INFO] Webhook处理成功: 您新增了一笔交易：购买书籍, 费用：[FILTERED]，分类：生活爱好，预算：周预算。
2025-06-26 23:46:27,484 [INFO] webhook 执行时间: 0.0032秒
2025-06-26 23:46:27,486 [INFO] 192.168.1.195 - - [26/Jun/2025 23:46:27] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:47:01,784 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-26 23:47:01,840 [INFO]  * Restarting with stat
2025-06-26 23:49:09,592 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:49:09,593 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:49:09,594 [INFO]  * Restarting with stat
2025-06-26 23:49:10,848 [WARNING]  * Debugger is active!
2025-06-26 23:49:10,855 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:49:32,564 [INFO] 开始处理交易请求 [ID: 69635aca]
2025-06-26 23:49:32,569 [WARNING] [69635aca] 交易数据验证失败: 2 validation errors for TransactionRequest
date
  Value error, 日期格式应为 YYYY-MM-DD [type=value_error, input_value='2025-06-26T20:00:00+08:00', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
destination_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...卡（交通银行）'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-26 23:49:32,570 [INFO] add_transaction 执行时间: 0.0054秒
2025-06-26 23:49:32,570 [INFO] 192.168.1.68 - - [26/Jun/2025 23:49:32] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-26 23:49:32,919 [INFO] 成功获取 1 个预算
2025-06-26 23:49:32,919 [INFO] budgets 执行时间: 0.2002秒
2025-06-26 23:49:32,920 [INFO] 192.168.1.68 - - [26/Jun/2025 23:49:32] "GET /budgets HTTP/1.1" 200 -
2025-06-26 23:56:10,256 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:56:10,257 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:56:10,263 [INFO]  * Restarting with stat
2025-06-26 23:56:11,531 [WARNING]  * Debugger is active!
2025-06-26 23:56:11,536 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:56:35,798 [INFO] 开始处理交易请求 [ID: 667896a9]
2025-06-26 23:56:35,799 [WARNING] [667896a9] 交易数据验证失败: 1 validation error for TransactionRequest
destination_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...卡（交通银行）'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-26 23:56:35,800 [INFO] add_transaction 执行时间: 0.0020秒
2025-06-26 23:56:35,800 [INFO] 192.168.1.68 - - [26/Jun/2025 23:56:35] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-26 23:56:36,119 [INFO] 成功获取 1 个预算
2025-06-26 23:56:36,120 [INFO] budgets 执行时间: 0.1882秒
2025-06-26 23:56:36,121 [INFO] 192.168.1.68 - - [26/Jun/2025 23:56:36] "GET /budgets HTTP/1.1" 200 -
2025-06-26 23:59:11,886 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-26 23:59:11,887 [INFO] [33mPress CTRL+C to quit[0m
2025-06-26 23:59:11,889 [INFO]  * Restarting with stat
2025-06-26 23:59:13,054 [WARNING]  * Debugger is active!
2025-06-26 23:59:13,059 [INFO]  * Debugger PIN: 696-613-603
2025-06-26 23:59:26,347 [INFO] 开始处理交易请求 [ID: 2a23227a]
2025-06-26 23:59:26,347 [INFO] [2a23227a] 交易数据验证成功: {'amount': '200.0', 'description': '购书', 'source_account': '信用卡（交通银行）', 'destination_account': 'N/A', 'category': 'N/A', 'budget': 'N/A'}
2025-06-26 23:59:26,347 [INFO] 添加交易记录: 购书
2025-06-26 23:59:26,348 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-26', 'amount': '200.0', 'description': '购书', 'source_name': '信用卡（交通银行）', 'destination_name': ''}]}
2025-06-26 23:59:26,631 [INFO] 交易添加成功: 189
2025-06-26 23:59:26,632 [INFO] [2a23227a] 交易创建成功: amount=200.0, description=购书
2025-06-26 23:59:26,633 [INFO] add_transaction 执行时间: 0.2866秒
2025-06-26 23:59:26,634 [INFO] 192.168.1.68 - - [26/Jun/2025 23:59:26] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-26 23:59:26,684 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750953566,v1=2394e78b54d57b45532aaf0c7621aeadf74a8a1671de75b32da52405f104890a', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1673'}
2025-06-26 23:59:26,685 [INFO] Received data: {"uuid": "b4f258ba-71e9-4979-8126-70cdf0fe3fd7", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 189, "created_at": "2025-06-26T23:59:26+08:00", "updated_at": "2025-06-26T23:59:26+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "189", "type": "withdrawal", "date": "2025-06-26T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "购书", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "ff7978f25b78ba9f59a02403f76ee89c5f98f523e7e42fa3ee1beb4865a284da", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/189"}]}}
2025-06-26 23:59:26,686 [INFO] Webhook处理成功: 您新增了一笔交易：购书, 费用：[FILTERED]，分类：None，预算：None。
2025-06-26 23:59:26,689 [INFO] webhook 执行时间: 0.0047秒
2025-06-26 23:59:26,690 [INFO] 192.168.1.195 - - [26/Jun/2025 23:59:26] "POST /webhook HTTP/1.1" 200 -
2025-06-26 23:59:27,056 [INFO] 成功获取 1 个预算
2025-06-26 23:59:27,056 [INFO] budgets 执行时间: 0.2101秒
2025-06-26 23:59:27,057 [INFO] 192.168.1.68 - - [26/Jun/2025 23:59:27] "GET /budgets HTTP/1.1" 200 -
2025-06-27 00:08:04,302 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://192.168.1.68:9012
2025-06-27 00:08:04,304 [INFO] [33mPress CTRL+C to quit[0m
2025-06-27 00:08:04,305 [INFO]  * Restarting with stat
2025-06-27 00:08:05,411 [WARNING]  * Debugger is active!
2025-06-27 00:08:05,416 [INFO]  * Debugger PIN: 696-613-603
2025-06-27 00:08:28,651 [INFO] 开始处理交易请求 [ID: 98ca2bdb]
2025-06-27 00:08:28,652 [INFO] [98ca2bdb] 交易数据验证成功: {'amount': '200.0', 'description': '购买书籍', 'source_account': '信用卡（交通银行）', 'destination_account': 'N/A', 'category': '生活爱好', 'budget': '周预算'}
2025-06-27 00:08:28,652 [INFO] 添加交易记录: 购买书籍
2025-06-27 00:08:28,653 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-27', 'amount': '200.0', 'description': '购买书籍', 'source_name': '信用卡（交通银行）', 'destination_name': '', 'category_name': '生活爱好', 'budget_name': '周预算', 'tags': ['书籍']}]}
2025-06-27 00:08:29,330 [INFO] 交易添加成功: 190
2025-06-27 00:08:29,331 [INFO] [98ca2bdb] 交易创建成功: amount=200.0, description=购买书籍
2025-06-27 00:08:29,331 [INFO] add_transaction 执行时间: 0.6799秒
2025-06-27 00:08:29,332 [INFO] 192.168.1.68 - - [27/Jun/2025 00:08:29] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-27 00:08:29,353 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750954109,v1=c626ebafa2a0364c7943873ef693101c3061989e0ce1543b38e03cc5de5a2e55', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1739'}
2025-06-27 00:08:29,354 [INFO] Received data: {"uuid": "ab500bd2-297f-4e61-83dd-abc561e60c6d", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 190, "created_at": "2025-06-27T00:08:28+08:00", "updated_at": "2025-06-27T00:08:28+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "190", "type": "withdrawal", "date": "2025-06-27T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "购买书籍", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "1", "budget_name": "周预算", "category_id": "3", "category_name": "生活爱好", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["书籍"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "013755820690b9797d4db5897bf3bc06326fa291962ab0bcc297a04628dc6d7a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/190"}]}}
2025-06-27 00:08:29,358 [INFO] Webhook处理成功: 您新增了一笔交易：购买书籍, 费用：[FILTERED]，分类：生活爱好，预算：周预算。
2025-06-27 00:08:29,359 [INFO] webhook 执行时间: 0.0061秒
2025-06-27 00:08:29,363 [INFO] 192.168.1.195 - - [27/Jun/2025 00:08:29] "POST /webhook HTTP/1.1" 200 -
2025-06-27 00:08:29,651 [INFO] 成功获取 1 个预算
2025-06-27 00:08:29,651 [INFO] budgets 执行时间: 0.1753秒
2025-06-27 00:08:29,652 [INFO] 192.168.1.68 - - [27/Jun/2025 00:08:29] "GET /budgets HTTP/1.1" 200 -
2025-06-27 00:09:17,089 [INFO] Dify webhook请求: endpoint=/transactions, query_parameters={'start': '2025-06-01', 'end': '2025-06-27', 'type': 'withdrawal', 'limit': 50}
2025-06-27 00:09:17,089 [INFO] 查询交易记录，参数: {'start': '2025-06-01', 'end': '2025-06-27', 'type': 'withdrawal', 'limit': 50}
2025-06-27 00:09:17,090 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-27 00:09:17,090 [INFO] 请求参数: {'start': '2025-06-01', 'end': '2025-06-27', 'type': 'withdrawal', 'limit': 200, 'page': 1}
2025-06-27 00:09:17,209 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-01&end=2025-06-27&type=withdrawal&limit=200&page=1
2025-06-27 00:09:17,214 [INFO] 获取第 1 页，本页 73 条记录，总计 73 条
2025-06-27 00:09:17,215 [INFO] 成功查询到 73 条交易记录，API总共 73 条
2025-06-27 00:09:17,215 [INFO] 成功获取 6 条交易记录
2025-06-27 00:09:17,216 [INFO] dify_webhook 执行时间: 0.1270秒
2025-06-27 00:09:17,216 [INFO] 192.168.1.68 - - [27/Jun/2025 00:09:17] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-27 00:10:16,654 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-27'}
2025-06-27 00:10:16,842 [INFO] 成功获取 1 个预算
2025-06-27 00:10:16,843 [INFO] dify_webhook 执行时间: 0.1890秒
2025-06-27 00:10:16,843 [INFO] 192.168.1.68 - - [27/Jun/2025 00:10:16] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-27 00:18:29,757 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1750954709,v1=97132c7222e43864ef1d5ef4489bdc987bcb2880dcb6509ea8f5ac89d9174d62', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1689'}
2025-06-27 00:18:29,758 [INFO] Received data: {"uuid": "4cb544e8-46b6-47f1-9c40-182facc2f83a", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 191, "created_at": "2025-06-27T00:18:29+08:00", "updated_at": "2025-06-27T00:18:29+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "191", "type": "withdrawal", "date": "2025-06-27T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "购买数据", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "3", "category_name": "生活爱好", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["数据"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "9ade69bdb0a97c189ad8efe97bec266af150d9a22b52bdd84479b2868cd2e9f2", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/191"}]}}
2025-06-27 00:18:29,758 [INFO] Webhook处理成功: 您新增了一笔交易：购买数据, 费用：[FILTERED]，分类：生活爱好，预算：None。
2025-06-27 00:18:29,758 [INFO] webhook 执行时间: 0.0020秒
2025-06-27 00:18:29,759 [INFO] 192.168.1.195 - - [27/Jun/2025 00:18:29] "POST /webhook HTTP/1.1" 200 -
2025-06-27 00:18:30,095 [INFO] 成功获取 1 个预算
2025-06-27 00:18:30,096 [INFO] budgets 执行时间: 0.1966秒
2025-06-27 00:18:30,096 [INFO] 192.168.1.68 - - [27/Jun/2025 00:18:30] "GET /budgets HTTP/1.1" 200 -
2025-06-28 20:34:29,004 [INFO] Starting Flask application v0.2.0
2025-06-28 20:34:30,537 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 20:34:30,537 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 20:34:30,540 [INFO]  * Restarting with stat
2025-06-28 20:34:31,742 [INFO] Starting Flask application v0.2.0
2025-06-28 20:34:31,761 [WARNING]  * Debugger is active!
2025-06-28 20:34:31,766 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:00:30,414 [INFO] Starting Flask application v0.2.0
2025-06-28 21:00:31,732 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 21:00:31,732 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 21:00:31,736 [INFO]  * Restarting with stat
2025-06-28 21:00:32,932 [INFO] Starting Flask application v0.2.0
2025-06-28 21:00:32,974 [WARNING]  * Debugger is active!
2025-06-28 21:00:32,989 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:21:31,887 [INFO] Starting Flask application v0.2.0
2025-06-28 21:21:33,203 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 21:21:33,204 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 21:21:33,207 [INFO]  * Restarting with stat
2025-06-28 21:21:34,223 [INFO] Starting Flask application v0.2.0
2025-06-28 21:21:34,286 [WARNING]  * Debugger is active!
2025-06-28 21:21:34,297 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:21:57,331 [INFO] 192.168.1.68 - - [28/Jun/2025 21:21:57] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 21:24:59,121 [INFO] 192.168.1.68 - - [28/Jun/2025 21:24:59] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 21:25:44,804 [INFO]  * Detected change in 'D:\\fleshrecord\\conf\\config.py', reloading
2025-06-28 21:25:44,847 [INFO]  * Restarting with stat
2025-06-28 21:26:11,097 [INFO] Starting Flask application v0.2.0
2025-06-28 21:26:12,403 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 21:26:12,404 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 21:26:12,406 [INFO]  * Restarting with stat
2025-06-28 21:26:13,880 [INFO] Starting Flask application v0.2.0
2025-06-28 21:26:13,903 [WARNING]  * Debugger is active!
2025-06-28 21:26:13,910 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:26:14,977 [INFO] 成功获取 1 个预算
2025-06-28 21:26:14,977 [INFO] budgets 执行时间: 0.1799秒
2025-06-28 21:26:14,977 [INFO] 192.168.1.68 - - [28/Jun/2025 21:26:14] "GET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1" 200 -
2025-06-28 21:26:21,104 [WARNING] 缺少X-User-ID请求头
2025-06-28 21:26:21,104 [ERROR] budgets 执行失败: name 'jsonify' is not defined
2025-06-28 21:26:21,114 [INFO] 192.168.1.68 - - [28/Jun/2025 21:26:21] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 21:27:23,697 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 21:27:23,745 [INFO]  * Restarting with stat
2025-06-28 21:27:24,712 [INFO] Starting Flask application v0.2.0
2025-06-28 21:27:24,744 [WARNING]  * Debugger is active!
2025-06-28 21:27:24,751 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:27:24,901 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 21:27:24,992 [INFO]  * Restarting with stat
2025-06-28 21:27:26,033 [INFO] Starting Flask application v0.2.0
2025-06-28 21:27:26,061 [WARNING]  * Debugger is active!
2025-06-28 21:27:26,067 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:27:40,700 [INFO] Starting Flask application v0.2.0
2025-06-28 21:27:41,989 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 21:27:41,989 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 21:27:41,992 [INFO]  * Restarting with stat
2025-06-28 21:27:43,147 [INFO] Starting Flask application v0.2.0
2025-06-28 21:27:43,171 [WARNING]  * Debugger is active!
2025-06-28 21:27:43,177 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:27:46,667 [INFO] 成功获取 1 个预算
2025-06-28 21:27:46,668 [INFO] budgets 执行时间: 0.1898秒
2025-06-28 21:27:46,669 [INFO] 192.168.1.68 - - [28/Jun/2025 21:27:46] "GET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1" 200 -
2025-06-28 21:30:59,237 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\firefly_service.py', reloading
2025-06-28 21:30:59,287 [INFO]  * Restarting with stat
2025-06-28 21:31:00,417 [INFO] Starting Flask application v0.2.0
2025-06-28 21:31:00,443 [WARNING]  * Debugger is active!
2025-06-28 21:31:00,449 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:31:02,728 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\firefly_service.py', reloading
2025-06-28 21:31:02,779 [INFO]  * Restarting with stat
2025-06-28 21:31:03,932 [INFO] Starting Flask application v0.2.0
2025-06-28 21:31:03,955 [WARNING]  * Debugger is active!
2025-06-28 21:31:03,962 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:31:24,747 [INFO] Starting Flask application v0.2.0
2025-06-28 21:31:26,294 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 21:31:26,295 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 21:31:26,299 [INFO]  * Restarting with stat
2025-06-28 21:31:27,288 [INFO] Starting Flask application v0.2.0
2025-06-28 21:31:27,311 [WARNING]  * Debugger is active!
2025-06-28 21:31:27,318 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:31:32,874 [INFO] 成功获取 1 个预算
2025-06-28 21:31:32,874 [INFO] budgets 执行时间: 0.1966秒
2025-06-28 21:31:32,874 [INFO] 192.168.1.68 - - [28/Jun/2025 21:31:32] "GET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1" 200 -
2025-06-28 21:31:49,335 [INFO] Starting Flask application v0.2.0
2025-06-28 21:31:50,693 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 21:31:50,694 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 21:31:50,697 [INFO]  * Restarting with stat
2025-06-28 21:31:52,061 [INFO] Starting Flask application v0.2.0
2025-06-28 21:31:52,088 [WARNING]  * Debugger is active!
2025-06-28 21:31:52,094 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:31:54,646 [INFO] 成功获取 1 个预算
2025-06-28 21:31:54,647 [INFO] budgets 执行时间: 0.1824秒
2025-06-28 21:31:54,647 [INFO] 192.168.1.68 - - [28/Jun/2025 21:31:54] "GET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1" 200 -
2025-06-28 21:33:51,788 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 21:33:51,840 [INFO]  * Restarting with stat
2025-06-28 21:33:52,862 [INFO] Starting Flask application v0.2.0
2025-06-28 21:33:52,889 [WARNING]  * Debugger is active!
2025-06-28 21:33:52,896 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 21:33:54,085 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 21:33:54,181 [INFO]  * Restarting with stat
2025-06-28 21:33:55,221 [INFO] Starting Flask application v0.2.0
2025-06-28 21:33:55,246 [WARNING]  * Debugger is active!
2025-06-28 21:33:55,259 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:13:50,494 [INFO] Starting Flask application v0.2.0
2025-06-28 22:13:51,830 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:13:51,830 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:13:51,834 [INFO]  * Restarting with stat
2025-06-28 22:13:52,725 [INFO] Starting Flask application v0.2.0
2025-06-28 22:13:52,760 [WARNING]  * Debugger is active!
2025-06-28 22:13:52,767 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:13:57,472 [INFO] 成功获取 1 个预算
2025-06-28 22:13:57,472 [INFO] budgets 执行时间: 0.1843秒
2025-06-28 22:13:57,473 [INFO] 192.168.1.68 - - [28/Jun/2025 22:13:57] "GET /budgets?Authorization[FILTERED]&Content-Type=application%2Fjson HTTP/1.1" 200 -
2025-06-28 22:14:18,630 [INFO] Starting Flask application v0.2.0
2025-06-28 22:14:19,936 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:14:19,937 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:14:19,939 [INFO]  * Restarting with stat
2025-06-28 22:14:20,899 [INFO] Starting Flask application v0.2.0
2025-06-28 22:14:20,934 [WARNING]  * Debugger is active!
2025-06-28 22:14:20,943 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:14:57,492 [INFO] 开始处理交易请求 [ID: 6a109bef]
2025-06-28 22:14:57,492 [INFO] [6a109bef] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 22:14:57,494 [INFO] 添加交易记录: 午饭
2025-06-28 22:14:57,494 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 22:14:58,153 [ERROR] 请求异常 - 添加交易失败: HTTPSConnectionPool(host='your_firefly_api_url_here', port=443): Max retries exceeded with url: /transactions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1006)')))
2025-06-28 22:14:58,153 [INFO] [6a109bef] 交易创建成功: amount=35.0, description=午饭
2025-06-28 22:14:58,154 [INFO] add_transaction 执行时间: 0.6614秒
2025-06-28 22:14:58,154 [INFO] 192.168.1.68 - - [28/Jun/2025 22:14:58] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 201 -
2025-06-28 22:19:32,143 [INFO] Starting Flask application v0.2.0
2025-06-28 22:19:33,436 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:19:33,436 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:19:33,439 [INFO]  * Restarting with stat
2025-06-28 22:19:35,113 [INFO] Starting Flask application v0.2.0
2025-06-28 22:19:35,137 [WARNING]  * Debugger is active!
2025-06-28 22:19:35,154 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:19:36,591 [INFO] 开始处理交易请求 [ID: 594a14a6]
2025-06-28 22:19:36,592 [INFO] [594a14a6] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 22:19:36,592 [INFO] 添加交易记录: 午饭
2025-06-28 22:19:36,593 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 22:19:37,224 [ERROR] 请求异常 - 添加交易失败: HTTPSConnectionPool(host='your_firefly_api_url_here', port=443): Max retries exceeded with url: /transactions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1006)')))
2025-06-28 22:19:37,224 [ERROR] [594a14a6] 交易创建失败: 未知错误
2025-06-28 22:19:37,225 [INFO] add_transaction 执行时间: 0.6334秒
2025-06-28 22:19:37,225 [INFO] 192.168.1.68 - - [28/Jun/2025 22:19:37] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-28 22:19:41,457 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:19:41,457 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:19:41,504 [INFO] 192.168.1.195 - - [28/Jun/2025 22:19:41] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:19:42,220 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:19:42,220 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:19:42,229 [INFO] 192.168.1.195 - - [28/Jun/2025 22:19:42] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:19:42,239 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:19:42,239 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:19:42,248 [INFO] 192.168.1.195 - - [28/Jun/2025 22:19:42] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:19:42,276 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:19:42,277 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:19:42,290 [INFO] 192.168.1.195 - - [28/Jun/2025 22:19:42] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:19:43,504 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:19:43,506 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:19:43,515 [INFO] 192.168.1.195 - - [28/Jun/2025 22:19:43] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:19:43,525 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:19:43,525 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:19:43,535 [INFO] 192.168.1.195 - - [28/Jun/2025 22:19:43] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:19:43,561 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:19:43,562 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:19:43,573 [INFO] 192.168.1.195 - - [28/Jun/2025 22:19:43] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:20:13,985 [INFO] 开始处理交易请求 [ID: 1d6d7727]
2025-06-28 22:20:13,986 [INFO] [1d6d7727] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 22:20:13,986 [INFO] 添加交易记录: 午饭
2025-06-28 22:20:13,987 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 22:20:14,610 [ERROR] 请求异常 - 添加交易失败: HTTPSConnectionPool(host='your_firefly_api_url_here', port=443): Max retries exceeded with url: /transactions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1006)')))
2025-06-28 22:20:14,611 [ERROR] [1d6d7727] 交易创建失败: 未知错误
2025-06-28 22:20:14,612 [INFO] add_transaction 执行时间: 0.6283秒
2025-06-28 22:20:14,612 [INFO] 192.168.1.68 - - [28/Jun/2025 22:20:14] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-28 22:20:28,572 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:20:28,572 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:20:28,598 [INFO] 192.168.1.195 - - [28/Jun/2025 22:20:28] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:20:28,611 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:20:28,612 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:20:28,621 [INFO] 192.168.1.195 - - [28/Jun/2025 22:20:28] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:20:28,635 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:20:28,636 [ERROR] webhook 执行失败: name 'APIResponseBuilder' is not defined
2025-06-28 22:20:28,672 [INFO] 192.168.1.195 - - [28/Jun/2025 22:20:28] "[35m[1mPOST /webhook HTTP/1.1[0m" 500 -
2025-06-28 22:21:12,889 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 22:21:12,937 [INFO]  * Restarting with stat
2025-06-28 22:21:14,158 [INFO] Starting Flask application v0.2.0
2025-06-28 22:21:14,182 [WARNING]  * Debugger is active!
2025-06-28 22:21:14,189 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:21:15,452 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 22:21:15,537 [INFO]  * Restarting with stat
2025-06-28 22:21:16,554 [INFO] Starting Flask application v0.2.0
2025-06-28 22:21:16,579 [WARNING]  * Debugger is active!
2025-06-28 22:21:16,585 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:21:36,018 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 22:21:36,065 [INFO]  * Restarting with stat
2025-06-28 22:21:37,067 [INFO] Starting Flask application v0.2.0
2025-06-28 22:21:37,095 [WARNING]  * Debugger is active!
2025-06-28 22:21:37,108 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:21:38,292 [INFO] 开始处理交易请求 [ID: 66126dc9]
2025-06-28 22:21:38,293 [INFO] [66126dc9] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 22:21:38,294 [INFO] 添加交易记录: 午饭
2025-06-28 22:21:38,294 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 22:21:38,905 [ERROR] 请求异常 - 添加交易失败: HTTPSConnectionPool(host='your_firefly_api_url_here', port=443): Max retries exceeded with url: /transactions (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1006)')))
2025-06-28 22:21:38,905 [ERROR] [66126dc9] 交易创建失败: 未知错误
2025-06-28 22:21:38,906 [INFO] add_transaction 执行时间: 0.6147秒
2025-06-28 22:21:38,906 [INFO] 192.168.1.68 - - [28/Jun/2025 22:21:38] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-28 22:23:12,725 [INFO] Starting Flask application v0.2.0
2025-06-28 22:29:02,021 [INFO] Starting Flask application v0.2.0
2025-06-28 22:29:03,338 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:29:03,339 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:29:03,341 [INFO]  * Restarting with stat
2025-06-28 22:29:04,741 [INFO] Starting Flask application v0.2.0
2025-06-28 22:29:04,761 [WARNING]  * Debugger is active!
2025-06-28 22:29:04,768 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:31:31,985 [INFO] Starting Flask application v0.2.0
2025-06-28 22:31:33,544 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:31:33,545 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:31:33,550 [INFO]  * Restarting with stat
2025-06-28 22:31:34,884 [INFO] Starting Flask application v0.2.0
2025-06-28 22:31:34,927 [WARNING]  * Debugger is active!
2025-06-28 22:31:34,934 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:31:38,939 [INFO] 开始处理交易请求 [ID: 20e9fc94]
2025-06-28 22:31:38,940 [INFO] [20e9fc94] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 22:31:38,940 [INFO] 添加交易记录: 午饭
2025-06-28 22:31:38,941 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 22:31:39,306 [INFO] 交易添加成功: 196
2025-06-28 22:31:39,306 [ERROR] [20e9fc94] 交易创建失败: 交易添加成功
2025-06-28 22:31:39,308 [INFO] add_transaction 执行时间: 0.3698秒
2025-06-28 22:31:39,310 [INFO] 192.168.1.68 - - [28/Jun/2025 22:31:39] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-28 22:31:39,312 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:31:39,312 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 22:31:39,315 [INFO] 192.168.1.195 - - [28/Jun/2025 22:31:39] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:31:39,337 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:31:39,347 [INFO] webhook 执行时间: 0.0093秒
2025-06-28 22:31:39,351 [INFO] 192.168.1.195 - - [28/Jun/2025 22:31:39] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:31:39,383 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:31:39,384 [INFO] webhook 执行时间: 0.0008秒
2025-06-28 22:31:39,385 [INFO] 192.168.1.195 - - [28/Jun/2025 22:31:39] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:32:35,203 [INFO] 开始处理交易请求 [ID: 73578567]
2025-06-28 22:32:35,204 [INFO] [73578567] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 22:32:35,204 [INFO] 添加交易记录: 午饭
2025-06-28 22:32:35,204 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 22:32:35,526 [INFO] 交易添加成功: 197
2025-06-28 22:32:35,526 [ERROR] [73578567] 交易创建失败: 交易添加成功
2025-06-28 22:32:35,526 [INFO] add_transaction 执行时间: 0.3236秒
2025-06-28 22:32:35,527 [INFO] 192.168.1.68 - - [28/Jun/2025 22:32:35] "[35m[1mPOST /add_transaction HTTP/1.1[0m" 500 -
2025-06-28 22:32:35,528 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:32:35,528 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 22:32:35,529 [INFO] 192.168.1.195 - - [28/Jun/2025 22:32:35] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:32:35,540 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:32:35,541 [INFO] webhook 执行时间: 0.0011秒
2025-06-28 22:32:35,541 [INFO] 192.168.1.195 - - [28/Jun/2025 22:32:35] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:32:35,580 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:32:35,589 [INFO] webhook 执行时间: 0.0113秒
2025-06-28 22:32:35,594 [INFO] 192.168.1.195 - - [28/Jun/2025 22:32:35] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:33:05,290 [INFO] 开始处理交易请求 [ID: cd913360]
2025-06-28 22:33:05,291 [INFO] [cd913360] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 22:33:05,291 [INFO] 添加交易记录: 午饭
2025-06-28 22:33:05,291 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 22:33:05,590 [INFO] 交易添加成功: 198
2025-06-28 22:33:05,590 [ERROR] [cd913360] 交易创建失败: 交易添加成功
2025-06-28 22:33:05,592 [INFO] add_transaction 执行时间: 0.3020秒
2025-06-28 22:33:05,592 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:33:05,592 [INFO] 192.168.1.68 - - [28/Jun/2025 22:33:05] "[35m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0 HTTP/1.1[0m" 500 -
2025-06-28 22:33:05,593 [INFO] webhook 执行时间: 0.0011秒
2025-06-28 22:33:05,594 [INFO] 192.168.1.195 - - [28/Jun/2025 22:33:05] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:33:05,604 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:33:05,604 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 22:33:05,608 [INFO] 192.168.1.195 - - [28/Jun/2025 22:33:05] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:33:05,638 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:33:05,642 [INFO] webhook 执行时间: 0.0042秒
2025-06-28 22:33:05,644 [INFO] 192.168.1.195 - - [28/Jun/2025 22:33:05] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:33:05,667 [WARNING] 缺少X-User-ID请求头
2025-06-28 22:33:05,670 [INFO] webhook 执行时间: 0.0030秒
2025-06-28 22:33:05,672 [INFO] 192.168.1.195 - - [28/Jun/2025 22:33:05] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 22:33:43,602 [INFO] Starting Flask application v0.2.0
2025-06-28 22:33:44,902 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:33:44,902 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:33:44,905 [INFO]  * Restarting with stat
2025-06-28 22:33:45,874 [INFO] Starting Flask application v0.2.0
2025-06-28 22:33:45,895 [WARNING]  * Debugger is active!
2025-06-28 22:33:45,903 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:33:47,350 [ERROR] 获取预算信息时发生错误: 'BudgetHandler' object has no attribute 'config'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 60, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 92, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 108, in get_firefly_budgets
    budgets_url = f'{self.config.FIREFLY_API_URL}/budgets'
                     ^^^^^^^^^^^
AttributeError: 'BudgetHandler' object has no attribute 'config'
2025-06-28 22:33:47,351 [INFO] budgets 执行时间: 0.0023秒
2025-06-28 22:33:47,352 [INFO] 192.168.1.68 - - [28/Jun/2025 22:33:47] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 22:33:51,295 [ERROR] 获取预算信息时发生错误: 'BudgetHandler' object has no attribute 'config'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 60, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 92, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 108, in get_firefly_budgets
    budgets_url = f'{self.config.FIREFLY_API_URL}/budgets'
                     ^^^^^^^^^^^
AttributeError: 'BudgetHandler' object has no attribute 'config'
2025-06-28 22:33:51,295 [INFO] budgets 执行时间: 0.0010秒
2025-06-28 22:33:51,295 [INFO] 192.168.1.68 - - [28/Jun/2025 22:33:51] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 22:35:50,716 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-28 22:35:50,758 [INFO]  * Restarting with stat
2025-06-28 22:35:51,715 [INFO] Starting Flask application v0.2.0
2025-06-28 22:35:51,739 [WARNING]  * Debugger is active!
2025-06-28 22:35:51,744 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:35:54,113 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-28 22:35:54,151 [INFO]  * Restarting with stat
2025-06-28 22:35:55,152 [INFO] Starting Flask application v0.2.0
2025-06-28 22:35:55,173 [WARNING]  * Debugger is active!
2025-06-28 22:35:55,178 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:36:49,735 [INFO] Starting Flask application v0.2.0
2025-06-28 22:36:51,049 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:36:51,049 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:36:51,051 [INFO]  * Restarting with stat
2025-06-28 22:36:52,019 [INFO] Starting Flask application v0.2.0
2025-06-28 22:36:52,041 [WARNING]  * Debugger is active!
2025-06-28 22:36:52,046 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:36:52,559 [ERROR] 获取预算信息时发生错误: 'BudgetHandler' object has no attribute 'config'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 60, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 92, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 108, in get_firefly_budgets
    budgets_url = f'{self.config.FIREFLY_API_URL}/budgets'
                     ^^^^^^^^^^^
AttributeError: 'BudgetHandler' object has no attribute 'config'
2025-06-28 22:36:52,561 [INFO] budgets 执行时间: 0.0020秒
2025-06-28 22:36:52,561 [INFO] 192.168.1.68 - - [28/Jun/2025 22:36:52] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 22:38:34,874 [INFO] Starting Flask application v0.2.0
2025-06-28 22:38:36,189 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:38:36,189 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:38:36,193 [INFO]  * Restarting with stat
2025-06-28 22:38:37,233 [INFO] Starting Flask application v0.2.0
2025-06-28 22:38:37,256 [WARNING]  * Debugger is active!
2025-06-28 22:38:37,262 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:38:41,545 [ERROR] 获取预算信息时发生错误: 'BudgetHandler' object has no attribute 'config'
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 60, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 92, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 108, in get_firefly_budgets
    budgets_url = f'{self.config.FIREFLY_API_URL}/budgets'
                     ^^^^^^^^^^^
AttributeError: 'BudgetHandler' object has no attribute 'config'
2025-06-28 22:38:41,546 [INFO] budgets 执行时间: 0.0020秒
2025-06-28 22:38:41,547 [INFO] 192.168.1.68 - - [28/Jun/2025 22:38:41] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 22:39:45,147 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\budget_handler.py', reloading
2025-06-28 22:39:45,194 [INFO]  * Restarting with stat
2025-06-28 22:39:46,516 [INFO] Starting Flask application v0.2.0
2025-06-28 22:40:02,260 [INFO] Starting Flask application v0.2.0
2025-06-28 22:40:42,325 [INFO] Starting Flask application v0.2.0
2025-06-28 22:44:02,152 [INFO] Starting Flask application v0.2.0
2025-06-28 22:44:03,497 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:44:03,497 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:44:03,500 [INFO]  * Restarting with stat
2025-06-28 22:44:04,362 [INFO] Starting Flask application v0.2.0
2025-06-28 22:44:04,383 [WARNING]  * Debugger is active!
2025-06-28 22:44:04,389 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:44:08,838 [ERROR] 获取预算信息时发生错误: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 61, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 93, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 111, in get_firefly_budgets
    response.raise_for_status()
  File "D:\venv311\Lib\site-packages\requests\models.py", line 1021, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
2025-06-28 22:44:08,862 [INFO] budgets 执行时间: 0.2634秒
2025-06-28 22:44:08,863 [INFO] 192.168.1.68 - - [28/Jun/2025 22:44:08] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 22:46:21,558 [INFO] Starting Flask application v0.2.0
2025-06-28 22:46:22,859 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:46:22,859 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:46:22,863 [INFO]  * Restarting with stat
2025-06-28 22:46:23,776 [INFO] Starting Flask application v0.2.0
2025-06-28 22:46:23,798 [WARNING]  * Debugger is active!
2025-06-28 22:46:23,804 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:46:26,802 [ERROR] 获取预算信息时发生错误: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 61, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 93, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 111, in get_firefly_budgets
    response.raise_for_status()
  File "D:\venv311\Lib\site-packages\requests\models.py", line 1021, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
2025-06-28 22:46:26,805 [INFO] budgets 执行时间: 0.2437秒
2025-06-28 22:46:26,806 [INFO] 192.168.1.68 - - [28/Jun/2025 22:46:26] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 22:53:12,145 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 22:53:12,185 [INFO]  * Restarting with stat
2025-06-28 22:53:13,076 [INFO] Starting Flask application v0.2.0
2025-06-28 22:53:13,099 [WARNING]  * Debugger is active!
2025-06-28 22:53:13,105 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:53:16,501 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 22:53:16,606 [INFO]  * Restarting with stat
2025-06-28 22:53:17,684 [INFO] Starting Flask application v0.2.0
2025-06-28 22:53:17,707 [WARNING]  * Debugger is active!
2025-06-28 22:53:17,714 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:53:30,804 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 22:53:30,840 [INFO]  * Restarting with stat
2025-06-28 22:53:31,768 [INFO] Starting Flask application v0.2.0
2025-06-28 22:53:31,792 [WARNING]  * Debugger is active!
2025-06-28 22:53:31,797 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:53:34,054 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 22:53:34,145 [INFO]  * Restarting with stat
2025-06-28 22:53:35,060 [INFO] Starting Flask application v0.2.0
2025-06-28 22:53:35,085 [WARNING]  * Debugger is active!
2025-06-28 22:53:35,090 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:55:01,884 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 22:55:01,925 [INFO]  * Restarting with stat
2025-06-28 22:55:02,767 [INFO] Starting Flask application v0.2.0
2025-06-28 22:57:56,994 [INFO] Starting Flask application v0.2.0
2025-06-28 22:58:34,559 [INFO] Starting Flask application v0.2.0
2025-06-28 22:58:35,856 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:58:35,856 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:58:35,859 [INFO]  * Restarting with stat
2025-06-28 22:58:36,800 [INFO] Starting Flask application v0.2.0
2025-06-28 22:58:36,826 [WARNING]  * Debugger is active!
2025-06-28 22:58:36,831 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:59:22,126 [INFO] Starting Flask application v0.2.0
2025-06-28 22:59:23,436 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:59:23,436 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:59:23,439 [INFO]  * Restarting with stat
2025-06-28 22:59:24,437 [INFO] Starting Flask application v0.2.0
2025-06-28 22:59:24,459 [WARNING]  * Debugger is active!
2025-06-28 22:59:24,465 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 22:59:32,384 [INFO] Starting Flask application v0.2.0
2025-06-28 22:59:33,688 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 22:59:33,688 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 22:59:33,691 [INFO]  * Restarting with stat
2025-06-28 22:59:34,681 [INFO] Starting Flask application v0.2.0
2025-06-28 22:59:34,704 [WARNING]  * Debugger is active!
2025-06-28 22:59:34,711 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:00:07,820 [ERROR] 获取预算信息时发生错误: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 61, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 93, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 111, in get_firefly_budgets
    response.raise_for_status()
  File "D:\venv311\Lib\site-packages\requests\models.py", line 1021, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
2025-06-28 23:00:07,822 [INFO] budgets 执行时间: 0.2424秒
2025-06-28 23:00:07,822 [INFO] 127.0.0.1 - - [28/Jun/2025 23:00:07] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-28 23:00:37,721 [ERROR] 获取预算信息时发生错误: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 61, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 93, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 111, in get_firefly_budgets
    response.raise_for_status()
  File "D:\venv311\Lib\site-packages\requests\models.py", line 1021, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
2025-06-28 23:00:37,722 [INFO] budgets 执行时间: 0.2370秒
2025-06-28 23:00:37,723 [INFO] 192.168.1.68 - - [28/Jun/2025 23:00:37] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 23:00:49,053 [INFO] Starting Flask application v0.2.0
2025-06-28 23:00:50,351 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:00:50,351 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:00:50,354 [INFO]  * Restarting with stat
2025-06-28 23:00:51,302 [INFO] Starting Flask application v0.2.0
2025-06-28 23:00:51,328 [WARNING]  * Debugger is active!
2025-06-28 23:00:51,335 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:01:25,903 [ERROR] 获取预算信息时发生错误: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 61, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 93, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 111, in get_firefly_budgets
    response.raise_for_status()
  File "D:\venv311\Lib\site-packages\requests\models.py", line 1021, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
2025-06-28 23:01:25,904 [INFO] budgets 执行时间: 0.2370秒
2025-06-28 23:01:25,904 [INFO] 192.168.1.68 - - [28/Jun/2025 23:01:25] "[35m[1mGET /budgets?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0&Content-Type=application/json HTTP/1.1[0m" 500 -
2025-06-28 23:01:48,033 [INFO] Starting Flask application v0.2.0
2025-06-28 23:01:49,348 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:01:49,348 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:01:49,352 [INFO]  * Restarting with stat
2025-06-28 23:01:50,467 [INFO] Starting Flask application v0.2.0
2025-06-28 23:01:50,493 [WARNING]  * Debugger is active!
2025-06-28 23:01:50,501 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:02:08,184 [ERROR] 获取预算信息时发生错误: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 61, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 93, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 111, in get_firefly_budgets
    response.raise_for_status()
  File "D:\venv311\Lib\site-packages\requests\models.py", line 1021, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
2025-06-28 23:02:08,185 [INFO] budgets 执行时间: 0.2374秒
2025-06-28 23:02:08,186 [INFO] 127.0.0.1 - - [28/Jun/2025 23:02:08] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-28 23:02:26,766 [INFO] Starting Flask application v0.2.0
2025-06-28 23:02:28,095 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:02:28,095 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:02:28,097 [INFO]  * Restarting with stat
2025-06-28 23:02:29,047 [INFO] Starting Flask application v0.2.0
2025-06-28 23:02:29,071 [WARNING]  * Debugger is active!
2025-06-28 23:02:29,078 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:03:28,060 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:03:28,106 [INFO]  * Restarting with stat
2025-06-28 23:03:29,011 [INFO] Starting Flask application v0.2.0
2025-06-28 23:03:29,032 [WARNING]  * Debugger is active!
2025-06-28 23:03:29,038 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:03:31,335 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:03:31,378 [INFO]  * Restarting with stat
2025-06-28 23:03:32,287 [INFO] Starting Flask application v0.2.0
2025-06-28 23:03:32,313 [WARNING]  * Debugger is active!
2025-06-28 23:03:32,318 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:03:44,203 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\budget_handler.py', reloading
2025-06-28 23:03:44,239 [INFO]  * Restarting with stat
2025-06-28 23:03:45,124 [INFO] Starting Flask application v0.2.0
2025-06-28 23:03:45,147 [WARNING]  * Debugger is active!
2025-06-28 23:03:45,153 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:03:46,342 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\budget_handler.py', reloading
2025-06-28 23:03:46,383 [INFO]  * Restarting with stat
2025-06-28 23:03:47,247 [INFO] Starting Flask application v0.2.0
2025-06-28 23:03:47,271 [WARNING]  * Debugger is active!
2025-06-28 23:03:47,276 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:04:08,308 [INFO] Starting Flask application v0.2.0
2025-06-28 23:04:09,626 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:04:09,630 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:04:09,639 [INFO]  * Restarting with stat
2025-06-28 23:04:10,637 [INFO] Starting Flask application v0.2.0
2025-06-28 23:04:10,661 [WARNING]  * Debugger is active!
2025-06-28 23:04:10,667 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:04:15,443 [INFO] Starting Flask application v0.2.0
2025-06-28 23:04:16,750 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:04:16,750 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:04:16,753 [INFO]  * Restarting with stat
2025-06-28 23:04:17,730 [INFO] Starting Flask application v0.2.0
2025-06-28 23:04:17,752 [WARNING]  * Debugger is active!
2025-06-28 23:04:17,758 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:04:33,314 [ERROR] 获取预算信息时发生错误: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
Traceback (most recent call last):
  File "D:\fleshrecord\handlers\budget_handler.py", line 62, in get_budgets_endpoint
    return self._get_all_budgets()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 94, in _get_all_budgets
    budgets = self.get_firefly_budgets()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\fleshrecord\handlers\budget_handler.py", line 112, in get_firefly_budgets
    response.raise_for_status()
  File "D:\venv311\Lib\site-packages\requests\models.py", line 1021, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets
2025-06-28 23:04:33,316 [INFO] budgets 执行时间: 0.2411秒
2025-06-28 23:04:33,317 [INFO] 127.0.0.1 - - [28/Jun/2025 23:04:33] "[35m[1mGET /budgets HTTP/1.1[0m" 500 -
2025-06-28 23:06:05,558 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\budget_handler.py', reloading
2025-06-28 23:06:05,607 [INFO]  * Restarting with stat
2025-06-28 23:06:06,619 [INFO] Starting Flask application v0.2.0
2025-06-28 23:06:06,643 [WARNING]  * Debugger is active!
2025-06-28 23:06:06,650 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:12:09,825 [INFO] Starting Flask application v0.2.0
2025-06-28 23:12:11,142 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:12:11,142 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:12:11,145 [INFO]  * Restarting with stat
2025-06-28 23:12:12,014 [INFO] Starting Flask application v0.2.0
2025-06-28 23:12:12,045 [WARNING]  * Debugger is active!
2025-06-28 23:12:12,062 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:12:15,315 [ERROR] 获取预算限制失败 (budget_id: 1): 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets/1/limits?start_date=2025-06-01&end_date=2025-06-30
2025-06-28 23:12:15,315 [INFO] 成功获取 1 个预算
2025-06-28 23:12:15,316 [INFO] budgets 执行时间: 0.5737秒
2025-06-28 23:12:15,316 [INFO] 192.168.1.68 - - [28/Jun/2025 23:12:15] "GET /budgets?Authorization[FILTERED]&Content-Type=application%2Fjson HTTP/1.1" 200 -
2025-06-28 23:12:28,441 [INFO] 开始处理交易请求 [ID: ac6cb7cc]
2025-06-28 23:12:28,442 [INFO] [ac6cb7cc] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:12:28,442 [INFO] 添加交易记录: 午饭
2025-06-28 23:12:28,442 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:12:32,559 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:32,559 [INFO] 交易添加成功: 199
2025-06-28 23:12:32,560 [INFO] webhook 执行时间: 0.0011秒
2025-06-28 23:12:32,560 [ERROR] [ac6cb7cc] 交易创建失败: 交易添加成功
2025-06-28 23:12:32,561 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:32] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:12:32,561 [INFO] add_transaction 执行时间: 4.1203秒
2025-06-28 23:12:32,563 [INFO] 192.168.1.68 - - [28/Jun/2025 23:12:32] "[35m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0 HTTP/1.1[0m" 500 -
2025-06-28 23:12:32,571 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:32,571 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:12:32,571 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:32] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:12:32,600 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:32,600 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:12:32,602 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:32] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:12:52,628 [INFO] 开始处理交易请求 [ID: 22d343b3]
2025-06-28 23:12:52,628 [INFO] [22d343b3] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:12:52,629 [INFO] 添加交易记录: 午饭
2025-06-28 23:12:52,629 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:12:52,908 [INFO] 交易添加成功: 200
2025-06-28 23:12:52,909 [ERROR] [22d343b3] 交易创建失败: 交易添加成功
2025-06-28 23:12:52,910 [INFO] add_transaction 执行时间: 0.2833秒
2025-06-28 23:12:52,911 [INFO] 192.168.1.68 - - [28/Jun/2025 23:12:52] "[35m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0 HTTP/1.1[0m" 500 -
2025-06-28 23:12:52,911 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:52,916 [INFO] webhook 执行时间: 0.0050秒
2025-06-28 23:12:52,916 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:52] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:12:52,926 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:52,926 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:12:52,927 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:52] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:12:52,951 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:52,952 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:12:52,953 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:52] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:12:59,055 [INFO] 开始处理交易请求 [ID: f30f5d24]
2025-06-28 23:12:59,055 [INFO] [f30f5d24] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:12:59,055 [INFO] 添加交易记录: 午饭
2025-06-28 23:12:59,056 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:12:59,340 [INFO] 交易添加成功: 201
2025-06-28 23:12:59,341 [ERROR] [f30f5d24] 交易创建失败: 交易添加成功
2025-06-28 23:12:59,341 [INFO] add_transaction 执行时间: 0.2868秒
2025-06-28 23:12:59,343 [INFO] 192.168.1.68 - - [28/Jun/2025 23:12:59] "[35m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0 HTTP/1.1[0m" 500 -
2025-06-28 23:12:59,343 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:59,344 [INFO] webhook 执行时间: 0.0011秒
2025-06-28 23:12:59,344 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:59] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:12:59,354 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:59,355 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:12:59,355 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:59] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:12:59,377 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:12:59,380 [INFO] webhook 执行时间: 0.0030秒
2025-06-28 23:12:59,383 [INFO] 192.168.1.195 - - [28/Jun/2025 23:12:59] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:13:29,285 [INFO] Starting Flask application v0.2.0
2025-06-28 23:13:30,609 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:13:30,610 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:13:30,613 [INFO]  * Restarting with stat
2025-06-28 23:13:31,538 [INFO] Starting Flask application v0.2.0
2025-06-28 23:13:31,559 [WARNING]  * Debugger is active!
2025-06-28 23:13:31,579 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:13:33,750 [INFO] 开始处理交易请求 [ID: 47927147]
2025-06-28 23:13:33,751 [INFO] [47927147] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:13:33,751 [INFO] 添加交易记录: 午饭
2025-06-28 23:13:33,752 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:13:34,024 [INFO] 交易添加成功: 202
2025-06-28 23:13:34,025 [ERROR] [47927147] 交易创建失败: 交易添加成功
2025-06-28 23:13:34,026 [INFO] add_transaction 执行时间: 0.2762秒
2025-06-28 23:13:34,028 [INFO] 192.168.1.68 - - [28/Jun/2025 23:13:34] "[35m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0 HTTP/1.1[0m" 500 -
2025-06-28 23:13:34,028 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:13:34,029 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:13:34,029 [INFO] 192.168.1.195 - - [28/Jun/2025 23:13:34] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:13:34,040 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:13:34,041 [INFO] webhook 执行时间: 0.0005秒
2025-06-28 23:13:34,042 [INFO] 192.168.1.195 - - [28/Jun/2025 23:13:34] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:13:34,066 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:13:34,067 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:13:34,068 [INFO] 192.168.1.195 - - [28/Jun/2025 23:13:34] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:15:50,737 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-28 23:15:50,780 [INFO]  * Restarting with stat
2025-06-28 23:15:51,695 [INFO] Starting Flask application v0.2.0
2025-06-28 23:15:51,718 [WARNING]  * Debugger is active!
2025-06-28 23:15:51,724 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:15:53,977 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-28 23:15:54,025 [INFO]  * Restarting with stat
2025-06-28 23:15:55,400 [INFO] Starting Flask application v0.2.0
2025-06-28 23:15:55,428 [WARNING]  * Debugger is active!
2025-06-28 23:15:55,434 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:16:56,913 [INFO] Starting Flask application v0.2.0
2025-06-28 23:16:58,233 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:16:58,233 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:16:58,236 [INFO]  * Restarting with stat
2025-06-28 23:16:59,133 [INFO] Starting Flask application v0.2.0
2025-06-28 23:16:59,156 [WARNING]  * Debugger is active!
2025-06-28 23:16:59,162 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:17:01,415 [INFO] 开始处理交易请求 [ID: 82900b05]
2025-06-28 23:17:01,415 [INFO] [82900b05] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:17:01,415 [INFO] 添加交易记录: 午饭
2025-06-28 23:17:01,416 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:17:01,706 [INFO] 交易添加成功: 203
2025-06-28 23:17:01,706 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:01,707 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:17:01,706 [INFO] [82900b05] 交易创建成功: amount=35.0, description=午饭
2025-06-28 23:17:01,707 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:01] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:17:01,708 [INFO] add_transaction 执行时间: 0.2943秒
2025-06-28 23:17:01,709 [INFO] 192.168.1.68 - - [28/Jun/2025 23:17:01] "[35m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0 HTTP/1.1[0m" 201 -
2025-06-28 23:17:01,718 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:01,718 [INFO] webhook 执行时间: 0.0008秒
2025-06-28 23:17:01,718 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:01] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:17:01,760 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:01,762 [INFO] webhook 执行时间: 0.0026秒
2025-06-28 23:17:01,765 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:01] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:17:27,187 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:27,187 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:17:27,188 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:27] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:17:27,198 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:27,201 [INFO] webhook 执行时间: 0.0028秒
2025-06-28 23:17:27,201 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:27] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:17:27,230 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:27,233 [INFO] webhook 执行时间: 0.0024秒
2025-06-28 23:17:27,233 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:27] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:17:40,144 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:40,145 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:17:40,145 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:40] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:17:40,157 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:40,157 [INFO] webhook 执行时间: 0.0004秒
2025-06-28 23:17:40,157 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:40] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:17:40,181 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:17:40,182 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:17:40,184 [INFO] 192.168.1.195 - - [28/Jun/2025 23:17:40] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:27:50,213 [INFO] Starting Flask application v0.2.0
2025-06-28 23:27:51,516 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:27:51,516 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:27:51,520 [INFO]  * Restarting with stat
2025-06-28 23:27:52,646 [INFO] Starting Flask application v0.2.0
2025-06-28 23:27:52,671 [WARNING]  * Debugger is active!
2025-06-28 23:27:52,676 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:27:54,699 [INFO] 开始处理交易请求 [ID: 3f24d6bf]
2025-06-28 23:27:54,701 [INFO] [3f24d6bf] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:27:54,701 [INFO] 添加交易记录: 午饭
2025-06-28 23:27:54,701 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:27:54,981 [INFO] 交易添加成功: 206
2025-06-28 23:27:54,981 [INFO] [3f24d6bf] 交易创建成功: amount=35.0, description=午饭
2025-06-28 23:27:54,982 [INFO] add_transaction 执行时间: 0.2826秒
2025-06-28 23:27:54,982 [INFO] 192.168.1.68 - - [28/Jun/2025 23:27:54] "[35m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0 HTTP/1.1[0m" 201 -
2025-06-28 23:27:54,985 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:27:54,986 [INFO] webhook 执行时间: 0.0005秒
2025-06-28 23:27:54,986 [INFO] 192.168.1.195 - - [28/Jun/2025 23:27:54] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:27:54,999 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:27:55,000 [INFO] webhook 执行时间: 0.0009秒
2025-06-28 23:27:55,001 [INFO] 192.168.1.195 - - [28/Jun/2025 23:27:55] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:27:55,043 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:27:55,046 [INFO] webhook 执行时间: 0.0040秒
2025-06-28 23:27:55,048 [INFO] 192.168.1.195 - - [28/Jun/2025 23:27:55] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:28:19,682 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:28:19,724 [INFO]  * Restarting with stat
2025-06-28 23:28:20,699 [INFO] Starting Flask application v0.2.0
2025-06-28 23:28:20,721 [WARNING]  * Debugger is active!
2025-06-28 23:28:20,727 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:29:09,088 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:29:09,133 [INFO]  * Restarting with stat
2025-06-28 23:29:09,996 [INFO] Starting Flask application v0.2.0
2025-06-28 23:29:10,019 [WARNING]  * Debugger is active!
2025-06-28 23:29:10,024 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:29:12,293 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:29:12,345 [INFO]  * Restarting with stat
2025-06-28 23:29:13,302 [INFO] Starting Flask application v0.2.0
2025-06-28 23:29:13,347 [WARNING]  * Debugger is active!
2025-06-28 23:29:13,361 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:33:22,544 [INFO] 开始处理交易请求 [ID: 420f9ba4]
2025-06-28 23:33:22,544 [INFO] [420f9ba4] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:33:22,545 [INFO] 添加交易记录: 午饭
2025-06-28 23:33:22,545 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:33:22,820 [INFO] 交易添加成功: 207
2025-06-28 23:33:22,822 [INFO] [420f9ba4] 交易创建成功: amount=35.0, description=午饭
2025-06-28 23:33:22,822 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:33:22,823 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:33:22,822 [INFO] add_transaction 执行时间: 0.2787秒
2025-06-28 23:33:22,823 [INFO] 192.168.1.195 - - [28/Jun/2025 23:33:22] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:33:22,824 [INFO] 192.168.1.68 - - [28/Jun/2025 23:33:22] "[35m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWI3NWRlNTEyYTIwODg1ODNjNTRhMzc5ODNhZDk1YWU3NDVjYzc2ZTI0Mjk5MThjZWUwMTczNjQ1MzlmM2VkOTU1Yzk2NDQ2M2JlNWExNGIiLCJpYXQiOjE3NDk4MjI0NDQuMDc0NjM4LCJuYmYiOjE3NDk4MjI0NDQuMDc0NjM5LCJleHAiOjE3ODEzNTg0NDMuMzMyMTk5LCJzdWIiOiIxIiwic2NvcGVzIjpbXX0.AzaDMmFeZ7ZoHvQ_BEqj_7lZlEJb4yLQVptHBgRhDon2_bVvlAsK5imo2ceKrDsUbTfjrn76FtAg9-kIQU70KFfQ5Na20UgN2h4xqDMuSWU4HG027eMIvk4bNbF8pEtbO2AlMZPcBzzZiMB2fZdOdnp2TlCB8bwW-v1m1Cpp7x1MppaioohyO5e6RhKbXVFA9Cb88oQKwluFncZDSwjz1KH7W61_lHbjee3TI1SikVgD-RB6mLyOJuxMzOVzYJ4YADX7KODWNkftFop4caIMetQtma315UZQkCNMsiw8zcslzq951-twHxZnczd9aqRtIoRJprM0NEdk4vtQpj9xzE2jJtTYoprshU6cPyRGrn55h0gtnm7_Bty8LjvH8LEXk6QBP7rvodQsjhbgrB2fcTIcwXhId0KUQoD8m_xNmEMXT49IjwkzirpwUDxqrnbWocUV-vuxdD__PkUv453sOpeFmjfiN3jZtp46Ryta1-ldVORoioMEPndlWkDkmmvTQ0UUWzfT3kfYNTfE4Q3GxGcZQELEssNESEDxt355-AneuxJbf8lJwBpZ0TegqSf6oSpIR2tA6YLvi1CLqvhP1VBXPeiIW6UhAo2OtIdUtWbrhjiiRLsEocln0YF7-fqbo7fvwO4u1TmKKRDCcsp-iWobfMpVoQR2VNZblkoO2P0 HTTP/1.1[0m" 201 -
2025-06-28 23:33:22,834 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:33:22,834 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:33:22,835 [INFO] 192.168.1.195 - - [28/Jun/2025 23:33:22] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:33:22,858 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:33:22,860 [INFO] webhook 执行时间: 0.0017秒
2025-06-28 23:33:22,873 [INFO] 192.168.1.195 - - [28/Jun/2025 23:33:22] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:35:14,801 [INFO] Starting Flask application v0.2.0
2025-06-28 23:35:16,337 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:35:16,337 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:35:16,340 [INFO]  * Restarting with stat
2025-06-28 23:35:17,337 [INFO] Starting Flask application v0.2.0
2025-06-28 23:35:17,359 [WARNING]  * Debugger is active!
2025-06-28 23:35:17,364 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:35:28,319 [INFO] 开始处理交易请求 [ID: d2618c18]
2025-06-28 23:35:28,320 [WARNING] [d2618c18] 交易数据验证失败: 1 validation error for TransactionRequest
date
  Field required [type=missing, input_value={'amount': '10.0', 'descr...nation_account': '????'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-06-28 23:35:28,321 [INFO] add_transaction 执行时间: 0.0020秒
2025-06-28 23:35:28,321 [INFO] 127.0.0.1 - - [28/Jun/2025 23:35:28] "[31m[1mPOST /add_transaction?Authorization=Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.test HTTP/1.1[0m" 400 -
2025-06-28 23:35:57,393 [INFO] Starting Flask application v0.2.0
2025-06-28 23:35:58,693 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:35:58,693 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:35:58,696 [INFO]  * Restarting with stat
2025-06-28 23:35:59,608 [INFO] Starting Flask application v0.2.0
2025-06-28 23:35:59,628 [WARNING]  * Debugger is active!
2025-06-28 23:35:59,634 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:36:19,365 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:36:19,365 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:36:19,366 [INFO] 127.0.0.1 - - [28/Jun/2025 23:36:19] "[31m[1mPOST /webhook?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.testlongtoken HTTP/1.1[0m" 400 -
2025-06-28 23:36:44,143 [INFO] Starting Flask application v0.2.0
2025-06-28 23:36:45,438 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:36:45,439 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:36:45,442 [INFO]  * Restarting with stat
2025-06-28 23:36:46,333 [INFO] Starting Flask application v0.2.0
2025-06-28 23:36:46,355 [WARNING]  * Debugger is active!
2025-06-28 23:36:46,361 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:38:09,498 [INFO] Starting Flask application v0.2.0
2025-06-28 23:38:10,795 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:38:10,795 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:38:10,799 [INFO]  * Restarting with stat
2025-06-28 23:38:11,716 [INFO] Starting Flask application v0.2.0
2025-06-28 23:38:11,738 [WARNING]  * Debugger is active!
2025-06-28 23:38:11,744 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:38:23,225 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:38:23,225 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:38:23,226 [INFO] 127.0.0.1 - - [28/Jun/2025 23:38:23] "[31m[1mPOST /webhook?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.testlongtoken HTTP/1.1[0m" 400 -
2025-06-28 23:39:11,801 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:39:11,851 [INFO]  * Restarting with stat
2025-06-28 23:39:12,729 [INFO] Starting Flask application v0.2.0
2025-06-28 23:39:12,750 [WARNING]  * Debugger is active!
2025-06-28 23:39:12,756 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:39:16,120 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:39:16,188 [INFO]  * Restarting with stat
2025-06-28 23:39:17,185 [INFO] Starting Flask application v0.2.0
2025-06-28 23:39:17,207 [WARNING]  * Debugger is active!
2025-06-28 23:39:17,213 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:39:29,788 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:39:29,789 [INFO] webhook 执行时间: 0.0006秒
2025-06-28 23:39:29,790 [INFO] 127.0.0.1 - - [28/Jun/2025 23:39:29] "[31m[1mPOST /webhook?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.testlongtoken HTTP/1.1[0m" 400 -
2025-06-28 23:39:50,185 [ERROR] add_transaction 执行失败: not enough values to unpack (expected 4, got 3)
2025-06-28 23:39:50,199 [INFO] 127.0.0.1 - - [28/Jun/2025 23:39:50] "[35m[1mPOST /add_transaction?firefly_access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.testlongtoken HTTP/1.1[0m" 500 -
2025-06-28 23:40:07,427 [WARNING] 无效的FireFly access token
2025-06-28 23:40:07,429 [INFO] firefly_webhook 执行时间: 0.0058秒
2025-06-28 23:40:07,430 [INFO] 127.0.0.1 - - [28/Jun/2025 23:40:07] "[31m[1mPOST /firefly-webhook?test_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.testtoken HTTP/1.1[0m" 403 -
2025-06-28 23:40:36,675 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:40:36,712 [INFO]  * Restarting with stat
2025-06-28 23:40:37,607 [INFO] Starting Flask application v0.2.0
2025-06-28 23:40:37,628 [WARNING]  * Debugger is active!
2025-06-28 23:40:37,634 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:40:40,964 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:40:41,003 [INFO]  * Restarting with stat
2025-06-28 23:40:41,973 [INFO] Starting Flask application v0.2.0
2025-06-28 23:40:41,996 [WARNING]  * Debugger is active!
2025-06-28 23:40:42,002 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:40:59,453 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:40:59,454 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:40:59,454 [INFO] 127.0.0.1 - - [28/Jun/2025 23:40:59] "[31m[1mPOST /webhook?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.testlongtoken HTTP/1.1[0m" 400 -
2025-06-28 23:41:34,589 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:41:34,628 [INFO]  * Restarting with stat
2025-06-28 23:41:35,584 [INFO] Starting Flask application v0.2.0
2025-06-28 23:41:35,613 [WARNING]  * Debugger is active!
2025-06-28 23:41:35,620 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:41:37,923 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:41:37,979 [INFO]  * Restarting with stat
2025-06-28 23:41:38,974 [INFO] Starting Flask application v0.2.0
2025-06-28 23:41:38,999 [WARNING]  * Debugger is active!
2025-06-28 23:41:39,005 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:41:51,304 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:41:51,305 [INFO] webhook 执行时间: 0.0011秒
2025-06-28 23:41:51,306 [INFO] 127.0.0.1 - - [28/Jun/2025 23:41:51] "[31m[1mPOST /webhook?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.test HTTP/1.1[0m" 400 -
2025-06-28 23:42:03,872 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:42:03,916 [INFO]  * Restarting with stat
2025-06-28 23:42:04,776 [INFO] Starting Flask application v0.2.0
2025-06-28 23:42:04,798 [WARNING]  * Debugger is active!
2025-06-28 23:42:04,803 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:42:08,127 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:42:08,169 [INFO]  * Restarting with stat
2025-06-28 23:42:09,159 [INFO] Starting Flask application v0.2.0
2025-06-28 23:42:09,182 [WARNING]  * Debugger is active!
2025-06-28 23:42:09,189 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:42:21,128 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:42:21,174 [INFO]  * Restarting with stat
2025-06-28 23:42:22,098 [INFO] Starting Flask application v0.2.0
2025-06-28 23:42:22,119 [WARNING]  * Debugger is active!
2025-06-28 23:42:22,125 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:42:26,547 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:42:26,587 [INFO]  * Restarting with stat
2025-06-28 23:42:27,592 [INFO] Starting Flask application v0.2.0
2025-06-28 23:42:27,616 [WARNING]  * Debugger is active!
2025-06-28 23:42:27,621 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:42:43,232 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:42:43,233 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:42:43,234 [INFO] 127.0.0.1 - - [28/Jun/2025 23:42:43] "[31m[1mPOST /webhook?token[FILTERED] HTTP/1.1[0m" 400 -
2025-06-28 23:42:53,248 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:42:53,250 [INFO] webhook 执行时间: 0.0025秒
2025-06-28 23:42:53,251 [INFO] 127.0.0.1 - - [28/Jun/2025 23:42:53] "[31m[1mPOST /webhook?token[FILTERED] HTTP/1.1[0m" 400 -
2025-06-28 23:43:05,356 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:43:05,395 [INFO]  * Restarting with stat
2025-06-28 23:43:06,254 [INFO] Starting Flask application v0.2.0
2025-06-28 23:43:06,276 [WARNING]  * Debugger is active!
2025-06-28 23:43:06,282 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:43:09,599 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:43:09,638 [INFO]  * Restarting with stat
2025-06-28 23:43:10,596 [INFO] Starting Flask application v0.2.0
2025-06-28 23:43:10,620 [WARNING]  * Debugger is active!
2025-06-28 23:43:10,626 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:43:24,519 [ERROR] webhook 执行失败: not enough values to unpack (expected 4, got 3)
2025-06-28 23:43:24,531 [INFO] 127.0.0.1 - - [28/Jun/2025 23:43:24] "POST /webhook?token=[FILTERED] HTTP/1.1" 500 -
2025-06-28 23:43:34,676 [ERROR] webhook 执行失败: not enough values to unpack (expected 4, got 3)
2025-06-28 23:43:34,688 [INFO] 127.0.0.1 - - [28/Jun/2025 23:43:34] "POST /webhook?token=[FILTERED] HTTP/1.1" 500 -
2025-06-28 23:43:50,332 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:43:50,337 [INFO] webhook 执行时间: 0.0057秒
2025-06-28 23:43:50,337 [INFO] 127.0.0.1 - - [28/Jun/2025 23:43:50] "[31m[1mPOST /webhook?firefly_access_token[FILTERED] HTTP/1.1[0m" 400 -
2025-06-28 23:44:21,998 [INFO] 开始处理交易请求 [ID: 3144ee1e]
2025-06-28 23:44:21,999 [INFO] [3144ee1e] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:44:21,999 [INFO] 添加交易记录: 午饭
2025-06-28 23:44:21,999 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:44:22,270 [INFO] 交易添加成功: 208
2025-06-28 23:44:22,270 [INFO] [3144ee1e] 交易创建成功: amount=35.0, description=午饭
2025-06-28 23:44:22,271 [INFO] add_transaction 执行时间: 0.2734秒
2025-06-28 23:44:22,271 [INFO] 192.168.1.68 - - [28/Jun/2025 23:44:22] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-28 23:44:22,272 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:44:22,273 [INFO] webhook 执行时间: 0.0008秒
2025-06-28 23:44:22,274 [INFO] 192.168.1.195 - - [28/Jun/2025 23:44:22] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:44:22,283 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:44:22,283 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:44:22,283 [INFO] 192.168.1.195 - - [28/Jun/2025 23:44:22] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:44:22,300 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:44:22,300 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:44:22,300 [INFO] 192.168.1.195 - - [28/Jun/2025 23:44:22] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:47:45,635 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:47:45,679 [INFO]  * Restarting with stat
2025-06-28 23:47:46,588 [INFO] Starting Flask application v0.2.0
2025-06-28 23:47:46,613 [WARNING]  * Debugger is active!
2025-06-28 23:47:46,619 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:47:51,061 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-28 23:47:51,106 [INFO]  * Restarting with stat
2025-06-28 23:47:52,057 [INFO] Starting Flask application v0.2.0
2025-06-28 23:47:52,082 [WARNING]  * Debugger is active!
2025-06-28 23:47:52,088 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:48:05,786 [WARNING] 无效的FireFly access token
2025-06-28 23:48:05,787 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:48:05,789 [INFO] 127.0.0.1 - - [28/Jun/2025 23:48:05] "[31m[1mPOST /webhook HTTP/1.1[0m" 403 -
2025-06-28 23:48:24,022 [WARNING] 无效的FireFly access token
2025-06-28 23:48:24,022 [INFO] webhook 执行时间: 0.0006秒
2025-06-28 23:48:24,023 [INFO] 127.0.0.1 - - [28/Jun/2025 23:48:24] "[31m[1mPOST /webhook HTTP/1.1[0m" 403 -
2025-06-28 23:48:35,857 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:48:35,858 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:48:35,859 [INFO] 127.0.0.1 - - [28/Jun/2025 23:48:35] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:49:16,037 [INFO] 开始处理交易请求 [ID: 8a30bafb]
2025-06-28 23:49:16,038 [INFO] [8a30bafb] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:49:16,038 [INFO] 添加交易记录: 午饭
2025-06-28 23:49:16,038 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:49:16,315 [INFO] 交易添加成功: 209
2025-06-28 23:49:16,316 [INFO] [8a30bafb] 交易创建成功: amount=35.0, description=午饭
2025-06-28 23:49:16,316 [INFO] add_transaction 执行时间: 0.2805秒
2025-06-28 23:49:16,317 [INFO] 192.168.1.68 - - [28/Jun/2025 23:49:16] "POST /add_transaction?Authorization=[FILTERED] HTTP/1.1" 201 -
2025-06-28 23:49:16,319 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:49:16,319 [INFO] webhook 执行时间: 0.0011秒
2025-06-28 23:49:16,320 [INFO] 192.168.1.195 - - [28/Jun/2025 23:49:16] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:49:16,333 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:49:16,334 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:49:16,334 [INFO] 192.168.1.195 - - [28/Jun/2025 23:49:16] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:49:16,351 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:49:16,352 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:49:16,352 [INFO] 192.168.1.195 - - [28/Jun/2025 23:49:16] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:50:49,998 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Missing required field: trigger
2025-06-28 23:50:49,999 [INFO] webhook 执行时间: 0.0020秒
2025-06-28 23:50:49,999 [INFO] 127.0.0.1 - - [28/Jun/2025 23:50:49] "POST /webhook HTTP/1.1" 200 -
2025-06-28 23:51:40,092 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-28 23:51:40,156 [INFO]  * Restarting with stat
2025-06-28 23:51:41,063 [INFO] Starting Flask application v0.2.0
2025-06-28 23:51:41,086 [WARNING]  * Debugger is active!
2025-06-28 23:51:41,092 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:51:43,375 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-28 23:51:43,439 [INFO]  * Restarting with stat
2025-06-28 23:51:44,375 [INFO] Starting Flask application v0.2.0
2025-06-28 23:51:44,401 [WARNING]  * Debugger is active!
2025-06-28 23:51:44,407 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:51:58,079 [ERROR] Webhook处理过程中发生未知错误: 400 Bad Request: Missing required field: trigger
2025-06-28 23:51:58,079 [INFO] webhook 执行时间: 0.0016秒
2025-06-28 23:51:58,080 [INFO] 127.0.0.1 - - [28/Jun/2025 23:51:58] "POST /webhook HTTP/1.1" 200 -
2025-06-28 23:53:14,033 [INFO] Request headers: {'Content-Type': 'application/json', 'Authorization': '[FILTERED]', 'User-Agent': 'Mozilla/5.0 (Windows NT; Windows NT 10.0; zh-CN) WindowsPowerShell/5.1.26100.4484', 'Host': 'localhost:9012', 'Content-Length': '218'}
2025-06-28 23:53:14,034 [INFO] Received data: {"trigger": "STORE_TRANSACTION", "content": {"transactions": [{"id": "123", "amount": "[FILTERED]", "description": "Test transaction", "source_name": "Cash", "destination_name": "Groceries", "category_name": "Food", "date": "2025-06-28"}]}}
2025-06-28 23:53:14,035 [INFO] Webhook处理成功: 您新增了一笔交易：Test transaction, 费用：[FILTERED]，分类：Food，预算：无预算。
2025-06-28 23:53:14,036 [INFO] webhook 执行时间: 0.0046秒
2025-06-28 23:53:14,036 [INFO] 127.0.0.1 - - [28/Jun/2025 23:53:14] "POST /webhook HTTP/1.1" 200 -
2025-06-28 23:53:26,454 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:53:26,454 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:53:26,455 [INFO] 127.0.0.1 - - [28/Jun/2025 23:53:26] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:54:10,480 [INFO] 开始处理交易请求 [ID: 0a8811ac]
2025-06-28 23:54:10,480 [INFO] [0a8811ac] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:54:10,480 [INFO] 添加交易记录: 午饭
2025-06-28 23:54:10,481 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:54:10,772 [INFO] 交易添加成功: 210
2025-06-28 23:54:10,773 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:54:10,773 [INFO] [0a8811ac] 交易创建成功: amount=35.0, description=午饭
2025-06-28 23:54:10,774 [INFO] webhook 执行时间: 0.0010秒
2025-06-28 23:54:10,775 [INFO] add_transaction 执行时间: 0.2970秒
2025-06-28 23:54:10,775 [INFO] 192.168.1.195 - - [28/Jun/2025 23:54:10] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:54:10,776 [INFO] 192.168.1.68 - - [28/Jun/2025 23:54:10] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-28 23:54:10,787 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:54:10,787 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:54:10,788 [INFO] 192.168.1.195 - - [28/Jun/2025 23:54:10] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:54:10,808 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:54:10,809 [INFO] webhook 执行时间: 0.0011秒
2025-06-28 23:54:10,809 [INFO] 192.168.1.195 - - [28/Jun/2025 23:54:10] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:55:15,428 [INFO] Starting Flask application v0.2.0
2025-06-28 23:55:16,736 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-28 23:55:16,737 [INFO] [33mPress CTRL+C to quit[0m
2025-06-28 23:55:16,739 [INFO]  * Restarting with stat
2025-06-28 23:55:17,652 [INFO] Starting Flask application v0.2.0
2025-06-28 23:55:17,672 [WARNING]  * Debugger is active!
2025-06-28 23:55:17,678 [INFO]  * Debugger PIN: 122-422-975
2025-06-28 23:55:21,359 [INFO] 开始处理交易请求 [ID: eeffb0f2]
2025-06-28 23:55:21,359 [INFO] [eeffb0f2] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-28 23:55:21,360 [INFO] 添加交易记录: 午饭
2025-06-28 23:55:21,360 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-28 23:55:21,649 [INFO] 交易添加成功: 211
2025-06-28 23:55:21,650 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:55:21,650 [INFO] [eeffb0f2] 交易创建成功: amount=35.0, description=午饭
2025-06-28 23:55:21,650 [INFO] webhook 执行时间: 0.0000秒
2025-06-28 23:55:21,651 [INFO] add_transaction 执行时间: 0.2921秒
2025-06-28 23:55:21,652 [INFO] 192.168.1.195 - - [28/Jun/2025 23:55:21] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:55:21,652 [INFO] 192.168.1.68 - - [28/Jun/2025 23:55:21] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-28 23:55:21,662 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:55:21,663 [INFO] webhook 执行时间: 0.0011秒
2025-06-28 23:55:21,663 [INFO] 192.168.1.195 - - [28/Jun/2025 23:55:21] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-28 23:55:21,696 [WARNING] 缺少X-User-ID请求头
2025-06-28 23:55:21,702 [INFO] webhook 执行时间: 0.0066秒
2025-06-28 23:55:21,706 [INFO] 192.168.1.195 - - [28/Jun/2025 23:55:21] "[31m[1mPOST /webhook HTTP/1.1[0m" 400 -
2025-06-29 10:16:36,987 [INFO] Starting Flask application v0.2.0
2025-06-29 10:16:38,529 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 10:16:38,529 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 10:16:38,532 [INFO]  * Restarting with stat
2025-06-29 10:16:39,558 [INFO] Starting Flask application v0.2.0
2025-06-29 10:16:39,580 [WARNING]  * Debugger is active!
2025-06-29 10:16:39,586 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 10:16:43,285 [INFO] 开始处理交易请求 [ID: 6eca73cc]
2025-06-29 10:16:43,285 [INFO] [6eca73cc] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 10:16:43,286 [INFO] 添加交易记录: 午饭
2025-06-29 10:16:43,286 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 10:16:45,889 [INFO] 交易添加成功: 212
2025-06-29 10:16:45,890 [INFO] [6eca73cc] 交易创建成功: amount=35.0, description=午饭
2025-06-29 10:16:45,890 [INFO] add_transaction 执行时间: 2.6153秒
2025-06-29 10:16:45,891 [INFO] 192.168.1.68 - - [29/Jun/2025 10:16:45] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 10:16:46,028 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,031 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,031 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,031 [WARNING] 无法验证Webhook签名
2025-06-29 10:16:46,032 [INFO] webhook 执行时间: 0.0164秒
2025-06-29 10:16:46,032 [INFO] 192.168.1.195 - - [29/Jun/2025 10:16:46] "[31m[1mPOST /webhook HTTP/1.1[0m" 403 -
2025-06-29 10:16:46,051 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,052 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,052 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,054 [WARNING] 无法验证Webhook签名
2025-06-29 10:16:46,055 [INFO] webhook 执行时间: 0.0047秒
2025-06-29 10:16:46,056 [INFO] 192.168.1.195 - - [29/Jun/2025 10:16:46] "[31m[1mPOST /webhook HTTP/1.1[0m" 403 -
2025-06-29 10:16:46,084 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,096 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,100 [ERROR] 签名验证过程中发生错误: 'UserConfig' object has no attribute 'get'
2025-06-29 10:16:46,100 [WARNING] 无法验证Webhook签名
2025-06-29 10:16:46,101 [INFO] webhook 执行时间: 0.0180秒
2025-06-29 10:16:46,111 [INFO] 192.168.1.195 - - [29/Jun/2025 10:16:46] "[31m[1mPOST /webhook HTTP/1.1[0m" 403 -
2025-06-29 10:17:27,098 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-29 10:17:27,135 [INFO]  * Restarting with stat
2025-06-29 10:17:28,085 [INFO] Starting Flask application v0.2.0
2025-06-29 10:17:28,111 [WARNING]  * Debugger is active!
2025-06-29 10:17:28,120 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 10:17:30,423 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\webhook_handler.py', reloading
2025-06-29 10:17:30,494 [INFO]  * Restarting with stat
2025-06-29 10:17:31,729 [INFO] Starting Flask application v0.2.0
2025-06-29 10:17:31,759 [WARNING]  * Debugger is active!
2025-06-29 10:17:31,766 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 10:17:48,707 [INFO] 开始处理交易请求 [ID: b9f25008]
2025-06-29 10:17:48,707 [INFO] [b9f25008] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 10:17:48,708 [INFO] 添加交易记录: 午饭
2025-06-29 10:17:48,708 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 10:17:49,022 [INFO] 交易添加成功: 213
2025-06-29 10:17:49,023 [INFO] [b9f25008] 交易创建成功: amount=35.0, description=午饭
2025-06-29 10:17:49,024 [INFO] add_transaction 执行时间: 0.3185秒
2025-06-29 10:17:49,025 [INFO] 192.168.1.68 - - [29/Jun/2025 10:17:49] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 10:17:49,028 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751163470,v1=1baa95376af1eb7c8aaaefd33e576dc643239ac96b7ff042eb017cb860d93ebf', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 10:17:49,029 [INFO] Received data: {"uuid": "efaeb3b8-a6e7-44d8-be45-498a6e5a181f", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 211, "created_at": "2025-06-28T23:55:22+08:00", "updated_at": "2025-06-28T23:55:22+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "211", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/211"}]}}
2025-06-29 10:17:49,030 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 10:17:49,030 [INFO] webhook 执行时间: 0.0034秒
2025-06-29 10:17:49,031 [INFO] 192.168.1.195 - - [29/Jun/2025 10:17:49] "POST /webhook HTTP/1.1" 200 -
2025-06-29 10:17:49,081 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751163470,v1=dc380a3100f3cdac03b14744fe76574750debd89e55f919281afff64f763faa8', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 10:17:49,082 [INFO] Received data: {"uuid": "b0ccb19f-4136-42c7-a3f0-9e5d8e826002", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 212, "created_at": "2025-06-29T10:16:46+08:00", "updated_at": "2025-06-29T10:16:46+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "212", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/212"}]}}
2025-06-29 10:17:49,082 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 10:17:49,083 [INFO] webhook 执行时间: 0.0061秒
2025-06-29 10:17:49,083 [INFO] 192.168.1.195 - - [29/Jun/2025 10:17:49] "POST /webhook HTTP/1.1" 200 -
2025-06-29 10:17:49,100 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751163470,v1=f0665f004ae9029dda7191feb280828c94c2e63817292788dc6886bf466a236e', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 10:17:49,101 [INFO] Received data: {"uuid": "57f1c505-c725-4feb-942a-2552ade89da6", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 213, "created_at": "2025-06-29T10:17:49+08:00", "updated_at": "2025-06-29T10:17:49+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "213", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/213"}]}}
2025-06-29 10:17:49,127 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 10:17:49,157 [INFO] webhook 执行时间: 0.0593秒
2025-06-29 10:17:49,163 [INFO] 192.168.1.195 - - [29/Jun/2025 10:17:49] "POST /webhook HTTP/1.1" 200 -
2025-06-29 10:55:58,107 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\notification_handler.py', reloading
2025-06-29 10:55:58,155 [INFO]  * Restarting with stat
2025-06-29 10:55:59,341 [INFO] Starting Flask application v0.2.0
2025-06-29 10:55:59,363 [WARNING]  * Debugger is active!
2025-06-29 10:55:59,370 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 10:56:07,090 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\notification_handler.py', reloading
2025-06-29 10:56:07,172 [INFO]  * Restarting with stat
2025-06-29 10:56:08,924 [INFO] Starting Flask application v0.2.0
2025-06-29 10:56:08,948 [WARNING]  * Debugger is active!
2025-06-29 10:56:08,954 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 10:56:20,894 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\notification_handler.py', reloading
2025-06-29 10:56:20,964 [INFO]  * Restarting with stat
2025-06-29 10:56:22,094 [INFO] Starting Flask application v0.2.0
2025-06-29 10:56:22,117 [WARNING]  * Debugger is active!
2025-06-29 10:56:22,125 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 10:57:08,909 [INFO] 开始处理交易请求 [ID: 9d9b7cae]
2025-06-29 10:57:08,910 [INFO] [9d9b7cae] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 10:57:08,910 [INFO] 添加交易记录: 午饭
2025-06-29 10:57:08,911 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 10:57:09,213 [INFO] 交易添加成功: 214
2025-06-29 10:57:09,213 [INFO] [9d9b7cae] 交易创建成功: amount=35.0, description=午饭
2025-06-29 10:57:09,214 [INFO] add_transaction 执行时间: 0.3058秒
2025-06-29 10:57:09,215 [INFO] 192.168.1.68 - - [29/Jun/2025 10:57:09] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 10:57:09,223 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751165830,v1=1c050b883327671e6ec55643c699f6b118cb7bf10db7a761b71432d9a21508df', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 10:57:09,224 [INFO] Received data: {"uuid": "089d7858-5725-49a9-846b-2a407a62c133", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 214, "created_at": "2025-06-29T10:57:10+08:00", "updated_at": "2025-06-29T10:57:10+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "214", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/214"}]}}
2025-06-29 10:57:09,225 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 10:57:09,225 [INFO] webhook 执行时间: 0.0051秒
2025-06-29 10:57:09,226 [INFO] 192.168.1.195 - - [29/Jun/2025 10:57:09] "POST /webhook HTTP/1.1" 200 -
2025-06-29 11:03:41,053 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-29 11:03:41,102 [INFO]  * Restarting with stat
2025-06-29 11:03:42,158 [INFO] Starting Flask application v0.2.0
2025-06-29 11:03:42,184 [WARNING]  * Debugger is active!
2025-06-29 11:03:42,193 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 11:03:43,475 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-29 11:03:43,612 [INFO]  * Restarting with stat
2025-06-29 11:03:44,907 [INFO] Starting Flask application v0.2.0
2025-06-29 11:03:44,935 [WARNING]  * Debugger is active!
2025-06-29 11:03:44,987 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 11:03:55,892 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-29 11:03:55,926 [INFO]  * Restarting with stat
2025-06-29 11:03:56,854 [INFO] Starting Flask application v0.2.0
2025-06-29 11:03:56,875 [WARNING]  * Debugger is active!
2025-06-29 11:03:56,881 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 11:03:59,141 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\transaction_handler.py', reloading
2025-06-29 11:03:59,181 [INFO]  * Restarting with stat
2025-06-29 11:04:00,195 [INFO] Starting Flask application v0.2.0
2025-06-29 11:04:00,221 [WARNING]  * Debugger is active!
2025-06-29 11:04:00,227 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 11:04:10,021 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-29 11:04:10,066 [INFO]  * Restarting with stat
2025-06-29 11:04:10,959 [INFO] Starting Flask application v0.2.0
2025-06-29 11:04:10,980 [WARNING]  * Debugger is active!
2025-06-29 11:04:10,987 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 11:04:14,316 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-29 11:04:14,382 [INFO]  * Restarting with stat
2025-06-29 11:04:15,328 [INFO] Starting Flask application v0.2.0
2025-06-29 11:04:15,357 [WARNING]  * Debugger is active!
2025-06-29 11:04:15,365 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 11:04:32,710 [INFO] 开始处理交易请求 [ID: 2df7778e]
2025-06-29 11:04:32,711 [INFO] [2df7778e] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 11:04:32,711 [INFO] 添加交易记录: 午饭
2025-06-29 11:04:32,712 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 11:04:32,990 [INFO] 交易添加成功: 215
2025-06-29 11:04:32,991 [INFO] [2df7778e] 交易创建成功: amount=35.0, description=午饭
2025-06-29 11:04:32,991 [ERROR] [2df7778e] 发送通知失败: NotificationHandler.send_transaction_notification() got an unexpected keyword argument 'request_body'
2025-06-29 11:04:32,992 [INFO] add_transaction 执行时间: 0.2816秒
2025-06-29 11:04:32,994 [INFO] 192.168.1.68 - - [29/Jun/2025 11:04:32] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 11:04:33,004 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751166274,v1=9ddc5604da13a30d4b1c5839788543a8fd3cbee3fd4a01b2158a4fa392e6c4bf', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 11:04:33,005 [INFO] Received data: {"uuid": "be78af79-84da-423f-b8ee-c51f14e16b2e", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 215, "created_at": "2025-06-29T11:04:33+08:00", "updated_at": "2025-06-29T11:04:33+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "215", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/215"}]}}
2025-06-29 11:04:33,007 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 11:04:33,008 [INFO] webhook 执行时间: 0.0052秒
2025-06-29 11:04:33,011 [INFO] 192.168.1.195 - - [29/Jun/2025 11:04:33] "POST /webhook HTTP/1.1" 200 -
2025-06-29 11:04:43,791 [INFO] Starting Flask application v0.2.0
2025-06-29 11:04:45,118 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 11:04:45,118 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 11:04:45,122 [INFO]  * Restarting with stat
2025-06-29 11:04:46,115 [INFO] Starting Flask application v0.2.0
2025-06-29 11:04:46,140 [WARNING]  * Debugger is active!
2025-06-29 11:04:46,146 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 11:04:47,475 [INFO] 开始处理交易请求 [ID: 3dfb0ef6]
2025-06-29 11:04:47,476 [INFO] [3dfb0ef6] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 11:04:47,476 [INFO] 添加交易记录: 午饭
2025-06-29 11:04:47,477 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 11:04:47,772 [INFO] 交易添加成功: 216
2025-06-29 11:04:47,773 [INFO] [3dfb0ef6] 交易创建成功: amount=35.0, description=午饭
2025-06-29 11:04:47,773 [ERROR] [3dfb0ef6] 发送通知失败: NotificationHandler.send_transaction_notification() got an unexpected keyword argument 'request_body'
2025-06-29 11:04:47,774 [INFO] add_transaction 执行时间: 0.2993秒
2025-06-29 11:04:47,775 [INFO] 192.168.1.68 - - [29/Jun/2025 11:04:47] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 11:04:47,785 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751166288,v1=cad7ac0b9a493c615ea0167a5fb676c03a00acbc76e4a05c5691b60cff5d27ca', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 11:04:47,785 [INFO] Received data: {"uuid": "7a28a80b-01ec-44f5-9951-6f997cb37d92", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 216, "created_at": "2025-06-29T11:04:48+08:00", "updated_at": "2025-06-29T11:04:48+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "216", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/216"}]}}
2025-06-29 11:04:47,786 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 11:04:47,788 [INFO] webhook 执行时间: 0.0040秒
2025-06-29 11:04:47,791 [INFO] 192.168.1.195 - - [29/Jun/2025 11:04:47] "POST /webhook HTTP/1.1" 200 -
2025-06-29 13:32:09,917 [INFO] 开始处理交易请求 [ID: 44145646]
2025-06-29 13:32:09,919 [INFO] [44145646] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 13:32:09,920 [INFO] 添加交易记录: 午饭
2025-06-29 13:32:09,920 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 13:32:10,224 [INFO] 交易添加成功: 217
2025-06-29 13:32:10,225 [INFO] [44145646] 交易创建成功: amount=35.0, description=午饭
2025-06-29 13:32:10,225 [ERROR] [44145646] 发送通知失败: NotificationHandler.send_transaction_notification() got an unexpected keyword argument 'request_body'
2025-06-29 13:32:10,226 [INFO] add_transaction 执行时间: 0.3196秒
2025-06-29 13:32:10,227 [INFO] 192.168.1.68 - - [29/Jun/2025 13:32:10] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 13:32:10,284 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751175131,v1=f239ed6df846afae3f436dfee640638b9706cee946077efdab372450939c0dfa', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 13:32:10,285 [INFO] Received data: {"uuid": "f9cb8143-c660-47d8-b6e5-ab91c9e12e37", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 217, "created_at": "2025-06-29T13:32:11+08:00", "updated_at": "2025-06-29T13:32:11+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "217", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/217"}]}}
2025-06-29 13:32:10,286 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 13:32:10,286 [INFO] webhook 执行时间: 0.0546秒
2025-06-29 13:32:10,287 [INFO] 192.168.1.195 - - [29/Jun/2025 13:32:10] "POST /webhook HTTP/1.1" 200 -
2025-06-29 13:41:21,470 [INFO]  * Detected change in 'D:\\fleshrecord\\test_notification_fix.py', reloading
2025-06-29 13:41:21,527 [INFO]  * Restarting with stat
2025-06-29 13:41:22,957 [INFO] Starting Flask application v0.2.0
2025-06-29 13:41:22,980 [WARNING]  * Debugger is active!
2025-06-29 13:41:22,986 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 13:41:47,934 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\notification_handler.py', reloading
2025-06-29 13:41:48,025 [INFO]  * Restarting with stat
2025-06-29 13:41:49,010 [INFO] Starting Flask application v0.2.0
2025-06-29 13:41:49,038 [WARNING]  * Debugger is active!
2025-06-29 13:41:49,044 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 13:41:57,807 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\notification_handler.py', reloading
2025-06-29 13:41:57,848 [INFO]  * Restarting with stat
2025-06-29 13:41:59,018 [INFO] Starting Flask application v0.2.0
2025-06-29 13:41:59,044 [WARNING]  * Debugger is active!
2025-06-29 13:41:59,049 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 13:42:20,635 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\notification_handler.py', reloading
2025-06-29 13:42:20,680 [INFO]  * Restarting with stat
2025-06-29 13:42:21,921 [INFO] Starting Flask application v0.2.0
2025-06-29 13:42:21,956 [WARNING]  * Debugger is active!
2025-06-29 13:42:21,968 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 13:42:30,730 [INFO]  * Detected change in 'D:\\fleshrecord\\test_notification_fix.py', reloading
2025-06-29 13:42:30,777 [INFO]  * Restarting with stat
2025-06-29 13:42:32,036 [INFO] Starting Flask application v0.2.0
2025-06-29 13:42:32,058 [WARNING]  * Debugger is active!
2025-06-29 13:42:32,064 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 13:43:17,952 [INFO] 开始处理交易请求 [ID: df82c1e5]
2025-06-29 13:43:17,953 [INFO] [df82c1e5] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 13:43:17,953 [INFO] 添加交易记录: 午饭
2025-06-29 13:43:17,954 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 13:43:18,216 [INFO] 交易添加成功: 218
2025-06-29 13:43:18,217 [INFO] [df82c1e5] 交易创建成功: amount=35.0, description=午饭
2025-06-29 13:43:18,218 [ERROR] [df82c1e5] 发送通知失败: NotificationHandler.send_transaction_notification() got an unexpected keyword argument 'request_body'
2025-06-29 13:43:18,218 [INFO] add_transaction 执行时间: 0.2660秒
2025-06-29 13:43:18,218 [INFO] 192.168.1.68 - - [29/Jun/2025 13:43:18] "POST /add_transaction?Authorization=[FILTERED] HTTP/1.1" 201 -
2025-06-29 13:43:18,227 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751175799,v1=d9e8a17d60baaa502b3cbbfa0e60a8347d2c9d23fe61fe032a49ecfc87443c9f', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 13:43:18,227 [INFO] Received data: {"uuid": "0d1f1a37-9957-4cdf-b757-f95b1321fbea", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 218, "created_at": "2025-06-29T13:43:19+08:00", "updated_at": "2025-06-29T13:43:19+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "218", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/218"}]}}
2025-06-29 13:43:18,228 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 13:43:18,228 [INFO] webhook 执行时间: 0.0047秒
2025-06-29 13:43:18,229 [INFO] 192.168.1.195 - - [29/Jun/2025 13:43:18] "POST /webhook HTTP/1.1" 200 -
2025-06-29 13:44:02,297 [INFO]  * Detected change in 'D:\\fleshrecord\\test_notification_fix.py', reloading
2025-06-29 13:44:02,340 [INFO]  * Restarting with stat
2025-06-29 13:44:03,363 [INFO] Starting Flask application v0.2.0
2025-06-29 13:44:03,395 [WARNING]  * Debugger is active!
2025-06-29 13:44:03,403 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 13:44:04,623 [INFO]  * Detected change in 'D:\\fleshrecord\\test_notification_fix.py', reloading
2025-06-29 13:44:04,710 [INFO]  * Restarting with stat
2025-06-29 13:44:05,791 [INFO] Starting Flask application v0.2.0
2025-06-29 13:44:05,816 [WARNING]  * Debugger is active!
2025-06-29 13:44:05,821 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 13:44:12,558 [INFO]  * Detected change in 'D:\\fleshrecord\\handlers\\notification_handler.py', reloading
2025-06-29 13:44:12,625 [INFO]  * Restarting with stat
2025-06-29 13:44:14,041 [INFO] Starting Flask application v0.2.0
2025-06-29 13:44:14,064 [WARNING]  * Debugger is active!
2025-06-29 13:44:14,069 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 13:45:18,878 [INFO] 开始处理交易请求 [ID: 5dca6822]
2025-06-29 13:45:18,879 [INFO] [5dca6822] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 13:45:18,879 [INFO] 添加交易记录: 午饭
2025-06-29 13:45:18,880 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 13:45:19,163 [INFO] 交易添加成功: 219
2025-06-29 13:45:19,164 [INFO] [5dca6822] 交易创建成功: amount=35.0, description=午饭
2025-06-29 13:45:19,164 [ERROR] [5dca6822] 发送通知失败: NotificationHandler.send_transaction_notification() got an unexpected keyword argument 'request_body'
2025-06-29 13:45:19,164 [INFO] add_transaction 执行时间: 0.2862秒
2025-06-29 13:45:19,165 [INFO] 192.168.1.68 - - [29/Jun/2025 13:45:19] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 13:45:19,174 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751175920,v1=48383823302d33408954237ab1befbeff37347644115882b1625a0a94d29cf22', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 13:45:19,174 [INFO] Received data: {"uuid": "f2b6360d-08a0-4fba-9b77-7cbdc148d799", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 219, "created_at": "2025-06-29T13:45:20+08:00", "updated_at": "2025-06-29T13:45:20+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "219", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/219"}]}}
2025-06-29 13:45:19,174 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 13:45:19,175 [INFO] webhook 执行时间: 0.0041秒
2025-06-29 13:45:19,176 [INFO] 192.168.1.195 - - [29/Jun/2025 13:45:19] "POST /webhook HTTP/1.1" 200 -
2025-06-29 13:47:23,652 [INFO] 开始处理交易请求 [ID: b3a30779]
2025-06-29 13:47:23,653 [INFO] [b3a30779] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 13:47:23,654 [INFO] 添加交易记录: 午饭
2025-06-29 13:47:23,654 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 13:47:23,950 [INFO] 交易添加成功: 220
2025-06-29 13:47:23,964 [INFO] [b3a30779] 交易创建成功: amount=35.0, description=午饭
2025-06-29 13:47:23,964 [ERROR] [b3a30779] 发送通知失败: NotificationHandler.send_transaction_notification() got an unexpected keyword argument 'request_body'
2025-06-29 13:47:23,965 [INFO] add_transaction 执行时间: 0.3125秒
2025-06-29 13:47:23,965 [INFO] 192.168.1.68 - - [29/Jun/2025 13:47:23] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 13:47:23,970 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751176045,v1=c0e8b290167edc1f0b258deb8aa0e4eee31da4a0e95452488cb56626a3946078', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 13:47:23,971 [INFO] Received data: {"uuid": "85d107f3-1fda-4429-a5ac-4743eda0794e", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 220, "created_at": "2025-06-29T13:47:24+08:00", "updated_at": "2025-06-29T13:47:24+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "220", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/220"}]}}
2025-06-29 13:47:23,972 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 13:47:23,972 [INFO] webhook 执行时间: 0.0044秒
2025-06-29 13:47:23,973 [INFO] 192.168.1.195 - - [29/Jun/2025 13:47:23] "POST /webhook HTTP/1.1" 200 -
2025-06-29 13:58:37,835 [INFO]  * Detected change in 'D:\\fleshrecord\\models\\user_config.py', reloading
2025-06-29 13:58:37,903 [INFO]  * Restarting with stat
2025-06-29 13:58:39,195 [INFO] Starting Flask application v0.2.0
2025-06-29 13:58:39,222 [WARNING]  * Debugger is active!
2025-06-29 13:58:39,229 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:00:26,513 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-29 14:00:26,551 [INFO]  * Restarting with stat
2025-06-29 14:00:27,450 [INFO] Starting Flask application v0.2.0
2025-06-29 14:00:27,468 [WARNING]  * Debugger is active!
2025-06-29 14:00:27,474 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:00:30,813 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-29 14:00:30,866 [INFO]  * Restarting with stat
2025-06-29 14:00:31,791 [INFO] Starting Flask application v0.2.0
2025-06-29 14:00:31,817 [WARNING]  * Debugger is active!
2025-06-29 14:00:31,850 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:00:42,701 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-29 14:00:42,740 [INFO]  * Restarting with stat
2025-06-29 14:00:43,641 [INFO] Starting Flask application v0.2.0
2025-06-29 14:00:43,644 [INFO] 定时任务调度器已启动
2025-06-29 14:00:43,646 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:00:43,646 [INFO] 定时报告服务已启动
2025-06-29 14:00:43,646 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:00:43,647 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:00:43,664 [WARNING]  * Debugger is active!
2025-06-29 14:00:43,671 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:00:47,068 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-29 14:00:47,116 [INFO]  * Restarting with stat
2025-06-29 14:00:48,986 [INFO] Starting Flask application v0.2.0
2025-06-29 14:00:48,990 [INFO] 定时任务调度器已启动
2025-06-29 14:00:48,991 [INFO] 定时报告服务已启动
2025-06-29 14:00:48,991 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:00:48,992 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:00:48,993 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:00:49,009 [WARNING]  * Debugger is active!
2025-06-29 14:00:49,015 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:01:48,995 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:01:48,995 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:01:48,995 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:02:21,749 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\report_service.py', reloading
2025-06-29 14:02:21,789 [INFO]  * Restarting with stat
2025-06-29 14:02:22,987 [INFO] Starting Flask application v0.2.0
2025-06-29 14:02:22,992 [INFO] 定时任务调度器已启动
2025-06-29 14:02:22,993 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:02:22,993 [INFO] 定时报告服务已启动
2025-06-29 14:02:22,993 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:02:22,994 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:02:23,009 [WARNING]  * Debugger is active!
2025-06-29 14:02:23,014 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:03:22,995 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:22,995 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:22,996 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:34,040 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:03:34,078 [INFO]  * Restarting with stat
2025-06-29 14:03:34,964 [INFO] Starting Flask application v0.2.0
2025-06-29 14:03:34,969 [INFO] 定时任务调度器已启动
2025-06-29 14:03:34,969 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:34,969 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:34,969 [INFO] 定时报告服务已启动
2025-06-29 14:03:34,970 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:34,987 [WARNING]  * Debugger is active!
2025-06-29 14:03:34,993 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:03:36,192 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:03:36,237 [INFO]  * Restarting with stat
2025-06-29 14:03:37,156 [INFO] Starting Flask application v0.2.0
2025-06-29 14:03:37,159 [INFO] 定时任务调度器已启动
2025-06-29 14:03:37,159 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:37,159 [INFO] 定时报告服务已启动
2025-06-29 14:03:37,160 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:37,160 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:03:37,174 [WARNING]  * Debugger is active!
2025-06-29 14:03:37,180 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:04:05,126 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\report_service.py', reloading
2025-06-29 14:04:05,166 [INFO]  * Restarting with stat
2025-06-29 14:21:12,726 [INFO] Starting Flask application v0.2.0
2025-06-29 14:21:12,730 [INFO] 定时任务调度器已启动
2025-06-29 14:21:12,730 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:21:12,730 [INFO] 定时报告服务已启动
2025-06-29 14:21:12,731 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:21:12,731 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:21:14,549 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 14:21:14,549 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 14:21:14,551 [INFO]  * Restarting with stat
2025-06-29 14:21:15,482 [INFO] Starting Flask application v0.2.0
2025-06-29 14:21:15,486 [INFO] 定时任务调度器已启动
2025-06-29 14:21:15,486 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:21:15,486 [INFO] 定时报告服务已启动
2025-06-29 14:21:15,487 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:21:15,487 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:21:15,517 [WARNING]  * Debugger is active!
2025-06-29 14:21:15,523 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:22:12,732 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:12,733 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:12,733 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:15,488 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:15,488 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:15,488 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:28,466 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:22:28,504 [INFO]  * Restarting with stat
2025-06-29 14:22:29,404 [INFO] Starting Flask application v0.2.0
2025-06-29 14:22:29,408 [INFO] 定时任务调度器已启动
2025-06-29 14:22:29,408 [INFO] 定时报告服务已启动
2025-06-29 14:22:29,408 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:29,409 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:29,409 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:29,426 [WARNING]  * Debugger is active!
2025-06-29 14:22:29,432 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:22:30,635 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:22:30,674 [INFO]  * Restarting with stat
2025-06-29 14:22:31,687 [INFO] Starting Flask application v0.2.0
2025-06-29 14:22:31,691 [INFO] 定时任务调度器已启动
2025-06-29 14:22:31,691 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:31,695 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:31,695 [INFO] 定时报告服务已启动
2025-06-29 14:22:31,695 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:31,711 [WARNING]  * Debugger is active!
2025-06-29 14:22:31,717 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:22:57,577 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:22:57,620 [INFO]  * Restarting with stat
2025-06-29 14:22:58,664 [INFO] Starting Flask application v0.2.0
2025-06-29 14:22:58,669 [INFO] 定时任务调度器已启动
2025-06-29 14:22:58,669 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:58,669 [INFO] 定时报告服务已启动
2025-06-29 14:22:58,670 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:58,670 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:22:58,687 [WARNING]  * Debugger is active!
2025-06-29 14:22:58,693 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:22:58,914 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:22:59,046 [INFO]  * Restarting with stat
2025-06-29 14:23:00,072 [INFO] Starting Flask application v0.2.0
2025-06-29 14:23:00,076 [INFO] 定时任务调度器已启动
2025-06-29 14:23:00,076 [INFO] 定时报告服务已启动
2025-06-29 14:23:00,076 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:00,077 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:00,077 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:00,097 [WARNING]  * Debugger is active!
2025-06-29 14:23:00,112 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:23:12,734 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:12,734 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:12,734 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:30,305 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:23:30,352 [INFO]  * Restarting with stat
2025-06-29 14:23:31,325 [INFO] Starting Flask application v0.2.0
2025-06-29 14:23:31,329 [INFO] 定时任务调度器已启动
2025-06-29 14:23:31,329 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:31,329 [INFO] 定时报告服务已启动
2025-06-29 14:23:31,329 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:31,330 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:31,345 [WARNING]  * Debugger is active!
2025-06-29 14:23:31,351 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:23:32,533 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:23:32,571 [INFO]  * Restarting with stat
2025-06-29 14:23:33,505 [INFO] Starting Flask application v0.2.0
2025-06-29 14:23:33,509 [INFO] 定时任务调度器已启动
2025-06-29 14:23:33,510 [INFO] 定时报告服务已启动
2025-06-29 14:23:33,510 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:33,510 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:33,511 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:23:33,526 [WARNING]  * Debugger is active!
2025-06-29 14:23:33,532 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:24:12,736 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:24:12,737 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:24:12,737 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:24:33,513 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:24:33,513 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:24:33,513 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:25:12,738 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:25:12,739 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:25:12,739 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:25:33,515 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:25:33,515 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:25:33,516 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:26:12,741 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:26:12,742 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:26:12,742 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:26:18,635 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\scheduler_service.py', reloading
2025-06-29 14:26:18,672 [INFO]  * Restarting with stat
2025-06-29 14:26:19,625 [INFO] Starting Flask application v0.2.0
2025-06-29 14:26:19,631 [INFO] 定时任务调度器已启动
2025-06-29 14:26:19,631 [INFO] 定时报告服务已启动
2025-06-29 14:26:19,649 [WARNING]  * Debugger is active!
2025-06-29 14:26:19,655 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:26:19,861 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\scheduler_service.py', reloading
2025-06-29 14:26:19,974 [INFO]  * Restarting with stat
2025-06-29 14:26:20,971 [INFO] Starting Flask application v0.2.0
2025-06-29 14:26:20,976 [INFO] 定时任务调度器已启动
2025-06-29 14:26:20,976 [INFO] 定时报告服务已启动
2025-06-29 14:26:20,999 [WARNING]  * Debugger is active!
2025-06-29 14:26:21,010 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:27:12,743 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:27:12,743 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:27:12,743 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:28:12,745 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:28:12,745 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:28:12,746 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:28:20,066 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\dify_service.py', reloading
2025-06-29 14:28:20,131 [INFO]  * Restarting with stat
2025-06-29 14:28:21,097 [INFO] Starting Flask application v0.2.0
2025-06-29 14:28:21,101 [INFO] 定时任务调度器已启动
2025-06-29 14:28:21,102 [INFO] 定时报告服务已启动
2025-06-29 14:28:21,125 [WARNING]  * Debugger is active!
2025-06-29 14:28:21,133 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:28:43,851 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:28:43,888 [INFO]  * Restarting with stat
2025-06-29 14:28:44,826 [INFO] Starting Flask application v0.2.0
2025-06-29 14:28:44,830 [INFO] 定时任务调度器已启动
2025-06-29 14:28:44,830 [INFO] 定时报告服务已启动
2025-06-29 14:28:44,846 [WARNING]  * Debugger is active!
2025-06-29 14:28:44,858 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:28:46,043 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:28:46,093 [INFO]  * Restarting with stat
2025-06-29 14:28:47,049 [INFO] Starting Flask application v0.2.0
2025-06-29 14:28:47,053 [INFO] 定时任务调度器已启动
2025-06-29 14:28:47,053 [INFO] 定时报告服务已启动
2025-06-29 14:28:47,074 [WARNING]  * Debugger is active!
2025-06-29 14:28:47,082 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:29:12,747 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:29:12,747 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:29:12,748 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:29:57,866 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:29:57,903 [INFO]  * Restarting with stat
2025-06-29 14:29:58,792 [INFO] Starting Flask application v0.2.0
2025-06-29 14:29:58,797 [INFO] 定时任务调度器已启动
2025-06-29 14:29:58,797 [INFO] 定时报告服务已启动
2025-06-29 14:29:58,816 [WARNING]  * Debugger is active!
2025-06-29 14:29:58,823 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:30:00,063 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:30:00,118 [INFO]  * Restarting with stat
2025-06-29 14:30:01,053 [INFO] Starting Flask application v0.2.0
2025-06-29 14:30:01,056 [INFO] 定时任务调度器已启动
2025-06-29 14:30:01,057 [INFO] 定时报告服务已启动
2025-06-29 14:30:01,071 [WARNING]  * Debugger is active!
2025-06-29 14:30:01,077 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:30:12,748 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:30:12,749 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:30:12,750 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:30:30,136 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:30:30,204 [INFO]  * Restarting with stat
2025-06-29 14:30:31,155 [INFO] Starting Flask application v0.2.0
2025-06-29 14:30:31,159 [INFO] 定时任务调度器已启动
2025-06-29 14:30:31,159 [INFO] 定时报告服务已启动
2025-06-29 14:30:31,176 [WARNING]  * Debugger is active!
2025-06-29 14:30:31,182 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:30:32,392 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:30:32,436 [INFO]  * Restarting with stat
2025-06-29 14:30:33,665 [INFO] Starting Flask application v0.2.0
2025-06-29 14:30:33,668 [INFO] 定时任务调度器已启动
2025-06-29 14:30:33,669 [INFO] 定时报告服务已启动
2025-06-29 14:30:33,685 [WARNING]  * Debugger is active!
2025-06-29 14:30:33,691 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:31:12,751 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:31:12,751 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:31:12,751 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:32:12,518 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\dify_service.py', reloading
2025-06-29 14:32:12,559 [INFO]  * Restarting with stat
2025-06-29 14:32:12,753 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:32:12,754 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:32:12,754 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:32:13,635 [INFO] Starting Flask application v0.2.0
2025-06-29 14:32:13,639 [INFO] 定时任务调度器已启动
2025-06-29 14:32:13,640 [INFO] 定时报告服务已启动
2025-06-29 14:32:13,659 [WARNING]  * Debugger is active!
2025-06-29 14:32:13,666 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:32:14,902 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\dify_service.py', reloading
2025-06-29 14:32:14,949 [INFO]  * Restarting with stat
2025-06-29 14:32:16,224 [INFO] Starting Flask application v0.2.0
2025-06-29 14:32:16,229 [INFO] 定时任务调度器已启动
2025-06-29 14:32:16,230 [INFO] 定时报告服务已启动
2025-06-29 14:32:16,259 [WARNING]  * Debugger is active!
2025-06-29 14:32:16,268 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:33:12,755 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:33:12,755 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:33:12,756 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:34:12,757 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:34:12,757 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:34:12,758 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:35:12,759 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:35:12,760 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:35:12,760 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:36:12,761 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:36:12,761 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:36:12,762 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:37:12,763 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:37:12,763 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:37:12,763 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:38:12,766 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:38:12,766 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:38:12,766 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:39:12,767 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:39:12,767 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:39:12,768 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:40:12,769 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:40:12,769 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:40:12,769 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:41:12,773 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:41:12,773 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:41:12,773 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:42:12,775 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:42:12,775 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:42:12,776 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:42:57,816 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\dify_service.py', reloading
2025-06-29 14:42:57,854 [INFO]  * Restarting with stat
2025-06-29 14:42:59,048 [INFO] Starting Flask application v0.2.0
2025-06-29 14:42:59,053 [INFO] 定时任务调度器已启动
2025-06-29 14:42:59,053 [INFO] 定时报告服务已启动
2025-06-29 14:42:59,069 [WARNING]  * Debugger is active!
2025-06-29 14:42:59,074 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:43:00,298 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\dify_service.py', reloading
2025-06-29 14:43:00,340 [INFO]  * Restarting with stat
2025-06-29 14:43:01,304 [INFO] Starting Flask application v0.2.0
2025-06-29 14:43:01,308 [INFO] 定时任务调度器已启动
2025-06-29 14:43:01,309 [INFO] 定时报告服务已启动
2025-06-29 14:43:01,329 [WARNING]  * Debugger is active!
2025-06-29 14:43:01,336 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:43:12,777 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:43:12,777 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:43:12,777 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:43:36,832 [INFO]  * Detected change in 'D:\\fleshrecord\\conf\\config.py', reloading
2025-06-29 14:43:36,886 [INFO]  * Restarting with stat
2025-06-29 14:43:37,775 [INFO] Starting Flask application v0.2.0
2025-06-29 14:43:37,779 [INFO] 定时任务调度器已启动
2025-06-29 14:43:37,779 [INFO] 定时报告服务已启动
2025-06-29 14:43:37,797 [WARNING]  * Debugger is active!
2025-06-29 14:43:37,802 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:44:12,779 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:44:12,779 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:44:12,779 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:44:57,156 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:44:57,194 [INFO]  * Restarting with stat
2025-06-29 14:44:58,104 [INFO] Starting Flask application v0.2.0
2025-06-29 14:44:58,107 [INFO] 定时任务调度器已启动
2025-06-29 14:44:58,108 [INFO] 定时报告服务已启动
2025-06-29 14:44:58,124 [WARNING]  * Debugger is active!
2025-06-29 14:44:58,130 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:44:59,321 [INFO]  * Detected change in 'D:\\fleshrecord\\test_report_system.py', reloading
2025-06-29 14:44:59,364 [INFO]  * Restarting with stat
2025-06-29 14:45:00,264 [INFO] Starting Flask application v0.2.0
2025-06-29 14:45:00,268 [INFO] 定时任务调度器已启动
2025-06-29 14:45:00,268 [INFO] 定时报告服务已启动
2025-06-29 14:45:00,284 [WARNING]  * Debugger is active!
2025-06-29 14:45:00,289 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:45:12,781 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:45:12,781 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:45:12,781 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:46:12,782 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:46:12,782 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:46:12,783 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:47:12,785 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:47:12,785 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:47:12,786 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:48:12,787 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:48:12,787 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:48:12,788 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:49:12,789 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:49:12,789 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:49:12,790 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:49:15,084 [INFO]  * Detected change in 'D:\\fleshrecord\\utils\\config_manager.py', reloading
2025-06-29 14:49:15,127 [INFO]  * Restarting with stat
2025-06-29 14:49:16,048 [INFO] Starting Flask application v0.2.0
2025-06-29 14:49:16,053 [INFO] 定时任务调度器已启动
2025-06-29 14:49:16,053 [INFO] 定时报告服务已启动
2025-06-29 14:49:16,072 [WARNING]  * Debugger is active!
2025-06-29 14:49:16,078 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:49:17,279 [INFO]  * Detected change in 'D:\\fleshrecord\\utils\\config_manager.py', reloading
2025-06-29 14:49:17,344 [INFO]  * Restarting with stat
2025-06-29 14:49:18,353 [INFO] Starting Flask application v0.2.0
2025-06-29 14:49:18,356 [INFO] 定时任务调度器已启动
2025-06-29 14:49:18,357 [INFO] 定时报告服务已启动
2025-06-29 14:49:18,374 [WARNING]  * Debugger is active!
2025-06-29 14:49:18,381 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:49:24,944 [INFO]  * Detected change in 'D:\\fleshrecord\\utils\\config_manager.py', reloading
2025-06-29 14:49:24,983 [INFO]  * Restarting with stat
2025-06-29 14:49:25,882 [INFO] Starting Flask application v0.2.0
2025-06-29 14:49:25,886 [INFO] 定时任务调度器已启动
2025-06-29 14:49:25,886 [INFO] 定时报告服务已启动
2025-06-29 14:49:25,904 [WARNING]  * Debugger is active!
2025-06-29 14:49:25,910 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:49:27,133 [INFO]  * Detected change in 'D:\\fleshrecord\\utils\\config_manager.py', reloading
2025-06-29 14:49:27,173 [INFO]  * Restarting with stat
2025-06-29 14:49:28,084 [INFO] Starting Flask application v0.2.0
2025-06-29 14:49:28,088 [INFO] 定时任务调度器已启动
2025-06-29 14:49:28,088 [INFO] 定时报告服务已启动
2025-06-29 14:49:28,104 [WARNING]  * Debugger is active!
2025-06-29 14:49:28,109 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 14:50:12,791 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:50:12,791 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:50:12,791 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:51:12,793 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:51:12,793 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:51:12,794 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:52:12,795 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:52:12,795 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:52:12,796 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:53:12,797 [ERROR] 处理用户 chen00 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:53:12,797 [ERROR] 处理用户 example_user 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:53:12,797 [ERROR] 处理用户 metalhouse 的报告任务时出错: 'UserConfigManager' object has no attribute 'load_user_config'
2025-06-29 14:53:14,473 [INFO]  * Detected change in 'D:\\fleshrecord\\services\\report_service.py', reloading
2025-06-29 14:53:14,511 [INFO]  * Restarting with stat
2025-06-29 16:28:07,875 [INFO] Starting Flask application v0.2.0
2025-06-29 16:28:07,878 [INFO] 定时任务调度器已启动
2025-06-29 16:28:07,879 [INFO] 定时报告服务已启动
2025-06-29 16:28:09,434 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 16:28:09,434 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 16:28:09,437 [INFO]  * Restarting with stat
2025-06-29 16:28:10,365 [INFO] Starting Flask application v0.2.0
2025-06-29 16:28:10,369 [INFO] 定时任务调度器已启动
2025-06-29 16:28:10,369 [INFO] 定时报告服务已启动
2025-06-29 16:28:10,385 [WARNING]  * Debugger is active!
2025-06-29 16:28:10,391 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 16:28:28,598 [INFO] 开始处理交易请求 [ID: 56cff869]
2025-06-29 16:28:28,598 [INFO] [56cff869] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 16:28:28,599 [INFO] 添加交易记录: 午饭
2025-06-29 16:28:28,599 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 16:28:28,947 [INFO] 交易添加成功: 222
2025-06-29 16:28:28,948 [INFO] [56cff869] 交易创建成功: amount=35.0, description=午饭
2025-06-29 16:28:28,948 [ERROR] [56cff869] 发送通知失败: NotificationHandler.send_transaction_notification() got an unexpected keyword argument 'request_body'
2025-06-29 16:28:28,949 [INFO] add_transaction 执行时间: 0.3519秒
2025-06-29 16:28:28,950 [INFO] 192.168.1.68 - - [29/Jun/2025 16:28:28] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 16:28:28,952 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751185710,v1=7583e90fbcf55535b8f3df0bdbd91b5e44afa0fd6bbae36671f6fc58befb0fe4', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1688'}
2025-06-29 16:28:28,952 [INFO] Received data: {"uuid": "8571d609-77b8-4c41-a652-0eb3e5de028a", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 221, "created_at": "2025-06-29T15:14:31+08:00", "updated_at": "2025-06-29T15:14:31+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "221", "type": "withdrawal", "date": "2025-06-29T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "消费日报", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "1", "category_name": "生活饮食", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["日常"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "155a86f64d6a1d5e582d8273218336e6a8d57684da0569b1a18122fbd0e56db6", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/221"}]}}
2025-06-29 16:28:28,953 [INFO] Webhook处理成功: 您新增了一笔交易：消费日报, 费用：[FILTERED]，分类：生活饮食，预算：None。
2025-06-29 16:28:28,954 [INFO] webhook 执行时间: 0.0059秒
2025-06-29 16:28:28,955 [INFO] 192.168.1.195 - - [29/Jun/2025 16:28:28] "POST /webhook HTTP/1.1" 200 -
2025-06-29 16:28:29,001 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751185710,v1=30ed11e4eab917cff7d7cb0f4d84825b6a19159fb9b6d6db87d85326e5aa987b', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 16:28:29,004 [INFO] Received data: {"uuid": "3110560d-1168-4396-bde7-79dd6bd15524", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 222, "created_at": "2025-06-29T16:28:29+08:00", "updated_at": "2025-06-29T16:28:29+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "222", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/222"}]}}
2025-06-29 16:28:29,004 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 16:28:29,004 [INFO] webhook 执行时间: 0.0113秒
2025-06-29 16:28:29,005 [INFO] 192.168.1.195 - - [29/Jun/2025 16:28:29] "POST /webhook HTTP/1.1" 200 -
2025-06-29 16:28:33,681 [ERROR] 获取预算限制失败 (budget_id: 1): 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets/1/limits?start_date=2025-06-01&end_date=2025-06-30
2025-06-29 16:28:33,681 [INFO] 成功获取 1 个预算
2025-06-29 16:28:33,682 [INFO] budgets 执行时间: 0.2854秒
2025-06-29 16:28:33,683 [INFO] 192.168.1.68 - - [29/Jun/2025 16:28:33] "GET /budgets?Authorization[FILTERED]&Content-Type=application%2Fjson HTTP/1.1" 200 -
2025-06-29 16:28:40,618 [WARNING] 缺少X-User-ID请求头
2025-06-29 16:28:40,619 [INFO] dify_webhook 执行时间: 0.0011秒
2025-06-29 16:28:40,620 [INFO] 192.168.1.68 - - [29/Jun/2025 16:28:40] "[31m[1mPOST /dify_webhook HTTP/1.1[0m" 400 -
2025-06-29 16:28:57,588 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-29 16:28:57,893 [ERROR] 获取预算限制失败 (budget_id: 1): 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets/1/limits?start_date=2025-06-01&end_date=2025-06-30
2025-06-29 16:28:57,894 [INFO] 成功获取 1 个预算
2025-06-29 16:28:57,894 [INFO] dify_webhook 执行时间: 0.3095秒
2025-06-29 16:28:57,895 [INFO] 192.168.1.68 - - [29/Jun/2025 16:28:57] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-29 16:30:40,730 [INFO] Starting Flask application v0.2.0
2025-06-29 16:30:40,734 [INFO] 定时任务调度器已启动
2025-06-29 16:30:40,735 [INFO] 定时报告服务已启动
2025-06-29 16:30:42,028 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 16:30:42,028 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 16:30:42,032 [INFO]  * Restarting with stat
2025-06-29 16:30:43,057 [INFO] Starting Flask application v0.2.0
2025-06-29 16:30:43,063 [INFO] 定时任务调度器已启动
2025-06-29 16:30:43,063 [INFO] 定时报告服务已启动
2025-06-29 16:30:43,084 [WARNING]  * Debugger is active!
2025-06-29 16:30:43,097 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 16:31:58,926 [INFO] 开始处理交易请求 [ID: c14a10c2]
2025-06-29 16:31:58,926 [INFO] [c14a10c2] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 16:31:58,928 [INFO] 添加交易记录: 午饭
2025-06-29 16:31:58,928 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 16:31:59,217 [INFO] 交易添加成功: 223
2025-06-29 16:31:59,218 [INFO] [c14a10c2] 交易创建成功: amount=35.0, description=午饭
2025-06-29 16:31:59,219 [ERROR] [c14a10c2] 发送通知失败: NotificationHandler.send_transaction_notification() got an unexpected keyword argument 'request_body'
2025-06-29 16:31:59,219 [INFO] add_transaction 执行时间: 0.2933秒
2025-06-29 16:31:59,219 [INFO] 192.168.1.68 - - [29/Jun/2025 16:31:59] "POST /add_transaction?Authorization=[FILTERED] HTTP/1.1" 201 -
2025-06-29 16:31:59,229 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751185920,v1=1445e830891ff2f90b49ddd5fb293225589f26c5d846ec4d6ea2f48cc411467f', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 16:31:59,229 [INFO] Received data: {"uuid": "feed47ea-c151-476c-824c-f1c469493589", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 223, "created_at": "2025-06-29T16:32:00+08:00", "updated_at": "2025-06-29T16:32:00+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "223", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/223"}]}}
2025-06-29 16:31:59,230 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 16:31:59,230 [INFO] webhook 执行时间: 0.0040秒
2025-06-29 16:31:59,231 [INFO] 192.168.1.195 - - [29/Jun/2025 16:31:59] "POST /webhook HTTP/1.1" 200 -
2025-06-29 16:32:15,331 [ERROR] 获取预算限制失败 (budget_id: 1): 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets/1/limits?start_date=2025-06-01&end_date=2025-06-30
2025-06-29 16:32:15,331 [INFO] 成功获取 1 个预算
2025-06-29 16:32:15,332 [INFO] budgets 执行时间: 0.5772秒
2025-06-29 16:32:15,332 [INFO] 192.168.1.68 - - [29/Jun/2025 16:32:15] "GET /budgets?Authorization=[FILTERED]&Content-Type=application%2Fjson HTTP/1.1" 200 -
2025-06-29 16:32:19,279 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-29 16:32:19,984 [ERROR] 获取预算限制失败 (budget_id: 1): 502 Server Error: Bad Gateway for url: http://localhost/api/v1/budgets/1/limits?start_date=2025-06-01&end_date=2025-06-30
2025-06-29 16:32:19,985 [INFO] 成功获取 1 个预算
2025-06-29 16:32:19,985 [INFO] dify_webhook 执行时间: 0.7079秒
2025-06-29 16:32:19,986 [INFO] 192.168.1.68 - - [29/Jun/2025 16:32:19] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-29 16:39:48,505 [INFO] Starting Flask application v0.2.0
2025-06-29 16:39:48,508 [INFO] 定时任务调度器已启动
2025-06-29 16:39:48,510 [INFO] 定时报告服务已启动
2025-06-29 16:39:49,814 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 16:39:49,815 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 16:39:49,818 [INFO]  * Restarting with stat
2025-06-29 16:39:51,154 [INFO] Starting Flask application v0.2.0
2025-06-29 16:39:51,160 [INFO] 定时任务调度器已启动
2025-06-29 16:39:51,160 [INFO] 定时报告服务已启动
2025-06-29 16:39:51,178 [WARNING]  * Debugger is active!
2025-06-29 16:39:51,184 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 16:40:26,659 [INFO] Starting Flask application v0.2.0
2025-06-29 16:40:26,662 [INFO] 定时任务调度器已启动
2025-06-29 16:40:26,663 [INFO] 定时报告服务已启动
2025-06-29 16:40:27,960 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 16:40:27,962 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 16:40:27,965 [INFO]  * Restarting with stat
2025-06-29 16:40:28,913 [INFO] Starting Flask application v0.2.0
2025-06-29 16:40:28,917 [INFO] 定时任务调度器已启动
2025-06-29 16:40:28,918 [INFO] 定时报告服务已启动
2025-06-29 16:40:28,934 [WARNING]  * Debugger is active!
2025-06-29 16:40:28,940 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 16:40:48,113 [WARNING] 缺少X-User-ID请求头
2025-06-29 16:40:48,113 [INFO] budgets 执行时间: 0.0000秒
2025-06-29 16:40:48,114 [INFO] 127.0.0.1 - - [29/Jun/2025 16:40:48] "[31m[1mGET /budgets HTTP/1.1[0m" 400 -
2025-06-29 16:40:57,974 [INFO] 成功获取 1 个预算
2025-06-29 16:40:57,974 [INFO] budgets 执行时间: 0.2064秒
2025-06-29 16:40:57,976 [INFO] 127.0.0.1 - - [29/Jun/2025 16:40:57] "GET /budgets HTTP/1.1" 200 -
2025-06-29 16:41:09,885 [INFO] 开始处理交易请求 [ID: baf3f9df]
2025-06-29 16:41:09,887 [WARNING] [baf3f9df] 交易数据验证失败: 1 validation error for TransactionRequest
date
  Field required [type=missing, input_value={'source_account': '????'...0.0', 'category': 'N/A'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-06-29 16:41:09,890 [INFO] add_transaction 执行时间: 0.0040秒
2025-06-29 16:41:09,895 [INFO] 127.0.0.1 - - [29/Jun/2025 16:41:09] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-29 16:41:21,588 [INFO] 开始处理交易请求 [ID: 5fbdec23]
2025-06-29 16:41:21,590 [INFO] [5fbdec23] 交易数据验证成功: {'amount': '10.0', 'description': '????', 'source_account': '????', 'destination_account': '??', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 16:41:21,592 [INFO] 添加交易记录: ????
2025-06-29 16:41:21,592 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-29', 'amount': '[FILTERED]', 'description': '????', 'source_name': '????', 'destination_name': '??', 'category_name': 'N/A', 'budget_name': 'N/A'}]}
2025-06-29 16:41:21,684 [ERROR] HTTP错误 - 添加交易失败: 422 Client Error: Unprocessable Content for url: http://192.168.1.195:9941/api/v1/transactions
2025-06-29 16:41:21,685 [ERROR] [5fbdec23] 交易创建失败: 未知错误
2025-06-29 16:41:21,687 [INFO] add_transaction 执行时间: 0.0994秒
2025-06-29 16:41:21,688 [INFO] 127.0.0.1 - - [29/Jun/2025 16:41:21] "POST /add_transaction HTTP/1.1" 500 -
2025-06-29 16:42:58,548 [INFO] 开始处理交易请求 [ID: bc97d068]
2025-06-29 16:42:58,549 [INFO] [bc97d068] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-29 16:42:58,550 [INFO] 添加交易记录: 午饭
2025-06-29 16:42:58,550 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-29 16:42:58,819 [INFO] 交易添加成功: 224
2025-06-29 16:42:58,819 [INFO] [bc97d068] 交易创建成功: amount=35.0, description=午饭
2025-06-29 16:42:58,819 [INFO] 构造消息内容: 交易操作：午饭, 费用：35.0，分类：None，预算：None。
2025-06-29 16:42:58,830 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751186579,v1=4ccdd6fd510a77919d71075ead1f4731fe5a3ba011c178dc9db1be0573cad003', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1642'}
2025-06-29 16:42:58,837 [INFO] Received data: {"uuid": "60009360-35c4-4bfb-af6e-53d7da4e4b4b", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 224, "created_at": "2025-06-29T16:42:59+08:00", "updated_at": "2025-06-29T16:42:59+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "224", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "午饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "77", "destination_name": "餐饮", "destination_iban": null, "destination_type": "Expense account", "budget_id": "", "budget_name": null, "category_id": "", "category_name": null, "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": [], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "20e6c91dbe3881b356d474cee24a020b73585f52447f3cb59d0c8742d4d3ea8a", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/224"}]}}
2025-06-29 16:42:58,838 [INFO] Webhook处理成功: 您新增了一笔交易：午饭, 费用：[FILTERED]，分类：None，预算：None。
2025-06-29 16:42:58,838 [INFO] webhook 执行时间: 0.0098秒
2025-06-29 16:42:58,839 [INFO] 192.168.1.195 - - [29/Jun/2025 16:42:58] "POST /webhook HTTP/1.1" 200 -
2025-06-29 16:42:59,381 [INFO] 消息发送成功
2025-06-29 16:42:59,382 [INFO] [bc97d068] 通知发送成功
2025-06-29 16:42:59,383 [INFO] add_transaction 执行时间: 0.8349秒
2025-06-29 16:42:59,383 [INFO] 192.168.1.68 - - [29/Jun/2025 16:42:59] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-29 16:43:15,843 [INFO] 成功获取 1 个预算
2025-06-29 16:43:15,844 [INFO] budgets 执行时间: 0.1837秒
2025-06-29 16:43:15,844 [INFO] 192.168.1.68 - - [29/Jun/2025 16:43:15] "GET /budgets?Authorization[FILTERED]&Content-Type=application%2Fjson HTTP/1.1" 200 -
2025-06-29 16:43:19,455 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-29 16:43:19,643 [INFO] 成功获取 1 个预算
2025-06-29 16:43:19,643 [INFO] dify_webhook 执行时间: 0.1908秒
2025-06-29 16:43:19,644 [INFO] 192.168.1.68 - - [29/Jun/2025 16:43:19] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-29 17:00:23,642 [INFO] Starting Flask application v0.2.0
2025-06-29 17:00:23,646 [INFO] 定时任务调度器已启动
2025-06-29 17:00:23,647 [INFO] 定时报告服务已启动
2025-06-29 17:00:24,985 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 17:00:24,985 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 17:00:24,988 [INFO]  * Restarting with stat
2025-06-29 17:00:26,065 [INFO] Starting Flask application v0.2.0
2025-06-29 17:00:26,069 [INFO] 定时任务调度器已启动
2025-06-29 17:00:26,069 [INFO] 定时报告服务已启动
2025-06-29 17:00:26,086 [WARNING]  * Debugger is active!
2025-06-29 17:00:26,093 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 21:00:44,195 [INFO] Starting Flask application v0.2.0
2025-06-29 21:00:44,199 [INFO] 定时任务调度器已启动
2025-06-29 21:00:44,199 [INFO] 定时报告服务已启动
2025-06-29 21:00:46,209 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-29 21:00:46,209 [INFO] [33mPress CTRL+C to quit[0m
2025-06-29 21:00:46,213 [INFO]  * Restarting with stat
2025-06-29 21:00:47,312 [INFO] Starting Flask application v0.2.0
2025-06-29 21:00:47,316 [INFO] 定时任务调度器已启动
2025-06-29 21:00:47,316 [INFO] 定时报告服务已启动
2025-06-29 21:00:47,334 [WARNING]  * Debugger is active!
2025-06-29 21:00:47,340 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 21:01:10,275 [WARNING] 缺少X-User-ID请求头
2025-06-29 21:01:10,275 [INFO] add_transaction 执行时间: 0.0008秒
2025-06-29 21:01:10,276 [INFO] 192.168.1.68 - - [29/Jun/2025 21:01:10] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-29 21:03:31,612 [INFO] 开始处理交易请求 [ID: d3eef258]
2025-06-29 21:03:31,613 [WARNING] [d3eef258] 交易数据验证失败: 1 validation error for TransactionRequest
destination_account
  Field required [type=missing, input_value={'type': 'withdrawal', 'd...卡（交通银行）'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-06-29 21:03:31,613 [INFO] add_transaction 执行时间: 0.0011秒
2025-06-29 21:03:31,614 [INFO] 192.168.1.68 - - [29/Jun/2025 21:03:31] "[31m[1mPOST /add_transaction HTTP/1.1[0m" 400 -
2025-06-29 21:05:30,342 [INFO]  * Detected change in 'D:\\fleshrecord\\models\\request_models.py', reloading
2025-06-29 21:05:30,394 [INFO]  * Restarting with stat
2025-06-29 21:05:32,091 [INFO] Starting Flask application v0.2.0
2025-06-29 21:05:32,097 [INFO] 定时任务调度器已启动
2025-06-29 21:05:32,097 [INFO] 定时报告服务已启动
2025-06-29 21:05:32,118 [WARNING]  * Debugger is active!
2025-06-29 21:05:32,125 [INFO]  * Debugger PIN: 122-422-975
2025-06-29 21:06:07,479 [INFO] 开始处理交易请求 [ID: 723e3310]
2025-06-29 21:06:07,479 [INFO] [723e3310] 交易数据验证成功: {'amount': '15.0', 'description': '加油费', 'source_account': '信用卡（交通银行）', 'destination_account': 'N/A', 'category': '交通通讯', 'budget': 'N/A'}
2025-06-29 21:06:07,480 [INFO] 添加交易记录: 加油费
2025-06-29 21:06:07,481 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '加油费', 'source_name': '信用卡（交通银行）', 'category_name': '交通通讯', 'tags': ['出行']}]}
2025-06-29 21:06:07,798 [INFO] 交易添加成功: 227
2025-06-29 21:06:07,799 [INFO] [723e3310] 交易创建成功: amount=15.0, description=加油费
2025-06-29 21:06:07,799 [INFO] 构造消息内容: 交易操作：加油费, 费用：15.0，分类：交通通讯，预算：None。
2025-06-29 21:06:07,813 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202368,v1=839a9c86445bf2f1c7f7c97758fc7ee6f0a8183b0c6b11d24297a48212c9bfdf', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1740'}
2025-06-29 21:06:07,813 [INFO] Received data: {"uuid": "da16b3bd-8e3a-408f-aef7-e9d7620e4b62", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 225, "created_at": "2025-06-29T20:44:59+08:00", "updated_at": "2025-06-29T20:44:59+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "225", "type": "withdrawal", "date": "2025-06-27T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "购买三文鱼两盒", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "1", "category_name": "生活饮食", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["食材"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "f6a6893ecfe0823eeb8ac9ce1c92c3b2b2b861274aeaa9a497fcb9c28a6456ed", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/225"}]}}
2025-06-29 21:06:07,814 [INFO] Webhook处理成功: 您新增了一笔交易：购买三文鱼两盒, 费用：[FILTERED]，分类：生活饮食，预算：None。
2025-06-29 21:06:07,815 [INFO] webhook 执行时间: 0.0052秒
2025-06-29 21:06:07,815 [INFO] 192.168.1.195 - - [29/Jun/2025 21:06:07] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:06:07,833 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202368,v1=32d9b395ab443605bdaaace4dc0eaa48e8d4d5fb7ed4db986e6255c5e9f0a87f', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1732'}
2025-06-29 21:06:07,833 [INFO] Received data: {"uuid": "b17d4590-3941-4d7f-868e-1d08516c4298", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 226, "created_at": "2025-06-29T20:54:45+08:00", "updated_at": "2025-06-29T20:54:45+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "226", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "停车费", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "1", "budget_name": "周预算", "category_id": "5", "category_name": "交通通讯", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["停车"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "ed03c8b98b4cd5680c6703ac45bc8847ea9d369bbaca2f948fc4fed93630ed18", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/226"}]}}
2025-06-29 21:06:07,834 [INFO] Webhook处理成功: 您新增了一笔交易：停车费, 费用：[FILTERED]，分类：交通通讯，预算：周预算。
2025-06-29 21:06:07,834 [INFO] webhook 执行时间: 0.0030秒
2025-06-29 21:06:07,835 [INFO] 192.168.1.195 - - [29/Jun/2025 21:06:07] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:06:07,852 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202368,v1=d0b7d388ab1d40317455e213335df7cf906c077e727f59ae87ca7bfdc9e7d466', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1715'}
2025-06-29 21:06:07,852 [INFO] Received data: {"uuid": "74885125-d20d-43d9-b43c-ba068d0469b0", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 227, "created_at": "2025-06-29T21:06:08+08:00", "updated_at": "2025-06-29T21:06:08+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "227", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "加油费", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "5", "category_name": "交通通讯", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["出行"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "c676a5f78d9c4b13bfd0f45755c9b55c742b128877e83186666c037a0804297c", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/227"}]}}
2025-06-29 21:06:07,853 [INFO] Webhook处理成功: 您新增了一笔交易：加油费, 费用：[FILTERED]，分类：交通通讯，预算：None。
2025-06-29 21:06:07,854 [INFO] webhook 执行时间: 0.0040秒
2025-06-29 21:06:07,854 [INFO] 192.168.1.195 - - [29/Jun/2025 21:06:07] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:06:08,430 [INFO] 消息发送成功
2025-06-29 21:06:08,432 [INFO] [723e3310] 通知发送成功
2025-06-29 21:06:08,433 [INFO] add_transaction 执行时间: 0.9540秒
2025-06-29 21:06:08,433 [INFO] 192.168.1.68 - - [29/Jun/2025 21:06:08] "POST /add_transaction HTTP/1.1" 201 -
2025-06-29 21:06:56,277 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202417,v1=ec89f3afe8b3d6fd1e8e9d5769391e829dfd7299e2cbbd1d705a7ecf9a1403c1', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1717'}
2025-06-29 21:06:56,277 [INFO] Received data: {"uuid": "fe46a59a-d6aa-404d-81a0-e8782efc593b", "user_id": 1, "trigger": "UPDATE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 227, "created_at": "2025-06-29T21:06:08+08:00", "updated_at": "2025-06-29T21:06:57+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "227", "type": "withdrawal", "date": "2025-06-28T15:46:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "加油费", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "5", "category_name": "交通通讯", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["出行"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "c676a5f78d9c4b13bfd0f45755c9b55c742b128877e83186666c037a0804297c", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/227"}]}}
2025-06-29 21:06:56,278 [INFO] Webhook处理成功: 您更新了一笔交易：加油费, 费用：[FILTERED]，分类：交通通讯，预算：None。
2025-06-29 21:06:56,279 [INFO] webhook 执行时间: 0.0030秒
2025-06-29 21:06:56,279 [INFO] 192.168.1.195 - - [29/Jun/2025 21:06:56] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:08:50,334 [INFO] 开始处理交易请求 [ID: f7629563]
2025-06-29 21:08:50,334 [INFO] [f7629563] 交易数据验证成功: {'amount': '90.0', 'description': '普宁肠粉和隆江猪脚饭', 'source_account': '工资账户', 'destination_account': 'N/A', 'category': '生活饮食', 'budget': 'N/A'}
2025-06-29 21:08:50,335 [INFO] 添加交易记录: 普宁肠粉和隆江猪脚饭
2025-06-29 21:08:50,335 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-28', 'amount': '[FILTERED]', 'description': '普宁肠粉和隆江猪脚饭', 'source_name': '工资账户', 'category_name': '生活饮食', 'tags': ['晚餐']}]}
2025-06-29 21:08:50,641 [INFO] 交易添加成功: 228
2025-06-29 21:08:50,641 [INFO] [f7629563] 交易创建成功: amount=90.0, description=普宁肠粉和隆江猪脚饭
2025-06-29 21:08:50,641 [INFO] 构造消息内容: 交易操作：普宁肠粉和隆江猪脚饭, 费用：90.0，分类：生活饮食，预算：None。
2025-06-29 21:08:50,652 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202531,v1=0d89cb33a861e0de75ac84e8022d4604bab088db2348800484ccfc1238d1cf5c', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1724'}
2025-06-29 21:08:50,652 [INFO] Received data: {"uuid": "7de0af09-7c95-4856-9f70-7c8c5aed08be", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 228, "created_at": "2025-06-29T21:08:51+08:00", "updated_at": "2025-06-29T21:08:51+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "228", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "普宁肠粉和隆江猪脚饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "1", "category_name": "生活饮食", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["晚餐"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "05f264ca42d37b1851302648795ebcb70f9c28fc3f4ad031c39044ec067f2443", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/228"}]}}
2025-06-29 21:08:50,654 [INFO] Webhook处理成功: 您新增了一笔交易：普宁肠粉和隆江猪脚饭, 费用：[FILTERED]，分类：生活饮食，预算：None。
2025-06-29 21:08:50,654 [INFO] webhook 执行时间: 0.0036秒
2025-06-29 21:08:50,654 [INFO] 192.168.1.195 - - [29/Jun/2025 21:08:50] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:08:51,175 [INFO] 消息发送成功
2025-06-29 21:08:51,177 [INFO] [f7629563] 通知发送成功
2025-06-29 21:08:51,177 [INFO] add_transaction 执行时间: 0.8437秒
2025-06-29 21:08:51,179 [INFO] 192.168.1.68 - - [29/Jun/2025 21:08:51] "POST /add_transaction HTTP/1.1" 201 -
2025-06-29 21:12:32,127 [INFO] 开始处理交易请求 [ID: 496dcb19]
2025-06-29 21:12:32,128 [INFO] [496dcb19] 交易数据验证成功: {'amount': '20.0', 'description': '熹熹洗牙费', 'source_account': '工资账户', 'destination_account': 'N/A', 'category': '医药护理', 'budget': 'N/A'}
2025-06-29 21:12:32,128 [INFO] 添加交易记录: 熹熹洗牙费
2025-06-29 21:12:32,128 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-29', 'amount': '[FILTERED]', 'description': '熹熹洗牙费', 'source_name': '工资账户', 'category_name': '医药护理', 'tags': ['医疗']}]}
2025-06-29 21:12:32,401 [INFO] 交易添加成功: 229
2025-06-29 21:12:32,401 [INFO] [496dcb19] 交易创建成功: amount=20.0, description=熹熹洗牙费
2025-06-29 21:12:32,403 [INFO] 构造消息内容: 交易操作：熹熹洗牙费, 费用：20.0，分类：医药护理，预算：None。
2025-06-29 21:12:32,431 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202753,v1=66dcd9145b8bc7085cfc7910141b55d4714a27967477663502413d1e2cfb1fc3', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1694'}
2025-06-29 21:12:32,431 [INFO] Received data: {"uuid": "00ea56d4-e395-4e1f-87c4-cb498d578089", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 229, "created_at": "2025-06-29T21:12:33+08:00", "updated_at": "2025-06-29T21:12:33+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "229", "type": "withdrawal", "date": "2025-06-29T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "熹熹洗牙费", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "4", "category_name": "医药护理", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["医疗"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "7bfa1c0cd531b7537f16896853c32f6530a8e448e87568b941397db0874d3f87", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/229"}]}}
2025-06-29 21:12:32,432 [INFO] Webhook处理成功: 您新增了一笔交易：熹熹洗牙费, 费用：[FILTERED]，分类：医药护理，预算：None。
2025-06-29 21:12:32,432 [INFO] webhook 执行时间: 0.0039秒
2025-06-29 21:12:32,432 [INFO] 192.168.1.195 - - [29/Jun/2025 21:12:32] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:12:32,942 [INFO] 消息发送成功
2025-06-29 21:12:32,944 [INFO] [496dcb19] 通知发送成功
2025-06-29 21:12:32,945 [INFO] add_transaction 执行时间: 0.8177秒
2025-06-29 21:12:32,945 [INFO] 192.168.1.68 - - [29/Jun/2025 21:12:32] "POST /add_transaction HTTP/1.1" 201 -
2025-06-29 21:13:03,636 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202784,v1=1e734d5bae8b26b2726b544f38798f0e1f63db53c8cec7445430acb33bea5797', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1725'}
2025-06-29 21:13:03,637 [INFO] Received data: {"uuid": "5f151a72-0930-45eb-80dc-7433b6389e86", "user_id": 1, "trigger": "UPDATE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 228, "created_at": "2025-06-29T21:08:51+08:00", "updated_at": "2025-06-29T21:13:04+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "228", "type": "withdrawal", "date": "2025-06-28T19:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "普宁肠粉和隆江猪脚饭", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "1", "category_name": "生活饮食", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["晚餐"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "05f264ca42d37b1851302648795ebcb70f9c28fc3f4ad031c39044ec067f2443", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/228"}]}}
2025-06-29 21:13:03,638 [INFO] Webhook处理成功: 您更新了一笔交易：普宁肠粉和隆江猪脚饭, 费用：[FILTERED]，分类：生活饮食，预算：None。
2025-06-29 21:13:03,638 [INFO] webhook 执行时间: 0.0031秒
2025-06-29 21:13:03,638 [INFO] 192.168.1.195 - - [29/Jun/2025 21:13:03] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:14:02,296 [INFO] 开始处理交易请求 [ID: 2d0d4f73]
2025-06-29 21:14:02,296 [INFO] [2d0d4f73] 交易数据验证成功: {'amount': '20.0', 'description': '熹熹洗牙费', 'source_account': '工资账户', 'destination_account': 'N/A', 'category': '医药护理', 'budget': 'N/A'}
2025-06-29 21:14:02,297 [INFO] 添加交易记录: 熹熹洗牙费
2025-06-29 21:14:02,298 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-29', 'amount': '[FILTERED]', 'description': '熹熹洗牙费', 'source_name': '工资账户', 'destination_name': '', 'category_name': '医药护理', 'budget_name': '', 'tags': ['医疗']}]}
2025-06-29 21:14:02,575 [INFO] 交易添加成功: 230
2025-06-29 21:14:02,577 [INFO] [2d0d4f73] 交易创建成功: amount=20.0, description=熹熹洗牙费
2025-06-29 21:14:02,577 [INFO] 构造消息内容: 交易操作：熹熹洗牙费, 费用：20.0，分类：医药护理，预算：。
2025-06-29 21:14:02,588 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202843,v1=fb2cc5480e5eff183bc0719d366fd3593a77be4f7ca5af7bb085fe13bb2338c0', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1694'}
2025-06-29 21:14:02,594 [INFO] Received data: {"uuid": "c505c706-ca3f-4b77-ae6d-ff6003e0934a", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 230, "created_at": "2025-06-29T21:14:03+08:00", "updated_at": "2025-06-29T21:14:03+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "230", "type": "withdrawal", "date": "2025-06-29T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "熹熹洗牙费", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "4", "category_name": "医药护理", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["医疗"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "7bfa1c0cd531b7537f16896853c32f6530a8e448e87568b941397db0874d3f87", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/230"}]}}
2025-06-29 21:14:02,595 [INFO] Webhook处理成功: 您新增了一笔交易：熹熹洗牙费, 费用：[FILTERED]，分类：医药护理，预算：None。
2025-06-29 21:14:02,595 [INFO] webhook 执行时间: 0.0082秒
2025-06-29 21:14:02,595 [INFO] 192.168.1.195 - - [29/Jun/2025 21:14:02] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:14:03,089 [INFO] 消息发送成功
2025-06-29 21:14:03,091 [INFO] [2d0d4f73] 通知发送成功
2025-06-29 21:14:03,092 [INFO] add_transaction 执行时间: 0.7969秒
2025-06-29 21:14:03,092 [INFO] 192.168.1.68 - - [29/Jun/2025 21:14:03] "POST /add_transaction HTTP/1.1" 201 -
2025-06-29 21:14:33,182 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751202874,v1=c9b67c746af9387c63cd0b477b0a3cb9273748c03ee223c4e8f3fc6495bf5b51', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1695'}
2025-06-29 21:14:33,182 [INFO] Received data: {"uuid": "81188a8b-b915-489c-ae47-9518e0491749", "user_id": 1, "trigger": "UPDATE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 229, "created_at": "2025-06-29T21:12:33+08:00", "updated_at": "2025-06-29T21:14:34+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "229", "type": "withdrawal", "date": "2025-06-29T12:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "熹熹洗牙费", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "4", "category_name": "医药护理", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["医疗"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "7bfa1c0cd531b7537f16896853c32f6530a8e448e87568b941397db0874d3f87", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/229"}]}}
2025-06-29 21:14:33,183 [INFO] Webhook处理成功: 您更新了一笔交易：熹熹洗牙费, 费用：[FILTERED]，分类：医药护理，预算：None。
2025-06-29 21:14:33,183 [INFO] webhook 执行时间: 0.0031秒
2025-06-29 21:14:33,183 [INFO] 192.168.1.195 - - [29/Jun/2025 21:14:33] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:17:44,052 [INFO] 开始处理交易请求 [ID: 8595bfa4]
2025-06-29 21:17:44,052 [INFO] [8595bfa4] 交易数据验证成功: {'amount': '20.0', 'description': '熹熹洗牙费', 'source_account': '工资账户', 'destination_account': 'N/A', 'category': '医药护理', 'budget': 'N/A'}
2025-06-29 21:17:44,054 [INFO] 添加交易记录: 熹熹洗牙费
2025-06-29 21:17:44,054 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-29', 'amount': '[FILTERED]', 'description': '熹熹洗牙费', 'source_name': '工资账户', 'category_name': '医药护理', 'tags': ['医疗']}]}
2025-06-29 21:17:44,325 [INFO] 交易添加成功: 231
2025-06-29 21:17:44,326 [INFO] [8595bfa4] 交易创建成功: amount=20.0, description=熹熹洗牙费
2025-06-29 21:17:44,326 [INFO] 构造消息内容: 交易操作：熹熹洗牙费, 费用：20.0，分类：医药护理，预算：None。
2025-06-29 21:17:44,368 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751203065,v1=edcafde29a812eac197e2fdc2a468f3bf8a1339e31f80be67dbb4e08e9fb5c7d', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1694'}
2025-06-29 21:17:44,369 [INFO] Received data: {"uuid": "5cdbea42-abe6-40bf-988a-62403216298c", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 231, "created_at": "2025-06-29T21:17:45+08:00", "updated_at": "2025-06-29T21:17:45+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "231", "type": "withdrawal", "date": "2025-06-29T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "熹熹洗牙费", "source_id": "1", "source_name": "工资账户", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "4", "category_name": "医药护理", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["医疗"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "7bfa1c0cd531b7537f16896853c32f6530a8e448e87568b941397db0874d3f87", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/231"}]}}
2025-06-29 21:17:44,369 [INFO] Webhook处理成功: 您新增了一笔交易：熹熹洗牙费, 费用：[FILTERED]，分类：医药护理，预算：None。
2025-06-29 21:17:44,370 [INFO] webhook 执行时间: 0.0040秒
2025-06-29 21:17:44,370 [INFO] 192.168.1.195 - - [29/Jun/2025 21:17:44] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:17:44,831 [INFO] 消息发送成功
2025-06-29 21:17:44,832 [INFO] [8595bfa4] 通知发送成功
2025-06-29 21:17:44,833 [INFO] add_transaction 执行时间: 0.7816秒
2025-06-29 21:17:44,834 [INFO] 192.168.1.68 - - [29/Jun/2025 21:17:44] "POST /add_transaction HTTP/1.1" 201 -
2025-06-29 21:19:31,909 [INFO] 开始处理交易请求 [ID: 784b9a1f]
2025-06-29 21:19:31,910 [INFO] [784b9a1f] 交易数据验证成功: {'amount': '7880.0', 'description': '熹熹46节篮球课费用', 'source_account': '信用卡（交通银行）', 'destination_account': 'N/A', 'category': '生活爱好', 'budget': 'N/A'}
2025-06-29 21:19:31,911 [INFO] 添加交易记录: 熹熹46节篮球课费用
2025-06-29 21:19:31,911 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-29', 'amount': '[FILTERED]', 'description': '熹熹46节篮球课费用', 'source_name': '信用卡（交通银行）', 'destination_name': '', 'category_name': '生活爱好', 'budget_name': '', 'tags': ['教育']}]}
2025-06-29 21:19:32,197 [INFO] 交易添加成功: 232
2025-06-29 21:19:32,197 [INFO] [784b9a1f] 交易创建成功: amount=7880.0, description=熹熹46节篮球课费用
2025-06-29 21:19:32,198 [INFO] 构造消息内容: 交易操作：熹熹46节篮球课费用, 费用：7880.0，分类：生活爱好，预算：。
2025-06-29 21:19:32,211 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751203173,v1=83f5f1f71680f01a1d52bc8873929b010bac1fe432b9284811b8ee47665355d5', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1749'}
2025-06-29 21:19:32,211 [INFO] Received data: {"uuid": "befb5ace-a82a-47f5-940e-082d84d75cdb", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 232, "created_at": "2025-06-29T21:19:33+08:00", "updated_at": "2025-06-29T21:19:33+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "232", "type": "withdrawal", "date": "2025-06-29T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "熹熹46节篮球课费用", "source_id": "63", "source_name": "信用卡（交通银行）", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "3", "category_name": "生活爱好", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["教育"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "5dcb2e5794c94632912d1b99d365cd0f8afc937cc68efecdc0a7ab4a22aefebc", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/232"}]}}
2025-06-29 21:19:32,211 [INFO] Webhook处理成功: 您新增了一笔交易：熹熹46节篮球课费用, 费用：[FILTERED]，分类：生活爱好，预算：None。
2025-06-29 21:19:32,212 [INFO] webhook 执行时间: 0.0047秒
2025-06-29 21:19:32,212 [INFO] 192.168.1.195 - - [29/Jun/2025 21:19:32] "POST /webhook HTTP/1.1" 200 -
2025-06-29 21:19:32,732 [INFO] 消息发送成功
2025-06-29 21:19:32,733 [INFO] [784b9a1f] 通知发送成功
2025-06-29 21:19:32,734 [INFO] add_transaction 执行时间: 0.8259秒
2025-06-29 21:19:32,734 [INFO] 192.168.1.68 - - [29/Jun/2025 21:19:32] "POST /add_transaction HTTP/1.1" 201 -
2025-06-30 09:37:11,384 [INFO] Starting Flask application v0.2.0
2025-06-30 09:37:11,388 [INFO] 定时任务调度器已启动
2025-06-30 09:37:11,389 [INFO] 定时报告服务已启动
2025-06-30 09:37:12,930 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 09:37:12,930 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 09:37:12,933 [INFO]  * Restarting with stat
2025-06-30 09:37:14,342 [INFO] Starting Flask application v0.2.0
2025-06-30 09:37:14,347 [INFO] 定时任务调度器已启动
2025-06-30 09:37:14,347 [INFO] 定时报告服务已启动
2025-06-30 09:37:14,376 [WARNING]  * Debugger is active!
2025-06-30 09:37:14,382 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 09:39:11,402 [INFO] 查询交易记录，参数: {'start': datetime.date(2025, 6, 30), 'end': datetime.date(2025, 6, 30)}
2025-06-30 09:39:11,403 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-30 09:39:11,403 [INFO] 请求参数: {'start': datetime.date(2025, 6, 30), 'end': datetime.date(2025, 6, 30), 'page': 1, 'limit': 200}
2025-06-30 09:39:12,936 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-30&end=2025-06-30&page=1&limit=200
2025-06-30 09:39:12,940 [INFO] 获取第 1 页，本页 0 条记录，总计 0 条
2025-06-30 09:39:12,940 [INFO] 成功查询到 0 条交易记录，API总共 0 条
2025-06-30 09:39:12,940 [INFO] 交易汇总: 0笔交易，总金额0.0
2025-06-30 09:39:14,353 [INFO] 查询交易记录，参数: {'start': datetime.date(2025, 6, 30), 'end': datetime.date(2025, 6, 30)}
2025-06-30 09:39:14,353 [INFO] 请求 URL: http://192.168.1.195:9941/api/v1/transactions
2025-06-30 09:39:14,353 [INFO] 请求参数: {'start': datetime.date(2025, 6, 30), 'end': datetime.date(2025, 6, 30), 'page': 1, 'limit': 200}
2025-06-30 09:39:14,425 [INFO] 实际发送的完整 URL: http://192.168.1.195:9941/api/v1/transactions?start=2025-06-30&end=2025-06-30&page=1&limit=200
2025-06-30 09:39:14,428 [INFO] 获取第 1 页，本页 0 条记录，总计 0 条
2025-06-30 09:39:14,429 [INFO] 成功查询到 0 条交易记录，API总共 0 条
2025-06-30 09:39:14,429 [INFO] 交易汇总: 0笔交易，总金额0.0
2025-06-30 09:39:39,977 [INFO] Dify 工作流执行成功，工作流ID: 0396ea7b-9133-4236-9c0f-6c1eeba82e98
2025-06-30 09:39:39,977 [INFO] 成功生成 daily 报告
2025-06-30 09:39:39,977 [INFO] 成功生成用户 metalhouse 的 daily 报告
2025-06-30 09:39:40,524 [INFO] 消息发送成功
2025-06-30 09:39:40,526 [INFO] 成功发送 daily 报告给用户 metalhouse
2025-06-30 09:39:41,255 [INFO] Dify 工作流执行成功，工作流ID: 0396ea7b-9133-4236-9c0f-6c1eeba82e98
2025-06-30 09:39:41,255 [INFO] 成功生成 daily 报告
2025-06-30 09:39:41,255 [INFO] 成功生成用户 metalhouse 的 daily 报告
2025-06-30 09:39:41,782 [INFO] 消息发送成功
2025-06-30 09:39:41,783 [INFO] 成功发送 daily 报告给用户 metalhouse
2025-06-30 09:46:52,674 [INFO] Starting Flask application v0.2.0
2025-06-30 09:46:52,678 [INFO] 定时任务调度器已启动
2025-06-30 09:46:52,679 [INFO] 定时报告服务已启动
2025-06-30 09:46:53,980 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 09:46:53,981 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 09:46:53,984 [INFO]  * Restarting with stat
2025-06-30 09:46:55,248 [INFO] Starting Flask application v0.2.0
2025-06-30 09:46:55,251 [INFO] 定时任务调度器已启动
2025-06-30 09:46:55,252 [INFO] 定时报告服务已启动
2025-06-30 09:46:55,272 [WARNING]  * Debugger is active!
2025-06-30 09:46:55,284 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 09:47:52,684 [ERROR] 格式化交易数据失败: argument of type 'NoneType' is not iterable
2025-06-30 09:47:55,256 [ERROR] 格式化交易数据失败: argument of type 'NoneType' is not iterable
2025-06-30 09:47:59,707 [ERROR] Dify API 请求失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 09:47:59,707 [ERROR] 生成 daily 报告失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 09:48:00,266 [INFO] 消息发送成功
2025-06-30 09:48:00,268 [INFO] 成功发送 daily 报告给用户 metalhouse
2025-06-30 09:48:16,416 [INFO] Dify 工作流执行成功，工作流ID: 0396ea7b-9133-4236-9c0f-6c1eeba82e98
2025-06-30 09:48:16,416 [INFO] 成功生成 daily 报告
2025-06-30 09:48:16,955 [INFO] 消息发送成功
2025-06-30 09:48:16,956 [INFO] 成功发送 daily 报告给用户 metalhouse
2025-06-30 09:50:32,302 [INFO] Starting Flask application v0.2.0
2025-06-30 09:50:32,305 [INFO] 定时任务调度器已启动
2025-06-30 09:50:32,306 [INFO] 定时报告服务已启动
2025-06-30 09:50:33,633 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 09:50:33,633 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 09:50:33,638 [INFO]  * Restarting with stat
2025-06-30 09:50:34,958 [INFO] Starting Flask application v0.2.0
2025-06-30 09:50:34,962 [INFO] 定时任务调度器已启动
2025-06-30 09:50:34,963 [INFO] 定时报告服务已启动
2025-06-30 09:50:34,980 [WARNING]  * Debugger is active!
2025-06-30 09:50:34,987 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 09:50:48,306 [INFO] Starting Flask application v0.2.0
2025-06-30 09:50:48,308 [INFO] 定时任务调度器已启动
2025-06-30 09:50:48,309 [INFO] 定时报告服务已启动
2025-06-30 09:50:49,611 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 09:50:49,611 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 09:50:49,615 [INFO]  * Restarting with stat
2025-06-30 09:50:50,518 [INFO] Starting Flask application v0.2.0
2025-06-30 09:50:50,522 [INFO] 定时任务调度器已启动
2025-06-30 09:50:50,522 [INFO] 定时报告服务已启动
2025-06-30 09:50:50,550 [WARNING]  * Debugger is active!
2025-06-30 09:50:50,556 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 09:51:42,440 [ERROR] Dify API 请求失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 09:51:42,440 [ERROR] 生成 daily 报告失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 09:51:43,011 [INFO] 消息发送成功
2025-06-30 09:51:43,015 [INFO] 成功发送 daily 报告给用户 metalhouse
2025-06-30 09:51:52,412 [ERROR] Dify API 请求失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 09:51:52,412 [ERROR] 生成 daily 报告失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 09:51:53,018 [INFO] 消息发送成功
2025-06-30 09:51:53,020 [INFO] 成功发送 daily 报告给用户 metalhouse
2025-06-30 09:51:54,577 [ERROR] Dify API 请求失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 09:51:54,578 [ERROR] 生成 daily 报告失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 09:51:55,180 [INFO] 消息发送成功
2025-06-30 09:51:55,182 [INFO] 成功发送 daily 报告给用户 metalhouse
2025-06-30 09:58:16,113 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-30 09:58:16,166 [INFO]  * Restarting with stat
2025-06-30 09:58:16,438 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-30 09:58:17,176 [INFO] Starting Flask application v0.2.0
2025-06-30 09:58:17,181 [INFO] 定时任务调度器已启动
2025-06-30 09:58:17,181 [INFO] 定时报告服务已启动
2025-06-30 09:58:17,199 [WARNING]  * Debugger is active!
2025-06-30 09:58:17,206 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 09:59:42,765 [INFO]  * Detected change in 'D:\\fleshrecord\\app.py', reloading
2025-06-30 09:59:42,818 [INFO]  * Restarting with stat
2025-06-30 09:59:43,744 [INFO] Starting Flask application v0.2.0
2025-06-30 09:59:43,747 [INFO] 定时任务调度器已启动
2025-06-30 09:59:43,748 [INFO] 定时报告服务已启动
2025-06-30 09:59:43,763 [WARNING]  * Debugger is active!
2025-06-30 09:59:43,769 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 10:00:43,810 [ERROR] Dify API 请求失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:00:43,810 [ERROR] 生成 weekly 报告失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:00:44,430 [ERROR] 连接Webhook URL失败
2025-06-30 10:00:44,431 [ERROR] 发送 weekly 报告失败，用户: example_user
2025-06-30 10:00:53,078 [ERROR] Dify API 请求失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:00:53,078 [ERROR] 生成 weekly 报告失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:00:53,719 [ERROR] 连接Webhook URL失败
2025-06-30 10:00:53,720 [ERROR] 发送 weekly 报告失败，用户: example_user
2025-06-30 10:01:20,657 [INFO] Starting Flask application v0.2.0
2025-06-30 10:01:20,662 [INFO] 定时任务调度器已启动
2025-06-30 10:01:20,662 [INFO] 定时报告服务已启动
2025-06-30 10:01:20,722 [ERROR] Dify API 请求失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:01:20,723 [ERROR] 生成 weekly 报告失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:01:21,330 [ERROR] 连接Webhook URL失败
2025-06-30 10:01:21,330 [ERROR] 发送 weekly 报告失败，用户: example_user
2025-06-30 10:01:22,005 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 10:01:22,006 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 10:01:22,010 [INFO]  * Restarting with stat
2025-06-30 10:01:22,986 [INFO] Starting Flask application v0.2.0
2025-06-30 10:01:22,991 [INFO] 定时任务调度器已启动
2025-06-30 10:01:22,991 [INFO] 定时报告服务已启动
2025-06-30 10:01:23,015 [WARNING]  * Debugger is active!
2025-06-30 10:01:23,046 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 10:01:23,091 [ERROR] Dify API 请求失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:01:23,094 [ERROR] 生成 weekly 报告失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:01:23,709 [ERROR] 连接Webhook URL失败
2025-06-30 10:01:23,710 [ERROR] 发送 weekly 报告失败，用户: example_user
2025-06-30 10:01:44,482 [ERROR] Dify API 请求失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:01:44,482 [ERROR] 生成 weekly 报告失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:01:45,119 [ERROR] 连接Webhook URL失败
2025-06-30 10:01:45,119 [ERROR] 发送 weekly 报告失败，用户: example_user
2025-06-30 10:01:53,772 [ERROR] Dify API 请求失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:01:53,772 [ERROR] 生成 weekly 报告失败: 401 Client Error: UNAUTHORIZED for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:01:54,394 [ERROR] 连接Webhook URL失败
2025-06-30 10:01:54,394 [ERROR] 发送 weekly 报告失败，用户: example_user
2025-06-30 10:15:19,693 [INFO] Starting Flask application v0.2.0
2025-06-30 10:15:19,697 [INFO] 定时任务调度器已启动
2025-06-30 10:15:19,698 [INFO] 定时报告服务已启动
2025-06-30 10:15:21,035 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 10:15:21,035 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 10:15:21,038 [INFO]  * Restarting with stat
2025-06-30 10:15:21,967 [INFO] Starting Flask application v0.2.0
2025-06-30 10:15:21,971 [INFO] 定时任务调度器已启动
2025-06-30 10:15:21,971 [INFO] 定时报告服务已启动
2025-06-30 10:15:22,008 [WARNING]  * Debugger is active!
2025-06-30 10:15:22,016 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 10:15:51,414 [INFO] Starting Flask application v0.2.0
2025-06-30 10:15:51,418 [INFO] 定时任务调度器已启动
2025-06-30 10:15:51,418 [INFO] 定时报告服务已启动
2025-06-30 10:15:52,735 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 10:15:52,735 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 10:15:52,740 [INFO]  * Restarting with stat
2025-06-30 10:15:53,740 [INFO] Starting Flask application v0.2.0
2025-06-30 10:15:53,744 [INFO] 定时任务调度器已启动
2025-06-30 10:15:53,744 [INFO] 定时报告服务已启动
2025-06-30 10:15:53,768 [WARNING]  * Debugger is active!
2025-06-30 10:15:53,777 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 10:24:51,949 [INFO] Starting Flask application v0.2.0
2025-06-30 10:24:51,955 [INFO] 定时任务调度器已启动
2025-06-30 10:24:51,955 [INFO] 定时报告服务已启动
2025-06-30 10:24:53,261 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 10:24:53,261 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 10:24:53,264 [INFO]  * Restarting with stat
2025-06-30 10:24:54,350 [INFO] Starting Flask application v0.2.0
2025-06-30 10:24:54,355 [INFO] 定时任务调度器已启动
2025-06-30 10:24:54,356 [INFO] 定时报告服务已启动
2025-06-30 10:24:54,398 [WARNING]  * Debugger is active!
2025-06-30 10:24:54,408 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 10:26:55,546 [INFO] Starting Flask application v0.2.0
2025-06-30 10:26:55,550 [INFO] 定时任务调度器已启动
2025-06-30 10:26:55,550 [INFO] 定时报告服务已启动
2025-06-30 10:26:56,845 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 10:26:56,845 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 10:26:56,848 [INFO]  * Restarting with stat
2025-06-30 10:26:57,860 [INFO] Starting Flask application v0.2.0
2025-06-30 10:26:57,865 [INFO] 定时任务调度器已启动
2025-06-30 10:26:57,866 [INFO] 定时报告服务已启动
2025-06-30 10:26:57,913 [WARNING]  * Debugger is active!
2025-06-30 10:26:57,921 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 10:28:54,461 [INFO] Starting Flask application v0.2.0
2025-06-30 10:28:54,465 [INFO] 定时任务调度器已启动
2025-06-30 10:28:54,465 [INFO] 定时报告服务已启动
2025-06-30 10:28:55,751 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 10:28:55,751 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 10:28:55,753 [INFO]  * Restarting with stat
2025-06-30 10:28:56,674 [INFO] Starting Flask application v0.2.0
2025-06-30 10:28:56,677 [INFO] 定时任务调度器已启动
2025-06-30 10:28:56,678 [INFO] 定时报告服务已启动
2025-06-30 10:28:56,704 [WARNING]  * Debugger is active!
2025-06-30 10:28:56,711 [INFO]  * Debugger PIN: 122-422-975
2025-06-30 10:33:46,362 [INFO] Starting Flask application v0.2.0
2025-06-30 10:33:46,368 [INFO] 定时任务调度器已启动
2025-06-30 10:33:46,368 [INFO] 定时报告服务已启动
2025-06-30 10:33:47,660 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 10:33:47,660 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 10:34:25,878 [INFO] 成功获取 1 个预算
2025-06-30 10:34:25,879 [INFO] budgets 执行时间: 0.2610秒
2025-06-30 10:34:25,881 [INFO] 192.168.1.68 - - [30/Jun/2025 10:34:25] "GET /budgets HTTP/1.1" 200 -
2025-06-30 10:34:37,653 [INFO] Dify webhook请求: endpoint=/budgets, query_parameters={'include': 'spent', 'start': '2025-06-01', 'end': '2025-06-26'}
2025-06-30 10:34:37,819 [INFO] 成功获取 1 个预算
2025-06-30 10:34:37,820 [INFO] dify_webhook 执行时间: 0.1676秒
2025-06-30 10:34:37,820 [INFO] 192.168.1.68 - - [30/Jun/2025 10:34:37] "POST /dify_webhook HTTP/1.1" 200 -
2025-06-30 10:34:54,338 [INFO] 开始处理交易请求 [ID: da8534c9]
2025-06-30 10:34:54,339 [INFO] [da8534c9] 交易数据验证成功: {'amount': '35.0', 'description': '午饭', 'source_account': '工资账户', 'destination_account': '餐饮', 'category': 'N/A', 'budget': 'N/A'}
2025-06-30 10:34:54,339 [INFO] 添加交易记录: 午饭
2025-06-30 10:34:54,339 [INFO] 发送到Firefly III的数据: {'transactions': [{'type': 'withdrawal', 'date': '2025-06-30', 'amount': '[FILTERED]', 'description': '午饭', 'source_name': '工资账户', 'destination_name': '餐饮'}]}
2025-06-30 10:34:55,967 [INFO] 交易添加成功: 235
2025-06-30 10:34:55,968 [INFO] [da8534c9] 交易创建成功: amount=35.0, description=午饭
2025-06-30 10:34:55,969 [INFO] 构造消息内容: 交易操作：午饭, 费用：35.0，分类：None，预算：None。
2025-06-30 10:34:56,069 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751250897,v1=04d31bc36c00da9dba01dd878ea0bcabec34c92b448d226222be242b40b77122', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1748'}
2025-06-30 10:34:56,069 [INFO] Received data: {"uuid": "e4f05a83-4ac1-4df0-b787-e39fce127dfe", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 233, "created_at": "2025-06-29T21:49:14+08:00", "updated_at": "2025-06-29T21:49:14+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "233", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "刷京东白条购买美孚一号机油1L", "source_id": "71", "source_name": "京东白条", "source_iban": null, "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "10", "category_name": "购物支出", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["车护"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "df8a7aafb1be128b3894e5d26972ff06fe7a73f760340aa0e10fa08fe6787592", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/233"}]}}
2025-06-30 10:34:56,070 [INFO] Webhook处理成功: 您新增了一笔交易：刷京东白条购买美孚一号机油1L, 费用：[FILTERED]，分类：购物支出，预算：None。
2025-06-30 10:34:56,070 [INFO] webhook 执行时间: 0.0031秒
2025-06-30 10:34:56,071 [INFO] 192.168.1.195 - - [30/Jun/2025 10:34:56] "POST /webhook HTTP/1.1" 200 -
2025-06-30 10:34:56,092 [INFO] Request headers: {'Host': '192.168.1.68:9012', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Signature': 't=1751250897,v1=46e5731ba4b2f687d825dc0e339195237c282b28bc08e17b01e384ad2f5b1b96', 'User-Agent': 'FireflyIII/6.2.16', 'Timeout': '10', 'Content-Length': '1719'}
2025-06-30 10:34:56,092 [INFO] Received data: {"uuid": "d5564cdf-8ac9-44f5-b01f-0c83dcd8cd3c", "user_id": 1, "trigger": "STORE_TRANSACTION", "response": "TRANSACTIONS", "url": "http://192.168.1.68:9012/webhook", "version": "v0", "content": {"id": 234, "created_at": "2025-06-29T21:53:12+08:00", "updated_at": "2025-06-29T21:53:12+08:00", "user": 1, "group_title": null, "transactions": [{"user": 1, "transaction_journal_id": "234", "type": "withdrawal", "date": "2025-06-28T00:00:00+08:00", "order": 0, "currency_id": "19", "currency_code": "CNY", "currency_symbol": "¥", "currency_decimal_places": 2, "foreign_currency_id": "", "foreign_currency_code": null, "foreign_currency_symbol": null, "foreign_currency_decimal_places": null, "amount": "[FILTERED]", "foreign_amount": "[FILTERED]", "description": "朴朴买菜", "source_id": "61", "source_name": "信用卡（中信银行）", "source_iban": "", "source_type": "Asset account", "destination_id": "18", "destination_name": "Cash account", "destination_iban": null, "destination_type": "Cash account", "budget_id": "", "budget_name": null, "category_id": "1", "category_name": "生活饮食", "bill_id": "", "bill_name": null, "reconciled": false, "notes": null, "tags": ["食材"], "internal_reference": null, "external_id": null, "original_source": "ff3-v6.2.16", "recurrence_id": null, "bunq_payment_id": null, "import_hash_v2": "b6b430eca9adba0c04b4102795c5ca5c609e84a8b263557937316df2cc82ffbc", "sepa_cc": null, "sepa_ct_op": null, "sepa_ct_id": null, "sepa_db": null, "sepa_country": null, "sepa_ep": null, "sepa_ci": null, "sepa_batch_id": null, "interest_date": null, "book_date": null, "process_date": null, "due_date": null, "payment_date": null, "invoice_date": null, "longitude": null, "latitude": null, "zoom_level": null}], "links": [{"rel": "self", "uri": "/transactions/234"}]}}
2025-06-30 10:34:56,093 [INFO] Webhook处理成功: 您新增了一笔交易：朴朴买菜, 费用：[FILTERED]，分类：生活饮食，预算：None。
2025-06-30 10:34:56,093 [INFO] webhook 执行时间: 0.0030秒
2025-06-30 10:34:56,094 [INFO] 192.168.1.195 - - [30/Jun/2025 10:34:56] "POST /webhook HTTP/1.1" 200 -
2025-06-30 10:34:56,490 [INFO] 消息发送成功
2025-06-30 10:34:56,492 [INFO] [da8534c9] 通知发送成功
2025-06-30 10:34:56,493 [INFO] add_transaction 执行时间: 2.1561秒
2025-06-30 10:34:56,493 [INFO] 192.168.1.68 - - [30/Jun/2025 10:34:56] "POST /add_transaction?Authorization[FILTERED] HTTP/1.1" 201 -
2025-06-30 10:35:26,578 [INFO] Starting Flask application v0.2.0
2025-06-30 10:35:26,581 [INFO] 定时任务调度器已启动
2025-06-30 10:35:26,581 [INFO] 定时报告服务已启动
2025-06-30 10:35:27,884 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9012
 * Running on http://172.19.0.1:9012
2025-06-30 10:35:27,885 [INFO] [33mPress CTRL+C to quit[0m
2025-06-30 10:36:34,342 [ERROR] Dify API 请求失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:36:34,342 [ERROR] 生成 daily 报告失败: 400 Client Error: BAD REQUEST for url: http://192.168.1.68/v1/chat-messages
2025-06-30 10:36:34,888 [INFO] 消息发送成功
2025-06-30 10:36:34,889 [INFO] 成功发送 daily 报告给用户 metalhouse
